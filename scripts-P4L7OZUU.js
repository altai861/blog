(function(){"use strict";var Zf=function(t){if(t===null)return"null";if(t===void 0)return"undefined";var e=typeof t;return e==="object"&&(Array.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="Array")?"array":e==="object"&&(String.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="String")?"string":e},ys=function(t){return{eq:t}},Dk=ys(function(t,e){return t===e}),Qf=function(t){return ys(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},Jf=function(t){return ys(function(e,n){var o=Object.keys(e),r=Object.keys(n);if(!function(l,d){return function(c,u){return ys(function(m,p){return c.eq(u(m),u(p))})}(Qf(l),function(c){return function(u,m){return Array.prototype.slice.call(u).sort(m)}(c,d)})}(Dk).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!t.eq(e[i],n[i]))return!1}return!0})},md=ys(function(t,e){if(t===e)return!0;var n=Zf(t);return n===Zf(e)&&(function(o){return["undefined","boolean","number","string","function","xml","null"].indexOf(o)!==-1}(n)?t===e:n==="array"?Qf(md).eq(t,e):n==="object"&&Jf(md).eq(t,e))});const Lk=Object.getPrototypeOf,tg=(t,e,n)=>{var o;return!!n(t,e.prototype)||((o=t.constructor)===null||o===void 0?void 0:o.name)===e.name},fd=t=>e=>(n=>{const o=typeof n;return n===null?"null":o==="object"&&Array.isArray(n)?"array":o==="object"&&tg(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(e)===t,gd=t=>e=>typeof e===t,eg=t=>e=>t===e,Ja=(t,e)=>ie(t)&&tg(t,e,(n,o)=>Lk(n)===o),st=fd("string"),ie=fd("object"),ti=t=>Ja(t,Object),Vt=fd("array"),Ee=eg(null),_n=gd("boolean"),le=eg(void 0),Yt=t=>t==null,W=t=>!Yt(t),Nt=gd("function"),an=gd("number"),Mo=(t,e)=>{if(Vt(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},vt=()=>{},fn=(t,e)=>(...n)=>t(e.apply(null,n)),ng=(t,e)=>n=>t(e(n)),Y=t=>()=>t,xe=t=>t,og=(t,e)=>t===e;function et(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const Cs=t=>e=>!t(e),rg=t=>()=>{throw new Error(t)},pd=t=>t(),ws=t=>{t()},jt=Y(!1),Wt=Y(!0);class C{constructor(e,n){this.tag=e,this.value=n}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return W(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const hd=Array.prototype.slice,Mk=Array.prototype.indexOf,Ik=Array.prototype.push,sg=(t,e)=>Mk.call(t,e),_t=(t,e)=>sg(t,e)>-1,Ht=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},Ct=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++){const s=t[r];o[r]=e(s,r)}return o},U=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},ag=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Er=(t,e)=>{const n=[],o=[];for(let r=0,s=t.length;r<s;r++){const a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},ft=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const s=t[o];e(s,o)&&n.push(s)}return n},Es=(t,e,n)=>(ag(t,(o,r)=>{n=e(n,o,r)}),n),De=(t,e,n)=>(U(t,(o,r)=>{n=e(n,o,r)}),n),ig=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o];if(e(s,o))return C.some(s);if(n(s,o))break}return C.none()},Zt=(t,e)=>ig(t,e,jt),xs=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},lg=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Vt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Ik.apply(e,t[n])}return e},We=(t,e)=>lg(Ct(t,e)),Kn=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(e(t[n],n)!==!0)return!1;return!0},ks=t=>{const e=hd.call(t,0);return e.reverse(),e},ei=(t,e)=>ft(t,n=>!_t(e,n)),bd=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const s=t[o];n[String(s)]=e(s,o)}return n},Io=(t,e)=>{const n=hd.call(t,0);return n.sort(e),n},_s=(t,e)=>e>=0&&e<t.length?C.some(t[e]):C.none(),Re=t=>_s(t,0),go=t=>_s(t,t.length-1),ze=Nt(Array.from)?Array.from:t=>hd.call(t),xr=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return C.none()},dg=(t,e)=>{const n=[],o=Nt(e)?r=>Ht(n,s=>e(s,r)):r=>_t(n,r);for(let r=0,s=t.length;r<s;r++){const a=t[r];o(a)||n.push(a)}return n},Le=Object.keys,Fk=Object.hasOwnProperty,Dt=(t,e)=>{const n=Le(t);for(let o=0,r=n.length;o<r;o++){const s=n[o];e(t[s],s)}},Ss=(t,e)=>Uk(t,(n,o)=>({k:o,v:e(n,o)})),Uk=(t,e)=>{const n={};return Dt(t,(o,r)=>{const s=e(o,r);n[s.k]=s.v}),n},vd=t=>(e,n)=>{t[n]=e},cg=(t,e,n,o)=>{Dt(t,(r,s)=>{(e(r,s)?n:o)(r,s)})},Ns=(t,e)=>{const n={};return cg(t,e,vd(n),vt),n},ni=(t,e)=>{const n=[];return Dt(t,(o,r)=>{n.push(e(o,r))}),n},yd=t=>ni(t,xe),Ft=(t,e)=>pt(t,e)?C.from(t[e]):C.none(),pt=(t,e)=>Fk.call(t,e),kr=(t,e)=>pt(t,e)&&t[e]!==void 0&&t[e]!==null,ug=t=>{const e={};return U(t,n=>{e[n]={}}),Le(e)},mg=t=>t.length!==void 0,Cd=Array.isArray,oi=(t,e,n)=>{if(!t)return!1;if(n=n||t,mg(t)){for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t)===!1)return!1}else for(const o in t)if(pt(t,o)&&e.call(n,t[o],o,t)===!1)return!1;return!0},wd=(t,e)=>{const n=[];return oi(t,(o,r)=>{n.push(e(o,r,t))}),n},Rs=(t,e)=>{const n=[];return oi(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},ri=(t,e,n,o)=>{let r=le(n)?t[0]:n;for(let s=0;s<t.length;s++)r=e.call(o,r,t[s],s);return r},fg=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},Fo=t=>t[t.length-1],Sn=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},gg=()=>Ed(0,0),Ed=(t,e)=>({major:t,minor:e}),As={nu:Ed,detect:(t,e)=>{const n=String(e).toLowerCase();return t.length===0?gg():((o,r)=>{const s=((i,l)=>{for(let d=0;d<i.length;d++){const c=i[d];if(c.test(l))return c}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return Ed(a(1),a(2))})(t,n)},unknown:gg},pg=(t,e)=>{const n=String(e).toLowerCase();return Zt(t,o=>o.search(n))},hg=(t,e,n)=>e===""||t.length>=e.length&&t.substr(n,n+e.length)===e,bg=(t,e)=>Qt(t,e)?((n,o)=>n.substring(o))(t,e.length):t,ge=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return r!==-1&&(!!le(o)||r+e.length<=o)},Qt=(t,e)=>hg(t,e,0),xd=(t,e)=>hg(t,e,t.length-e.length),kd=t=>e=>e.replace(t,""),_r=kd(/^\s+|\s+$/g),zk=kd(/^\s+/g),vg=kd(/\s+$/g),Nn=t=>t.length>0,Ts=t=>!Nn(t),si=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?C.none():C.some(n)},_d=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Yn=t=>e=>ge(e,t),jk=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>ge(t,"edge/")&&ge(t,"chrome")&&ge(t,"safari")&&ge(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_d],search:t=>ge(t,"chrome")&&!ge(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>ge(t,"msie")||ge(t,"trident")},{name:"Opera",versionRegexes:[_d,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Yn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Yn("firefox")},{name:"Safari",versionRegexes:[_d,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(ge(t,"safari")||ge(t,"mobile/"))&&ge(t,"applewebkit")}],Hk=[{name:"Windows",search:Yn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>ge(t,"iphone")||ge(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Yn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Yn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Yn("linux"),versionRegexes:[]},{name:"Solaris",search:Yn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Yn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Yn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],yg={browsers:Y(jk),oses:Y(Hk)},Cg="Edge",wg="Chromium",Eg="Opera",xg="Firefox",kg="Safari",_g=t=>{const e=t.current,n=t.version,o=r=>()=>e===r;return{current:e,version:n,isEdge:o(Cg),isChromium:o(wg),isIE:o("IE"),isOpera:o(Eg),isFirefox:o(xg),isSafari:o(kg)}},$k=()=>_g({current:void 0,version:As.unknown()}),Vk=_g,Sg=(Y(Cg),Y(wg),Y("IE"),Y(Eg),Y(xg),Y(kg),"Windows"),Ng="Android",Rg="Linux",Ag="macOS",Tg="Solaris",Og="FreeBSD",Bg="ChromeOS",Pg=t=>{const e=t.current,n=t.version,o=r=>()=>e===r;return{current:e,version:n,isWindows:o(Sg),isiOS:o("iOS"),isAndroid:o(Ng),isMacOS:o(Ag),isLinux:o(Rg),isSolaris:o(Tg),isFreeBSD:o(Og),isChromeOS:o(Bg)}},qk=()=>Pg({current:void 0,version:As.unknown()}),Wk=Pg,Kk=(Y(Sg),Y("iOS"),Y(Ng),Y(Rg),Y(Ag),Y(Tg),Y(Og),Y(Bg),t=>window.matchMedia(t).matches);let Yk=Sn(()=>((t,e,n)=>{const o=yg.browsers(),r=yg.oses(),s=e.bind(l=>((d,c)=>xr(c.brands,u=>{const m=u.brand.toLowerCase();return Zt(d,p=>{var f;return m===((f=p.brand)===null||f===void 0?void 0:f.toLowerCase())}).map(p=>({current:p.name,version:As.nu(parseInt(u.version,10),0)}))}))(o,l)).orThunk(()=>((l,d)=>pg(l,d).map(c=>{const u=As.detect(c.versionRegexes,d);return{current:c.name,version:u}}))(o,t)).fold($k,Vk),a=((l,d)=>pg(l,d).map(c=>{const u=As.detect(c.versionRegexes,d);return{current:c.name,version:u}}))(r,t).fold(qk,Wk),i=((l,d,c,u)=>{const m=l.isiOS()&&/ipad/i.test(c)===!0,p=l.isiOS()&&!m,f=l.isiOS()||l.isAndroid(),h=f||u("(pointer:coarse)"),g=m||!p&&f&&u("(min-device-width:768px)"),b=p||f&&!g,v=d.isSafari()&&l.isiOS()&&/safari/i.test(c)===!1,y=!b&&!g&&!v;return{isiPad:Y(m),isiPhone:Y(p),isTablet:Y(g),isPhone:Y(b),isTouch:Y(h),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Y(v),isDesktop:Y(y)}})(a,s,t,n);return{browser:s,os:a,deviceType:i}})(window.navigator.userAgent,C.from(window.navigator.userAgentData),Kk));const Rn=()=>Yk(),Gk=window.navigator.userAgent,Sd=Rn(),An=Sd.browser,Tn=Sd.os,Uo=Sd.deviceType,Xk=Gk.indexOf("Windows Phone")!==-1,Et={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:An.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!An.isIE(),windowsPhone:Xk,browser:{current:An.current,version:An.version,isChromium:An.isChromium,isEdge:An.isEdge,isFirefox:An.isFirefox,isIE:An.isIE,isOpera:An.isOpera,isSafari:An.isSafari},os:{current:Tn.current,version:Tn.version,isAndroid:Tn.isAndroid,isChromeOS:Tn.isChromeOS,isFreeBSD:Tn.isFreeBSD,isiOS:Tn.isiOS,isLinux:Tn.isLinux,isMacOS:Tn.isMacOS,isSolaris:Tn.isSolaris,isWindows:Tn.isWindows},deviceType:{isDesktop:Uo.isDesktop,isiPad:Uo.isiPad,isiPhone:Uo.isiPhone,isPhone:Uo.isPhone,isTablet:Uo.isTablet,isTouch:Uo.isTouch,isWebView:Uo.isWebView}},Zk=/^\s*|\s*$/g,Dg=t=>Yt(t)?"":(""+t).replace(Zk,""),Lg=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),oi(t,(r,s)=>e.call(o,r,s,n)!==!1&&(Lg(r,e,n,o),!0)))},$={trim:Dg,isArray:Cd,is:(t,e)=>e?!(e!=="array"||!Cd(t))||typeof t===e:t!==void 0,toArray:t=>{if(Cd(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=st(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:oi,map:wd,grep:Rs,inArray:(t,e)=>{if(t){for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n}return-1},hasOwn:pt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(pt(o,r)){const s=o[r];s!==void 0&&(t[r]=s)}}return t},walk:Lg,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>Vt(t)?t:t===""?[]:wd(t.split(e||","),Dg),_addCacheSuffix:t=>{const e=Et.cacheSuffix;return e&&(t+=(t.indexOf("?")===-1?"?":"&")+e),t}},Sr=(t,e,n=og)=>t.exists(o=>n(o,e)),Mg=(t,e,n=og)=>pe(t,e,n).getOr(t.isNone()&&e.isNone()),pe=(t,e,n)=>t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none(),Nr=(t,e)=>t?C.some(e):C.none(),Qk=typeof window<"u"?window:Function("return this;")(),Ig=(t,e)=>((n,o)=>{let r=o??Qk;for(let s=0;s<n.length&&r!=null;++s)r=r[n[s]];return r})(t.split("."),e),Jk=Object.getPrototypeOf,t_=t=>{const e=Ig("ownerDocument.defaultView",t);return ie(t)&&((n=>((o,r)=>{const s=((a,i)=>Ig(a,i))(o,r);if(s==null)throw new Error(o+" not available on this browser");return s})("HTMLElement",n))(e).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Jk(t).constructor.name))},wt=t=>t.dom.nodeName.toLowerCase(),Fg=t=>t.dom.nodeType,ai=t=>e=>Fg(e)===t,ii=t=>je(t)&&t_(t.dom),je=ai(1),Ae=ai(3),e_=ai(9),n_=ai(11),li=t=>e=>je(e)&&wt(e)===t,Ug=(t,e,n)=>{if(!(st(n)||_n(n)||an(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},de=(t,e,n)=>{Ug(t.dom,e,n)},Gn=(t,e)=>{const n=t.dom;Dt(e,(o,r)=>{Ug(n,r,o)})},He=(t,e)=>{const n=t.dom.getAttribute(e);return n===null?void 0:n},Xn=(t,e)=>C.from(He(t,e)),Os=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},ce=(t,e)=>{t.dom.removeAttribute(e)},zg=t=>De(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),Nd=(t,e)=>{const n=He(t,e);return n===void 0||n===""?[]:n.split(" ")},Bs=t=>t.dom.classList!==void 0,jg=t=>Nd(t,"class"),Hg=(t,e)=>((n,o,r)=>{const s=Nd(n,o).concat([r]);return de(n,o,s.join(" ")),!0})(t,"class",e),$g=(t,e)=>((n,o,r)=>{const s=ft(Nd(n,o),a=>a!==r);return s.length>0?de(n,o,s.join(" ")):ce(n,o),!1})(t,"class",e),Rr=(t,e)=>{Bs(t)?t.dom.classList.add(e):Hg(t,e)},Vg=t=>{(Bs(t)?t.dom.classList:jg(t)).length===0&&ce(t,"class")},Ps=(t,e)=>{Bs(t)?t.dom.classList.remove(e):$g(t,e),Vg(t)},Rd=(t,e)=>Bs(t)&&t.dom.classList.contains(e),Ds=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},di=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return Ds(n.childNodes[0])},ne=(t,e)=>{const n=(e||document).createElement(t);return Ds(n)},Ar=(t,e)=>{const n=(e||document).createTextNode(t);return Ds(n)},R=Ds,o_=(t,e,n)=>C.from(t.dom.elementFromPoint(e,n)).map(Ds),qg=(t,e)=>{const n=[],o=s=>(n.push(s),e(s));let r=e(t);do r=r.bind(o);while(r.isSome());return n},gn=(t,e)=>{const n=t.dom;if(n.nodeType!==1)return!1;{const o=n;if(o.matches!==void 0)return o.matches(e);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(e);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(e);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Wg=t=>t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11||t.childElementCount===0,kt=(t,e)=>t.dom===e.dom,pn=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},Kg=t=>R(t.dom.ownerDocument),po=t=>e_(t)?t:Kg(t),Ls=t=>R(po(t).dom.defaultView),hn=t=>C.from(t.dom.parentNode).map(R),ci=t=>C.from(t.dom.parentElement).map(R),Yg=(t,e)=>{const n=Nt(e)?e:jt;let o=t.dom;const r=[];for(;o.parentNode!==null&&o.parentNode!==void 0;){const s=o.parentNode,a=R(s);if(r.push(a),n(a)===!0)break;o=s}return r},ho=t=>C.from(t.dom.previousSibling).map(R),Ms=t=>C.from(t.dom.nextSibling).map(R),Gg=t=>ks(qg(t,ho)),Xg=t=>qg(t,Ms),he=t=>Ct(t.dom.childNodes,R),Tr=(t,e)=>{const n=t.dom.childNodes;return C.from(n[e]).map(R)},Ad=t=>Tr(t,0),Td=t=>Tr(t,t.dom.childNodes.length-1),Od=t=>t.dom.childNodes.length,Bd=t=>n_(t)&&W(t.dom.host),bo=t=>R(t.dom.getRootNode()),Pd=t=>Bd(t)?t:(e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return R(n)})(po(t)),r_=t=>R(t.dom.host),Zg=t=>{if(W(t.target)){const e=R(t.target);if(je(e)&&s_(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Re(n)}}return C.from(t.target)},s_=t=>W(t.dom.shadowRoot),Or=t=>{const e=Ae(t)?t.dom.parentNode:t.dom;if(e==null||e.ownerDocument===null)return!1;const n=e.ownerDocument;return(o=>{const r=bo(o);return Bd(r)?C.some(r):C.none()})(R(e)).fold(()=>n.body.contains(e),ng(Or,r_))};var Qg=(t,e,n,o,r)=>t(n,o)?C.some(n):Nt(r)&&r(n)?C.none():e(n,o,r);const Zn=(t,e,n)=>{let o=t.dom;const r=Nt(n)?n:jt;for(;o.parentNode;){o=o.parentNode;const s=R(o);if(e(s))return C.some(s);if(r(s))break}return C.none()},zo=(t,e,n)=>Qg((o,r)=>r(o),Zn,t,e,n),Dd=(t,e)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const s=R(o.childNodes[r]);if(e(s))return C.some(s);const a=n(o.childNodes[r]);if(a.isSome())return a}return C.none()};return n(t.dom)},Is=(t,e,n)=>Zn(t,o=>gn(o,e),n),ui=(t,e)=>((n,o)=>{const r=o===void 0?document:o.dom;return Wg(r)?C.none():C.from(r.querySelector(n)).map(R)})(e,t),Br=(t,e,n)=>Qg((o,r)=>gn(o,r),Is,t,e,n),jo=(t,e=!1)=>{return Or(t)?t.dom.isContentEditable:(n=t,Br(n,"[contenteditable]")).fold(Y(e),o=>a_(o)==="true");var n},a_=t=>t.dom.contentEditable,mi=(t,e)=>{t.dom.contentEditable=e?"true":"false"},Fs=t=>t.style!==void 0&&Nt(t.style.getPropertyValue),Jg=(t,e,n)=>{if(!st(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Fs(t)&&t.style.setProperty(e,n)},tp=(t,e,n)=>{const o=t.dom;Jg(o,e,n)},fi=(t,e)=>{const n=t.dom;Dt(e,(o,r)=>{Jg(n,r,o)})},On=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return o!==""||Or(t)?o:ep(n,e)},ep=(t,e)=>Fs(t)?t.style.getPropertyValue(e):"",gi=(t,e)=>{const n=t.dom,o=ep(n,e);return C.from(o).filter(r=>r.length>0)},Ld=t=>{const e={},n=t.dom;if(Fs(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},np=(t,e)=>{((n,o)=>{Fs(n)&&n.style.removeProperty(o)})(t.dom,e),Sr(Xn(t,"style").map(_r),"")&&ce(t,"style")},Me=(t,e)=>{hn(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Qn=(t,e)=>{Ms(t).fold(()=>{hn(t).each(n=>{Gt(n,e)})},n=>{Me(n,e)})},Md=(t,e)=>{Ad(t).fold(()=>{Gt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Gt=(t,e)=>{t.dom.appendChild(e.dom)},op=(t,e)=>{Me(t,e),Gt(e,t)},Ho=(t,e)=>{U(e,n=>{Gt(t,n)})},Pr=t=>{t.dom.textContent="",U(he(t),e=>{Ut(e)})},Ut=t=>{const e=t.dom;e.parentNode!==null&&e.parentNode.removeChild(e)},vo=t=>{const e=he(t);var n,o;e.length>0&&(n=t,U(o=e,(r,s)=>{const a=s===0?n:o[s-1];Qn(a,r)})),Ut(t)},Id=t=>Ct(t,R),rp=t=>t.dom.innerHTML,pi=(t,e)=>{const n=Kg(t).dom,o=R(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,he(R(i))})(e,n);Ho(o,r),Pr(t),Gt(t,o)},i_=(t,e,n,o)=>((r,s,a,i,l)=>{const d=((c,u)=>m=>{c(m)&&u((p=>{const f=R(Zg(p).getOr(p.target)),h=()=>p.stopPropagation(),g=()=>p.preventDefault(),b=fn(g,h);return((v,y,E,w,x,S,_)=>({target:v,x:y,y:E,stop:w,prevent:x,kill:S,raw:_}))(f,p.clientX,p.clientY,h,g,b,p)})(m))})(a,i);return r.dom.addEventListener(s,d,!1),{unbind:et(l_,r,s,d,!1)}})(t,e,n,o),l_=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},sp=(t,e)=>({left:t,top:e,translate:(n,o)=>sp(t+n,e+o)}),Dr=sp,hi=(t,e)=>t!==void 0?t:e!==void 0?e:0,Fd=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Dr(n.offsetLeft,n.offsetTop):Or(t)?(o=>{const r=o.getBoundingClientRect();return Dr(r.left,r.top)})(e):Dr(0,0)},Ud=t=>{const e=t!==void 0?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return Dr(n,o)},ap=(t,e,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(t,e)},ip=(t,e)=>{Rn().browser.isSafari()&&Nt(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},lp=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),dp=t=>{const e=t===void 0?window:t,n=e.document,o=Ud(R(n));return(r=>{const s=r===void 0?window:r;return Rn().browser.isFirefox()?C.none():C.from(s.visualViewport)})(e).fold(()=>{const r=e.document.documentElement,s=r.clientWidth,a=r.clientHeight;return lp(o.left,o.top,s,a)},r=>lp(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},cp=(t,e)=>{let n=[];return U(he(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(cp(o,e))}),n},be=(t,e)=>((n,o)=>{const r=o===void 0?document:o.dom;return Wg(r)?[]:Ct(r.querySelectorAll(n),R)})(e,t),up=(t,e,n)=>Zn(t,e,n).isSome(),d_=(t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?((s,a)=>Zt(s.dom.childNodes,i=>a(R(i))).map(R))(R(r.parentNode),s=>!kt(n,s)&&o(s)):C.none()})(t,e).isSome(),mp=(t,e)=>Dd(t,e).isSome();class oe{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let s=e[o];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n){for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s}return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const Us="\uFEFF",Jt="\xA0",zd=t=>t===Us,c_=/^[ \t\r\n]*$/,Lr=t=>c_.test(t),fp=t=>t===`
`||t==="\r",gp=(t,e=4,n=!0,o=!0)=>{const r=((i,l)=>l<=0?"":new Array(l+1).join(" "))(0,e),s=t.replace(/\t/g,r);return De(s,(i,l)=>(d=>" \f	\v".indexOf(d)!==-1)(l)||l===Jt?i.pcIsSpace||i.str===""&&n||i.str.length===s.length-1&&o||((d,c)=>c<d.length&&c>=0&&fp(d[c]))(s,i.str.length+1)?{pcIsSpace:!1,str:i.str+Jt}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:fp(l),str:i.str+l},{pcIsSpace:!1,str:""}).str},$o=t=>e=>!!e&&e.nodeType===t,bi=t=>!!t&&!Object.getPrototypeOf(t),nt=$o(1),Jn=t=>nt(t)&&ii(R(t)),zs=t=>{const e=t.toLowerCase();return n=>W(n)&&n.nodeName.toLowerCase()===e},bn=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return _t(e,o)}return!1}},vi=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(nt(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},Vo=t=>nt(t)&&t.hasAttribute("data-mce-bogus"),Bn=t=>nt(t)&&t.tagName==="TABLE",pp=t=>e=>!!(Jn(e)&&(e.contentEditable===t||e.getAttribute("data-mce-contenteditable")===t)),jd=bn(["textarea","input"]),H=$o(3),u_=$o(4),m_=$o(7),yo=$o(8),js=$o(9),Hd=$o(11),$t=zs("br"),hp=zs("img"),ln=pp("true"),Lt=pp("false"),yi=bn(["td","th"]),f_=bn(["td","th","caption"]),Pn=bn(["video","audio","object","embed"]),g_=zs("li"),$d=zs("details"),p_=zs("summary"),bp={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},h_=t=>nt(t)&&t.hasAttribute("data-mce-bookmark"),b_=(t,e,n,o)=>H(t)&&!((r,s,a)=>Lr(r.data)&&!((i,l,d)=>{const c=R(l),u=R(i),m=d.getWhitespaceElements();return up(u,p=>pt(m,wt(p)),et(kt,c))})(r,s,a))(t,e,n)&&(!o.includeZwsp||!(r=>{for(const s of r)if(!zd(s))return!1;return!0})(t.data)),Vd=(t,e,n,o)=>Nt(o.isContent)&&o.isContent(e)||((r,s)=>nt(r)&&pt(s.getNonEmptyElements(),r.nodeName))(e,t)||h_(e)||(r=>nt(r)&&r.nodeName==="A"&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id")))(e)||b_(e,n,t,o)||Lt(e)||ln(e)&&(r=>ci(R(r)).exists(s=>!jo(s)))(e),to=(t,e,n)=>{const o={...bp,...n};if(o.checkRootAsContent&&Vd(t,e,e,o))return!1;let r=e.firstChild,s=0;if(!r)return!0;const a=new oe(r,e);do{if(o.skipBogus&&nt(r)){const i=r.getAttribute("data-mce-bogus");if(i){r=a.next(i==="all");continue}}if(yo(r))r=a.next(!0);else if($t(r))s++,r=a.next();else{if(Vd(t,r,e,o))return!1;r=a.next()}}while(r);return s<=1},ve=(t,e,n)=>to(t,e.dom,{checkRootAsContent:!0,...n}),vp=(t,e,n)=>Vd(t,e,e,{includeZwsp:bp.includeZwsp,...n}),re=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},v_=t=>{const e=re(C.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(C.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(C.some(setInterval(o,t)))}}},eo=()=>{const t=(e=>{const n=re(C.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(C.some(r))}}})(vt);return{...t,on:e=>t.get().each(e)}},yp=t=>{const e=t.toLowerCase();return e==="svg"?"svg":e==="math"?"math":"html"},qo=t=>yp(t)!=="html",qd=t=>qo(t.nodeName),Cp=t=>yp(t.nodeName),y_=["svg","math"],Ci="data-mce-block",Wd=t=>Ct((e=>ft(Le(e),n=>!/[A-Z]/.test(n)))(t),e=>{const n=CSS.escape(e);return`${n}:`+Ct(y_,o=>`not(${o} ${n})`).join(":")}).join(","),wp=(t,e)=>W(e.querySelector(t))?(e.setAttribute(Ci,"true"),e.getAttribute("data-mce-selected")==="inline-boundary"&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(Ci),!1),Ep=(t,e)=>{const n=Wd(t.getTransparentElements()),o=Wd(t.getBlockElements());return ft(e.querySelectorAll(n),r=>wp(o,r))},xp=(t,e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let s=e[r];s;s=s[r])if(to(t,s,{checkRootAsContent:!0}))return void((o=s.parentNode)===null||o===void 0||o.removeChild(s))},C_=(t,e,n)=>{const o=t.getBlockElements(),r=R(e),s=i=>wt(i)in o,a=i=>kt(i,r);U(Id(n),i=>{Zn(i,s,a).each(l=>{const d=((c,u)=>ft(he(c),m=>s(m)&&!t.isValidChild(wt(l),wt(m))))(i);if(d.length>0){const c=ci(l);U(d,u=>{Zn(u,s,a).each(m=>{((p,f,h)=>{const g=document.createRange(),b=f.parentNode;if(b){g.setStartBefore(f),g.setEndBefore(h);const v=g.extractContents();xp(p,v,!0),g.setStartAfter(h),g.setEndAfter(f);const y=g.extractContents();xp(p,y,!1),to(p,v,{checkRootAsContent:!0})||b.insertBefore(v,f),to(p,h,{checkRootAsContent:!0})||b.insertBefore(h,f),to(p,y,{checkRootAsContent:!0})||b.insertBefore(y,f),b.removeChild(f)}})(t,m.dom,u.dom)})}),c.each(u=>Ep(t,u.dom))}})})},Kd=(t,e)=>{const n=Ep(t,e);C_(t,e,n),((o,r,s)=>{U([...s,...Wo(o,r)?[r]:[]],a=>U(be(R(a),a.nodeName.toLowerCase()),i=>{E_(o,i.dom)&&vo(i)}))})(t,e,n)},w_=(t,e)=>{if(Xd(t,e)){const n=Wd(t.getBlockElements());wp(n,e)}},Yd=t=>t.hasAttribute(Ci),Gd=(t,e)=>pt(t.getTransparentElements(),e),Xd=(t,e)=>nt(e)&&Gd(t,e.nodeName),Wo=(t,e)=>Xd(t,e)&&Yd(e),E_=(t,e)=>Xd(t,e)&&!Yd(e),Zd=(t,e)=>e.type===1&&Gd(t,e.name)&&st(e.attr(Ci)),x_=Rn().browser,kp=t=>Zt(t,je),_p=(t,e)=>t.children&&_t(t.children,e),Sp=(t,e={})=>{let n=0;const o={},r=R(t),s=po(r),a=u=>{Gt(Pd(r),u)},i=u=>{const m=Pd(r);ui(m,"#"+u).each(Ut)},l=u=>Ft(o,u).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),d=u=>new Promise((m,p)=>{let f;const h=$._addCacheSuffix(u),g=l(h);o[h]=g,g.count++;const b=(w,x)=>{U(w,ws),g.status=x,g.passed=[],g.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},v=()=>b(g.passed,2),y=()=>b(g.failed,3);if(m&&g.passed.push(m),p&&g.failed.push(p),g.status===1)return;if(g.status===2)return void v();if(g.status===3)return void y();g.status=1;const E=ne("link",s.dom);Gn(E,{rel:"stylesheet",type:"text/css",id:g.id}),e.contentCssCors&&de(E,"crossOrigin","anonymous"),e.referrerPolicy&&de(E,"referrerpolicy",e.referrerPolicy),f=E.dom,f.onload=v,f.onerror=y,a(E),de(E,"href",h)}),c=u=>{const m=$._addCacheSuffix(u);Ft(o,m).each(p=>{--p.count==0&&(delete o[m],i(p.id))})};return{load:d,loadRawCss:(u,m)=>{const p=l(u);o[u]=p,p.count++;const f=ne("style",s.dom);Gn(f,{rel:"stylesheet",type:"text/css",id:p.id,"data-mce-key":u}),f.dom.innerHTML=m,a(f)},loadAll:u=>Promise.allSettled(Ct(u,m=>d(m).then(Y(m)))).then(m=>{const p=Er(m,f=>f.status==="fulfilled");return p.fail.length>0?Promise.reject(Ct(p.fail,f=>f.reason)):Ct(p.pass,f=>f.value)}),unload:c,unloadRawCss:u=>{Ft(o,u).each(m=>{--m.count==0&&(delete o[u],i(m.id))})},unloadAll:u=>{U(u,m=>{c(m)})},_setReferrerPolicy:u=>{e.referrerPolicy=u},_setContentCssCors:u=>{e.contentCssCors=u}}},Np=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=bo(e).dom;return C.from(t.get(o)).getOrThunk(()=>{const r=Sp(o,n);return t.set(o,r),r})}}})(),Rp=(t,e)=>W(t)&&(vp(e,t)||e.isInline(t.nodeName.toLowerCase())),Ap=t=>(e=>e.nodeName.toLowerCase()==="span")(t)&&t.getAttribute("data-mce-type")==="bookmark",Qd=(t,e,n,o)=>{var r;const s=o||e;if(nt(e)&&Ap(e))return e;const a=e.childNodes;for(let i=a.length-1;i>=0;i--)Qd(t,a[i],n,s);if(nt(e)){const i=e.childNodes;i.length===1&&Ap(i[0])&&((r=e.parentNode)===null||r===void 0||r.insertBefore(i[0],e))}return(i=>Hd(i)||js(i))(e)||vp(n,e)||(i=>!!nt(i)&&i.childNodes.length>0)(e)||((i,l,d)=>H(i)&&i.data.length>0&&((c,u,m)=>{const p=new oe(c,u).prev(!1),f=new oe(c,u).next(!1),h=le(p)||Rp(p,m),g=le(f)||Rp(f,m);return h&&g})(i,l,d))(e,s,n)||t.remove(e),e},k_=$.makeMap,wi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ei=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,__=/[<>&\"\']/g,S_=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,N_={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},Ko={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},R_={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Tp=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],e));if(!Ko[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},Jd=Tp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Op=(t,e)=>t.replace(e?wi:Ei,n=>Ko[n]||n),Bp=(t,e)=>t.replace(e?wi:Ei,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Ko[n]||"&#"+n.charCodeAt(0)+";"),tc=(t,e,n)=>{const o=n||Jd;return t.replace(e?wi:Ei,r=>Ko[r]||o[r]||r)},Yo={encodeRaw:Op,encodeAllRaw:t=>(""+t).replace(__,e=>Ko[e]||e),encodeNumeric:Bp,encodeNamed:tc,getEncodeFunc:(t,e)=>{const n=Tp(e)||Jd,o=k_(t.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?wi:Ei,a=>Ko[a]!==void 0?Ko[a]:n[a]!==void 0?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):o.named?e?(r,s)=>tc(r,s,n):tc:o.numeric?Bp:Op},decode:t=>t.replace(S_,(e,n)=>n?(n=n.charAt(0).toLowerCase()==="x"?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):N_[n]||String.fromCharCode(n):R_[e]||Jd[e]||(o=>{const r=ne("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},me=(t,e)=>(t=$.trim(t))?t.split(e||" "):[],Pp=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),Dp=t=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...t!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...t!=="html5-strict"?["xml:lang"]:[]]),Lp=t=>{let e,n;e="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",t!=="html4"&&(e+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),t!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),e=[e,"center dir isindex noframes"].join(" "));const o=[e,n].join(" ");return{blockContent:e,phrasingContent:n,flowContent:o}},ec=t=>{const{blockContent:e,phrasingContent:n,flowContent:o}=Lp(t),r=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:r(e),phrasingContent:r(n),flowContent:r(o)})},A_={html4:Sn(()=>ec("html4")),html5:Sn(()=>ec("html5")),"html5-strict":Sn(()=>ec("html5-strict"))},Mp=(t,e)=>{const{blockContent:n,phrasingContent:o,flowContent:r}=A_[t]();return e==="blocks"?C.some(n):e==="phrasing"?C.some(o):e==="flow"?C.some(r):C.none()},nc=t=>C.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(t)).map(e=>({preset:e[1]==="@",name:e[2]})),xi={},Hs=$.makeMap,vn=$.each,Ip=$.extend,Fp=$.explode,Up=(t,e={})=>{const n=Hs(t," ",Hs(t.toUpperCase()," "));return Ip(n,e)},zp=t=>Up("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),oc=(t,e)=>{if(t){const n={};return st(t)&&(t={"*":t}),vn(t,(o,r)=>{n[r]=n[r.toUpperCase()]=e==="map"?Hs(o,/[, ]/):Fp(o,/[, ]/)}),n}},Co=(t={})=>{var e;const n={},o={};let r=[];const s={},a={},i=(X,ht,yt)=>{const mt=t[X];if(mt)return Hs(mt,/[, ]/,Hs(mt.toUpperCase(),/[, ]/));{let xt=xi[X];return xt||(xt=Up(ht,yt),xi[X]=xt),xt}},l=(e=t.schema)!==null&&e!==void 0?e:"html5",d=(X=>{const ht=Dp(X),{phrasingContent:yt,flowContent:mt}=Lp(X),xt={},Ot=(At,Tt,qt)=>{xt[At]={attributes:bd(Tt,Y({})),attributesOrder:Tt,children:bd(qt,Y({}))}},G=(At,Tt="",qt="")=>{const ue=me(qt),kn=me(At);let we=kn.length;const rn=[...ht,...me(Tt)];for(;we--;)Ot(kn[we],rn.slice(),ue)},dt=(At,Tt)=>{const qt=me(At),ue=me(Tt);let kn=qt.length;for(;kn--;){const we=xt[qt[kn]];for(let rn=0,ee=ue.length;rn<ee;rn++)we.attributes[ue[rn]]={},we.attributesOrder.push(ue[rn])}};return X!=="html5-strict"&&(U(me("acronym applet basefont big font strike tt"),At=>{G(At,"",yt)}),U(me("center dir isindex noframes"),At=>{G(At,"",mt)})),G("html","manifest","head body"),G("head","","base command link meta noscript script style title"),G("title hr noscript br"),G("base","href target"),G("link","href rel media hreflang type sizes hreflang"),G("meta","name http-equiv content charset"),G("style","media type scoped"),G("script","src async defer type charset"),G("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",mt),G("dd div","",mt),G("address dt caption","",X==="html4"?yt:mt),G("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",yt),G("blockquote","cite",mt),G("ol","reversed start type","li"),G("ul","","li"),G("li","value",mt),G("dl","","dt dd"),G("a","href target rel media hreflang type",X==="html4"?yt:mt),G("q","cite",yt),G("ins del","cite datetime",mt),G("img","src sizes srcset alt usemap ismap width height"),G("iframe","src name width height",mt),G("embed","src type width height"),G("object","data type typemustmatch name usemap form width height",[mt,"param"].join(" ")),G("param","name value"),G("map","name",[mt,"area"].join(" ")),G("area","alt coords shape href target rel media hreflang type"),G("table","border","caption colgroup thead tfoot tbody tr"+(X==="html4"?" col":"")),G("colgroup","span","col"),G("col","span"),G("tbody thead tfoot","","tr"),G("tr","","td th"),G("td","colspan rowspan headers",mt),G("th","colspan rowspan headers scope abbr",mt),G("form","accept-charset action autocomplete enctype method name novalidate target",mt),G("fieldset","disabled form name",[mt,"legend"].join(" ")),G("label","form for",yt),G("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),G("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",X==="html4"?mt:yt),G("select","disabled form multiple name required size","option optgroup"),G("optgroup","disabled label","option"),G("option","disabled label selected value"),G("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),G("menu","type label",[mt,"li"].join(" ")),G("noscript","",mt),X!=="html4"&&(G("wbr"),G("ruby","",[yt,"rt rp"].join(" ")),G("figcaption","",mt),G("mark rt rp bdi","",yt),G("summary","",[yt,"h1 h2 h3 h4 h5 h6"].join(" ")),G("canvas","width height",mt),G("data","value",yt),G("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[mt,"track source"].join(" ")),G("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[mt,"track source"].join(" ")),G("picture","","img source"),G("source","src srcset type media sizes"),G("track","kind src srclang label default"),G("datalist","",[yt,"option"].join(" ")),G("article section nav aside main header footer","",mt),G("hgroup","","h1 h2 h3 h4 h5 h6"),G("figure","",[mt,"figcaption"].join(" ")),G("time","datetime",yt),G("dialog","open",mt),G("command","type label icon disabled checked radiogroup command"),G("output","for form name",yt),G("progress","value max",yt),G("meter","value min max low high optimum",yt),G("details","open",[mt,"summary"].join(" ")),G("keygen","autofocus challenge disabled form keytype name"),Ot("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),X!=="html5-strict"&&(dt("script","language xml:space"),dt("style","xml:space"),dt("object","declare classid code codebase codetype archive standby align border hspace vspace"),dt("embed","align name hspace vspace"),dt("param","valuetype type"),dt("a","charset name rev shape coords"),dt("br","clear"),dt("applet","codebase archive code object alt name width height align hspace vspace"),dt("img","name longdesc align border hspace vspace"),dt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),dt("font basefont","size color face"),dt("input","usemap align"),dt("select"),dt("textarea"),dt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),dt("ul","type compact"),dt("li","type"),dt("ol dl menu dir","compact"),dt("pre","width xml:space"),dt("hr","align noshade size width"),dt("isindex","prompt"),dt("table","summary width frame rules cellspacing cellpadding align bgcolor"),dt("col","width align char charoff valign"),dt("colgroup","width align char charoff valign"),dt("thead","align char charoff valign"),dt("tr","align char charoff valign bgcolor"),dt("th","axis align char charoff valign nowrap bgcolor width height"),dt("form","accept"),dt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),dt("tfoot","align char charoff valign"),dt("tbody","align char charoff valign"),dt("area","nohref"),dt("body","background bgcolor text link vlink alink")),X!=="html4"&&(dt("input button select textarea","autofocus"),dt("input textarea","placeholder"),dt("a","download"),dt("link script img","crossorigin"),dt("img","loading"),dt("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),X!=="html4"&&U([xt.video,xt.audio],At=>{delete At.children.audio,delete At.children.video}),U(me("a form meter progress dfn"),At=>{xt[At]&&delete xt[At].children[At]}),delete xt.caption.children.table,delete xt.script,xt})(l);t.verify_html===!1&&(t.valid_elements="*[*]");const c=oc(t.valid_styles),u=oc(t.invalid_styles,"map"),m=oc(t.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre svg textarea summary",h),y=i("move_caret_before_on_enter_elements",b+" table",h),E="h1 h2 h3 h4 h5 h6",w=i("text_block_elements",E+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),S=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),_=i("transparent_elements","a ins del canvas map"),O=i("wrap_block_elements","pre "+E);vn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),X=>{a[X]=new RegExp("</"+X+"[^>]*>","gi")});const D=X=>{const ht=C.from(n["@"]),yt=/[*?+]/;U(((mt,xt)=>{const Ot=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return We(me(xt,","),G=>{const dt=Ot.exec(G);if(dt){const At=dt[1],Tt=dt[2],qt=dt[3],ue=dt[4],kn=dt[5],we={attributes:{},attributesOrder:[]};if(mt.each(rn=>((ee,wr)=>{Dt(ee.attributes,(Do,$n)=>{wr.attributes[$n]=Do}),wr.attributesOrder.push(...ee.attributesOrder)})(rn,we)),At==="#"?we.paddEmpty=!0:At==="-"&&(we.removeEmpty=!0),ue==="!"&&(we.removeEmptyAttrs=!0),kn&&((rn,ee)=>{const wr=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Do=/[*?+]/,{attributes:$n,attributesOrder:sn}=ee;U(me(rn,"|"),Lo=>{const co=wr.exec(Lo);if(co){const Vn={},ud=co[1],Pe=co[2].replace(/[\\:]:/g,":"),vs=co[3],Kt=co[4];if(ud==="!"&&(ee.attributesRequired=ee.attributesRequired||[],ee.attributesRequired.push(Pe),Vn.required=!0),ud==="-")return delete $n[Pe],void sn.splice($.inArray(sn,Pe),1);if(vs&&(vs==="="?(ee.attributesDefault=ee.attributesDefault||[],ee.attributesDefault.push({name:Pe,value:Kt}),Vn.defaultValue=Kt):vs==="~"?(ee.attributesForced=ee.attributesForced||[],ee.attributesForced.push({name:Pe,value:Kt}),Vn.forcedValue=Kt):vs==="<"&&(Vn.validValues=$.makeMap(Kt,"?"))),Do.test(Pe)){const uo=Vn;ee.attributePatterns=ee.attributePatterns||[],uo.pattern=Pp(Pe),ee.attributePatterns.push(uo)}else $n[Pe]||sn.push(Pe),$n[Pe]=Vn}})})(kn,we),qt&&(we.outputName=Tt),Tt==="@"){if(!mt.isNone())return[];mt=C.some(we)}return[qt?{name:Tt,element:we,aliasName:qt}:{name:Tt,element:we}]}return[]})})(ht,X??""),({name:mt,element:xt,aliasName:Ot})=>{if(Ot&&(n[Ot]=xt),yt.test(mt)){const G=xt;G.pattern=Pp(mt),r.push(G)}else n[mt]=xt})},k=X=>{r=[],U(Le(n),ht=>{delete n[ht]}),D(X)},N=(X,ht)=>{var yt,mt;delete xi.text_block_elements,delete xi.block_elements;const xt=!!ht.extends&&!Mt(ht.extends),Ot=ht.extends;if(o[X]=Ot?o[Ot]:{},s[X]=Ot??X,v[X.toUpperCase()]={},v[X]={},xt||(x[X.toUpperCase()]={},x[X]={}),Ot&&!n[X]&&n[Ot]){const G=(dt=>{const At=Tt=>Vt(Tt)?Ct(Tt,At):(qt=>ie(qt)&&qt.source&&Object.prototype.toString.call(qt)==="[object RegExp]")(Tt)?new RegExp(Tt.source,Tt.flags):ie(Tt)?Ss(Tt,At):Tt;return At(dt)})(n[Ot]);delete G.removeEmptyAttrs,delete G.removeEmpty,n[X]=G}else n[X]={attributesOrder:[],attributes:{}};if(Vt(ht.attributes)){const G=At=>{dt.attributesOrder.push(At),dt.attributes[At]={}},dt=(yt=n[X])!==null&&yt!==void 0?yt:{};delete dt.attributesDefault,delete dt.attributesForced,delete dt.attributePatterns,delete dt.attributesRequired,dt.attributesOrder=[],dt.attributes={},U(ht.attributes,At=>{const Tt=Dp(l);nc(At).each(({preset:qt,name:ue})=>{qt?ue==="global"&&U(Tt,G):G(ue)})}),n[X]=dt}if(_n(ht.padEmpty)){const G=(mt=n[X])!==null&&mt!==void 0?mt:{};G.paddEmpty=ht.padEmpty,n[X]=G}if(Vt(ht.children)){const G={},dt=Tt=>{G[Tt]={}},At=Tt=>{Mp(l,Tt).each(qt=>{U(qt,dt)})};U(ht.children,Tt=>{nc(Tt).each(({preset:qt,name:ue})=>{qt?At(ue):dt(ue)})}),o[X]=G}Ot&&Dt(o,(G,dt)=>{G[Ot]&&(o[dt]=G=Ip({},o[dt]),G[X]=G[Ot])})},T=X=>{ie(X)?Dt(X,(ht,yt)=>N(yt,ht)):st(X)&&(ht=>{U((yt=>{const mt=/^(~)?(.+)$/;return We(me(yt,","),xt=>{const Ot=mt.exec(xt);return Ot?[{cloneName:Ot[1]==="~"?"span":"div",name:Ot[2]}]:[]})})(ht??""),({name:yt,cloneName:mt})=>{N(yt,{extends:mt})})})(X)},F=X=>{U((ht=>{const yt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return We(me(ht,","),mt=>{const xt=yt.exec(mt);if(xt){const Ot=xt[1];return[{operation:Ot?(dt=>dt==="-"?"remove":"add")(Ot):"replace",name:xt[2],validChildren:We(me(xt[3],"|"),dt=>nc(dt).toArray())}]}return[]})})(X??""),({operation:ht,name:yt,validChildren:mt})=>{const xt=ht==="replace"?{"#comment":{}}:o[yt],Ot=G=>{ht==="remove"?delete xt[G]:xt[G]={}};U(mt,({preset:G,name:dt})=>{G?(At=>{Mp(l,At).each(Tt=>{U(Tt,Ot)})})(dt):Ot(dt)}),o[yt]=xt})},j=X=>{const ht=n[X];if(ht)return ht;let yt=r.length;for(;yt--;){const mt=r[yt];if(mt.pattern.test(X))return mt}},z=Y(c),J=Y(u),ot=Y(m),rt=Y(g),it=Y(x),K=Y(w),tt=Y(S),A=Y(Object.seal(h)),B=Y(f),M=Y(v),L=Y(y),q=Y(p),V=Y(_),at=Y(O),lt=Y(Object.seal(a)),gt=(X,ht)=>{const yt=j(X);if(yt){if(!ht)return!0;{if(yt.attributes[ht])return!0;const mt=yt.attributePatterns;if(mt){let xt=mt.length;for(;xt--;)if(mt[xt].pattern.test(ht))return!0}}}return!1},Mt=X=>pt(it(),X),It=X=>!Qt(X,"#")&&gt(X)&&!Mt(X),qe=Y(s);return t.valid_elements?(k(t.valid_elements),vn(d,(X,ht)=>{o[ht]=X.children})):(vn(d,(X,ht)=>{n[ht]={attributes:X.attributes,attributesOrder:X.attributesOrder},o[ht]=X.children}),vn(me("strong/b em/i"),X=>{const ht=me(X,"/");n[ht[1]].outputName=ht[0]}),vn(S,(X,ht)=>{n[ht]&&(t.padd_empty_block_inline_children&&(n[ht].paddInEmptyBlock=!0),n[ht].removeEmpty=!0)}),vn(me("ol ul blockquote a table tbody"),X=>{n[X]&&(n[X].removeEmpty=!0)}),vn(me("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),X=>{n[X]&&(n[X].paddEmpty=!0)}),vn(me("span"),X=>{n[X].removeEmptyAttrs=!0})),delete n.svg,T(t.custom_elements),F(t.valid_children),D(t.extended_valid_elements),F("+ol[ul|ol],+ul[ul|ol]"),vn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(X,ht)=>{n[ht]&&(n[ht].parentsRequired=me(X))}),t.invalid_elements&&vn(Fp(t.invalid_elements),X=>{n[X]&&delete n[X]}),j("span")||D("span[!data-mce-type|*]"),{type:l,children:o,elements:n,getValidStyles:z,getValidClasses:ot,getBlockElements:it,getInvalidStyles:J,getVoidElements:A,getTextBlockElements:K,getTextInlineElements:tt,getBoolAttrs:rt,getElementRule:j,getSelfClosingElements:B,getNonEmptyElements:M,getMoveCaretBeforeOnEnterElements:L,getWhitespaceElements:q,getTransparentElements:V,getSpecialElements:lt,isValidChild:(X,ht)=>{const yt=o[X.toLowerCase()];return!(!yt||!yt[ht.toLowerCase()])},isValid:gt,isBlock:Mt,isInline:It,isWrapper:X=>pt(at(),X)||It(X),getCustomElements:qe,addValidElements:D,setValidElements:k,addCustomElements:T,addValidChildren:F}},rc=t=>{const e=t.toString(16);return(e.length===1?"0"+e:e).toUpperCase()},T_=t=>(e=>{return{value:(n=e,bg(n,"#").toUpperCase())};var n})(rc(t.red)+rc(t.green)+rc(t.blue)),jp=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Hp=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,$p=(t,e,n,o)=>((r,s,a,i)=>({red:r,green:s,blue:a,alpha:i}))(parseInt(t,10),parseInt(e,10),parseInt(n,10),parseFloat(o)),Vp=t=>{const e=jp.exec(t);if(e!==null)return C.some($p(e[1],e[2],e[3],"1"));const n=Hp.exec(t);return n!==null?C.some($p(n[1],n[2],n[3],n[4])):C.none()},O_=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,$s=t=>Vp(t).map(T_).map(e=>"#"+e.value).getOr(t),sc=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;const l=Us;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const d=`\\" \\' \\; \\: ; : \uFEFF`.split(" ");for(let u=0;u<d.length;u++)s[d[u]]=l+u,s[l+u]=d[u];const c={parse:u=>{const m={};let p=!1;const f=t.url_converter,h=t.url_converter_scope||c,g=(k,N,T)=>{const F=m[k+"-top"+N];if(!F)return;const j=m[k+"-right"+N];if(!j)return;const z=m[k+"-bottom"+N];if(!z)return;const J=m[k+"-left"+N];if(!J)return;const ot=[F,j,z,J];let rt=ot.length-1;for(;rt--&&ot[rt]===ot[rt+1];);rt>-1&&T||(m[k+N]=rt===-1?ot[0]:ot.join(" "),delete m[k+"-top"+N],delete m[k+"-right"+N],delete m[k+"-bottom"+N],delete m[k+"-left"+N])},b=k=>{const N=m[k];if(!N)return;const T=N.indexOf(",")>-1?[N]:N.split(" ");let F=T.length;for(;F--;)if(T[F]!==T[0])return!1;return m[k]=T[0],!0},v=k=>(p=!0,s[k]),y=(k,N)=>(p&&(k=k.replace(/\uFEFF[0-9]/g,T=>s[T])),N||(k=k.replace(/\\([\'\";:])/g,"$1")),k),E=k=>String.fromCharCode(parseInt(k.slice(1),16)),w=k=>k.replace(/\\[0-9a-f]+/gi,E),x=(k,N,T,F,j,z)=>{if(j=j||z)return"'"+(j=y(j)).replace(/\'/g,"\\'")+"'";if(N=y(N||T||F||""),!t.allow_script_urls){const J=N.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(J)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(J))return""}return f&&(N=f.call(h,N,"style")),"url('"+N.replace(/\'/g,"\\'")+"')"};if(u){let k;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,N=>N.replace(/[;:]/g,v));k=o.exec(u);){o.lastIndex=k.index+k[0].length;let N=k[1].replace(r,"").toLowerCase(),T=k[2].replace(r,"");if(N&&T){if(N=w(N),T=w(T),N.indexOf(l)!==-1||N.indexOf('"')!==-1||!t.allow_script_urls&&(N==="behavior"||/expression\s*\(|\/\*|\*\//.test(T)))continue;N==="font-weight"&&T==="700"?T="bold":N!=="color"&&N!=="background-color"||(T=T.toLowerCase()),D=T,(jp.test(D)?"rgb":Hp.test(D)?"rgba":"other")=="rgb"&&Vp(T).each(F=>{T=$s(O_(F)).toLowerCase()}),T=T.replace(n,x),m[N]=p?y(T,!0):T}}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),_="border-style",O="border-color",b(S="border-width")&&b(_)&&b(O)&&(m.border=m[S]+" "+m[_]+" "+m[O],delete m[S],delete m[_],delete m[O]),m.border==="medium none"&&delete m.border,m["border-image"]==="none"&&delete m["border-image"]}var S,_,O,D;return m},serialize:(u,m)=>{let p="";const f=(h,g)=>{const b=g[h];if(b)for(let v=0,y=b.length;v<y;v++){const E=b[v],w=u[E];w&&(p+=(p.length>0?" ":"")+E+": "+w+";")}};return m&&a?(f("*",a),f(m,a)):Dt(u,(h,g)=>{h&&((b,v)=>{if(!i||!v)return!0;let y=i["*"];return!(y&&y[b]||(y=i[v],y&&y[b]))})(g,m)&&(p+=(p.length>0?" ":"")+g+": "+h+";")}),p}};return c},B_={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},qp=(t,e)=>{const n=e??{};for(const o in t)pt(B_,o)||(n[o]=t[o]);return W(t.composedPath)&&(n.composedPath=()=>t.composedPath()),W(t.getModifierState)&&(n.getModifierState=o=>t.getModifierState(o)),W(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},ac=(t,e,n,o)=>{var r;const s=qp(e,o);return s.type=t,Yt(s.target)&&(s.target=(r=s.srcElement)!==null&&r!==void 0?r:n),(a=>Yt(a.preventDefault)||(i=>i instanceof Event||Nt(i.initEvent))(a))(e)&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Wt,Nt(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Wt,Nt(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Wt,s.stopPropagation()},(a=>a.isDefaultPrevented===Wt||a.isDefaultPrevented===jt)(s)||(s.isDefaultPrevented=s.defaultPrevented===!0?Wt:jt,s.isPropagationStopped=s.cancelBubble===!0?Wt:jt,s.isImmediatePropagationStopped=jt)),s},P_=/^(?:mouse|contextmenu)|click/,ic=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},ki=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},Vs=(t,e)=>{const n=ac(t.type,t,document,e);if((o=>W(o)&&P_.test(o.type))(t)&&le(t.pageX)&&!le(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}return n},D_=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const s=()=>{ki(t,"DOMContentLoaded",s),ki(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};o.readyState==="complete"||o.readyState==="interactive"&&o.body?s():ic(t,"DOMContentLoaded",s),n.domLoaded||ic(t,"load",s)};class Go{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const s=this;let a;const i=window,l=m=>{s.executeHandlers(Vs(m||i.event),d)};if(!e||H(e)||yo(e))return o;let d;e[s.expando]?d=e[s.expando]:(d=s.count++,e[s.expando]=d,s.events[d]={}),r=r||e;const c=n.split(" ");let u=c.length;for(;u--;){let m=c[u],p=l,f=!1,h=!1;m==="DOMContentLoaded"&&(m="ready"),s.domLoaded&&m==="ready"&&e.readyState==="complete"?o.call(r,Vs({type:m})):(s.hasFocusIn||m!=="focusin"&&m!=="focusout"||(f=!0,h=m==="focusin"?"focus":"blur",p=g=>{const b=Vs(g||i.event);b.type=b.type==="focus"?"focusin":"focusout",s.executeHandlers(b,d)}),a=s.events[d][m],a?m==="ready"&&s.domLoaded?o(Vs({type:m})):a.push({func:o,scope:r}):(s.events[d][m]=a=[{func:o,scope:r}],a.fakeName=h,a.capture=f,a.nativeHandler=p,m==="ready"?D_(e,p,s):ic(e,h||m,p,f)))}return e=a=null,o}unbind(e,n,o){if(!e||H(e)||yo(e))return this;const r=e[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],d=s[l];if(d){if(o){let c=d.length;for(;c--;)if(d[c].func===o){const u=d.nativeHandler,m=d.fakeName,p=d.capture,f=d.slice(0,c).concat(d.slice(c+1));f.nativeHandler=u,f.fakeName=m,f.capture=p,s[l]=f}}o&&d.length!==0||(delete s[l],ki(e,d.fakeName||l,d.nativeHandler,d.capture))}}}else Dt(s,(a,i)=>{ki(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(pt(s,a))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||H(e)||yo(e))return this;const r=Vs({type:n,target:e},o);do{const s=e[this.expando];s&&this.executeHandlers(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||H(e)||yo(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&i.func.call(i.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Go.Event=new Go;const lc=$.each,L_=$.grep,dc="data-mce-style",M_=$.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),qs=(t,e,n)=>{Yt(n)||n===""?ce(t,e):de(t,e,n)},Wp=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Mr=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!e||!H(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},Kp=(t,e)=>{const n=He(e,"style"),o=t.serialize(t.parse(n),wt(e));qs(e,dc,o)},Yp=(t,e,n)=>{const o=Wp(e);Yt(n)||n===""?np(t,o):tp(t,o,((r,s)=>an(r)?pt(M_,s)?r+"":r+"px":r)(n,o))},Pt=(t,e={})=>{const n={},o=window,r={};let s=0;const a=Np.forElement(R(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:Co({}),d=sc({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),c=e.ownEvents?new Go:Go.Event,u=l.getBlockElements(),m=A=>A&&t&&st(A)?t.getElementById(A):A,p=A=>{const B=m(A);return W(B)?R(B):null},f=(A,B,M="")=>{let L;const q=p(A);if(W(q)&&je(q)){const V=tt[B];L=V&&V.get?V.get(q.dom,B):He(q,B)}return W(L)?L:M},h=A=>{const B=m(A);return Yt(B)?[]:B.attributes},g=(A,B,M)=>{_(A,L=>{if(nt(L)){const q=R(L),V=M===""?null:M,at=He(q,B),lt=tt[B];lt&&lt.set?lt.set(q.dom,V,B):qs(q,B,V),at!==V&&e.onSetAttrib&&e.onSetAttrib({attrElm:q.dom,attrName:B,attrValue:V})}})},b=()=>e.root_element||t.body,v=(A,B)=>((M,L,q)=>{let V=0,at=0;const lt=M.ownerDocument;if(q=q||M,L){if(q===M&&L.getBoundingClientRect&&On(R(M),"position")==="static"){const Mt=L.getBoundingClientRect();return V=Mt.left+(lt.documentElement.scrollLeft||M.scrollLeft)-lt.documentElement.clientLeft,at=Mt.top+(lt.documentElement.scrollTop||M.scrollTop)-lt.documentElement.clientTop,{x:V,y:at}}let gt=L;for(;gt&&gt!==q&&gt.nodeType&&!_p(gt,q);){const Mt=gt;V+=Mt.offsetLeft||0,at+=Mt.offsetTop||0,gt=Mt.offsetParent}for(gt=L.parentNode;gt&&gt!==q&&gt.nodeType&&!_p(gt,q);)V-=gt.scrollLeft||0,at-=gt.scrollTop||0,gt=gt.parentNode;at+=(Mt=>x_.isFirefox()&&wt(Mt)==="table"?kp(he(Mt)).filter(It=>wt(It)==="caption").bind(It=>kp(Xg(It)).map(qe=>{const X=qe.dom.offsetTop,ht=It.dom.offsetTop,yt=It.dom.offsetHeight;return X<=ht?-yt:0})).getOr(0):0)(R(L))}return{x:V,y:at}})(t.body,m(A),B),y=(A,B,M)=>{const L=m(A);var q;if(!Yt(L)&&(Jn(L)||nt(q=L)&&q.namespaceURI==="http://www.w3.org/2000/svg"))return M?On(R(L),Wp(B)):((B=B.replace(/-(\D)/g,(V,at)=>at.toUpperCase()))==="float"&&(B="cssFloat"),L.style?L.style[B]:void 0)},E=A=>{const B=m(A);if(!B)return{w:0,h:0};let M=y(B,"width"),L=y(B,"height");return M&&M.indexOf("px")!==-1||(M="0"),L&&L.indexOf("px")!==-1||(L="0"),{w:parseInt(M,10)||B.offsetWidth||B.clientWidth,h:parseInt(L,10)||B.offsetHeight||B.clientHeight}},w=(A,B)=>{if(!A)return!1;const M=Vt(A)?A:[A];return Ht(M,L=>gn(R(L),B))},x=(A,B,M,L)=>{const q=[];let V=m(A);L=L===void 0;const at=M||(b().nodeName!=="BODY"?b().parentNode:null);if(st(B))if(B==="*")B=nt;else{const lt=B;B=gt=>w(gt,lt)}for(;V&&!(V===at||Yt(V.nodeType)||js(V)||Hd(V));){if(!B||B(V)){if(!L)return[V];q.push(V)}V=V.parentNode}return L?q:null},S=(A,B,M)=>{let L=B;if(A){st(B)&&(L=q=>w(q,B));for(let q=A[M];q;q=q[M])if(Nt(L)&&L(q))return q}return null},_=function(A,B,M){const L=M??this;if(Vt(A)){const q=[];return lc(A,(V,at)=>{const lt=m(V);lt&&q.push(B.call(L,lt,at))}),q}{const q=m(A);return!!q&&B.call(L,q)}},O=(A,B)=>{_(A,M=>{Dt(B,(L,q)=>{g(M,q,L)})})},D=(A,B)=>{_(A,M=>{const L=R(M);pi(L,B)})},k=(A,B,M,L,q)=>_(A,V=>{const at=st(B)?t.createElement(B):B;return W(M)&&O(at,M),L&&(!st(L)&&L.nodeType?at.appendChild(L):st(L)&&D(at,L)),q?at:V.appendChild(at)}),N=(A,B,M)=>k(t.createElement(A),A,B,M,!0),T=Yo.encodeAllRaw,F=(A,B)=>_(A,M=>{const L=R(M);return B&&U(he(L),q=>{Ae(q)&&q.dom.length===0?Ut(q):Me(L,q)}),Ut(L),L.dom}),j=(A,B,M)=>{_(A,L=>{if(nt(L)){const q=R(L),V=B.split(" ");U(V,at=>{W(M)?(M?Rr:Ps)(q,at):((lt,gt)=>{const Mt=Bs(lt)?lt.dom.classList.toggle(gt):((It,qe)=>_t(jg(It),qe)?$g(It,qe):Hg(It,qe))(lt,gt);Vg(lt)})(q,at)})}})},z=(A,B,M)=>_(B,L=>{var q;const V=Vt(B)?A.cloneNode(!0):A;return M&&lc(L_(L.childNodes),at=>{V.appendChild(at)}),(q=L.parentNode)===null||q===void 0||q.replaceChild(V,L),L}),J=()=>t.createRange(),ot=(A,B,M,L)=>{if(Vt(A)){let q=A.length;const V=[];for(;q--;)V[q]=ot(A[q],B,M,L);return V}return!e.collect||A!==t&&A!==o||i.push([A,B,M,L]),c.bind(A,B,M,L||K)},rt=(A,B,M)=>{if(Vt(A)){let L=A.length;const q=[];for(;L--;)q[L]=rt(A[L],B,M);return q}if(i.length>0&&(A===t||A===o)){let L=i.length;for(;L--;){const[q,V,at]=i[L];A!==q||B&&B!==V||M&&M!==at||c.unbind(q,V,at)}}return c.unbind(A,B,M)},it=A=>{if(A&&Jn(A)){const B=A.getAttribute("data-mce-contenteditable");return B&&B!=="inherit"?B:A.contentEditable!=="inherit"?A.contentEditable:null}return null},K={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:d,schema:l,events:c,isBlock:A=>st(A)?pt(u,A):nt(A)&&(pt(u,A.nodeName)||Wo(l,A)),root:null,clone:(A,B)=>A.cloneNode(B),getRoot:b,getViewPort:A=>{const B=dp(A);return{x:B.x,y:B.y,w:B.width,h:B.height}},getRect:A=>{const B=m(A),M=v(B),L=E(B);return{x:M.x,y:M.y,w:L.w,h:L.h}},getSize:E,getParent:(A,B,M)=>{const L=x(A,B,M,!1);return L&&L.length>0?L[0]:null},getParents:x,get:m,getNext:(A,B)=>S(A,B,"nextSibling"),getPrev:(A,B)=>S(A,B,"previousSibling"),select:(A,B)=>{var M,L;const q=(L=(M=m(B))!==null&&M!==void 0?M:e.root_element)!==null&&L!==void 0?L:t;return Nt(q.querySelectorAll)?ze(q.querySelectorAll(A)):[]},is:w,add:k,create:N,createHTML:(A,B,M="")=>{let L="<"+A;for(const q in B)kr(B,q)&&(L+=" "+q+'="'+T(B[q])+'"');return Ts(M)&&pt(l.getVoidElements(),A)?L+" />":L+">"+M+"</"+A+">"},createFragment:A=>{const B=t.createElement("div"),M=t.createDocumentFragment();let L;for(M.appendChild(B),A&&(B.innerHTML=A);L=B.firstChild;)M.appendChild(L);return M.removeChild(B),M},remove:F,setStyle:(A,B,M)=>{_(A,L=>{const q=R(L);Yp(q,B,M),e.update_styles&&Kp(d,q)})},getStyle:y,setStyles:(A,B)=>{_(A,M=>{const L=R(M);Dt(B,(q,V)=>{Yp(L,V,q)}),e.update_styles&&Kp(d,L)})},removeAllAttribs:A=>_(A,B=>{const M=B.attributes;for(let L=M.length-1;L>=0;L--)B.removeAttributeNode(M.item(L))}),setAttrib:g,setAttribs:O,getAttrib:f,getPos:v,parseStyle:A=>d.parse(A),serializeStyle:(A,B)=>d.serialize(A,B),addStyle:A=>{if(K!==Pt.DOM&&t===document){if(n[A])return;n[A]=!0}let B=t.getElementById("mceDefaultStyles");if(!B){B=t.createElement("style"),B.id="mceDefaultStyles",B.type="text/css";const M=t.head;M.firstChild?M.insertBefore(B,M.firstChild):M.appendChild(B)}B.styleSheet?B.styleSheet.cssText+=A:B.appendChild(t.createTextNode(A))},loadCSS:A=>{A||(A=""),U(A.split(","),B=>{r[B]=!0,a.load(B).catch(vt)})},addClass:(A,B)=>{j(A,B,!0)},removeClass:(A,B)=>{j(A,B,!1)},hasClass:(A,B)=>{const M=p(A),L=B.split(" ");return W(M)&&Kn(L,q=>Rd(M,q))},toggleClass:j,show:A=>{_(A,B=>np(R(B),"display"))},hide:A=>{_(A,B=>tp(R(B),"display","none"))},isHidden:A=>{const B=p(A);return W(B)&&Sr(gi(B,"display"),"none")},uniqueId:A=>(A||"mce_")+s++,setHTML:D,getOuterHTML:A=>{const B=p(A);return W(B)?nt(B.dom)?B.dom.outerHTML:(M=>{const L=ne("div"),q=R(M.dom.cloneNode(!0));return Gt(L,q),rp(L)})(B):""},setOuterHTML:(A,B)=>{_(A,M=>{nt(M)&&(M.outerHTML=B)})},decode:Yo.decode,encode:T,insertAfter:(A,B)=>{const M=m(B);return _(A,L=>{const q=M?.parentNode,V=M?.nextSibling;return q&&(V?q.insertBefore(L,V):q.appendChild(L)),L})},replace:z,rename:(A,B)=>{if(A.nodeName!==B.toUpperCase()){const M=N(B);return lc(h(A),L=>{g(M,L.nodeName,f(A,L.nodeName))}),z(M,A,!0),M}return A},findCommonAncestor:(A,B)=>{let M=A;for(;M;){let L=B;for(;L&&M!==L;)L=L.parentNode;if(M===L)break;M=M.parentNode}return!M&&A.ownerDocument?A.ownerDocument.documentElement:M},run:_,getAttribs:h,isEmpty:(A,B,M)=>ti(B)?to(l,A,{...M,isContent:q=>{const V=q.nodeName.toLowerCase();return!!B[V]}}):to(l,A,M),createRng:J,nodeIndex:Mr,split:(A,B,M)=>{let L,q,V=J();if(A&&B&&A.parentNode&&B.parentNode){const at=A.parentNode;return V.setStart(at,Mr(A)),V.setEnd(B.parentNode,Mr(B)),L=V.extractContents(),V=J(),V.setStart(B.parentNode,Mr(B)+1),V.setEnd(at,Mr(A)+1),q=V.extractContents(),at.insertBefore(Qd(K,L,l),A),M?at.insertBefore(M,A):at.insertBefore(B,A),at.insertBefore(Qd(K,q,l),A),F(A),M||B}},bind:ot,unbind:rt,fire:(A,B,M)=>c.dispatch(A,B,M),dispatch:(A,B,M)=>c.dispatch(A,B,M),getContentEditable:it,getContentEditableParent:A=>{const B=b();let M=null;for(let L=A;L&&L!==B&&(M=it(L),M===null);L=L.parentNode);return M},isEditable:A=>{if(W(A)){const B=nt(A)?A:A.parentElement;return W(B)&&Jn(B)&&jo(R(B))}return!1},destroy:()=>{if(i.length>0){let A=i.length;for(;A--;){const[B,M,L]=i[A];c.unbind(B,M,L)}}Dt(r,(A,B)=>{a.unload(B),delete r[B]})},isChildOf:(A,B)=>A===B||B.contains(A),dumpRng:A=>"startContainer: "+A.startContainer.nodeName+", startOffset: "+A.startOffset+", endContainer: "+A.endContainer.nodeName+", endOffset: "+A.endOffset},tt=((A,B,M)=>{const L=B.keep_values,q={set:(at,lt,gt)=>{const Mt=R(at);Nt(B.url_converter)&&W(lt)&&(lt=B.url_converter.call(B.url_converter_scope||M(),String(lt),gt,at)),qs(Mt,"data-mce-"+gt,lt),qs(Mt,gt,lt)},get:(at,lt)=>{const gt=R(at);return He(gt,"data-mce-"+lt)||He(gt,lt)}},V={style:{set:(at,lt)=>{const gt=R(at);L&&qs(gt,dc,lt),ce(gt,"style"),st(lt)&&fi(gt,A.parse(lt))},get:at=>{const lt=R(at),gt=He(lt,dc)||He(lt,"style");return A.serialize(A.parse(gt),wt(lt))}}};return L&&(V.href=V.src=q),V})(d,e,Y(K));return K};Pt.DOM=Pt(document),Pt.nodeIndex=Mr;const I_=Pt.DOM;class no{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=I_;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=$._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return this.states[e]===2}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),n.states[e]===void 0&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,d)=>{Ft(n.scriptLoadedCallbacks,d).each(c=>{U(c,u=>u[l](d))}),delete n.scriptLoadedCallbacks[d]},r=l=>{const d=ft(l,c=>c.status==="rejected");return d.length>0?Promise.reject(We(d,({reason:c})=>Vt(c)?c:[c])):Promise.resolve()},s=l=>Promise.allSettled(Ct(l,d=>n.states[d]===2?(o("resolve",d),Promise.resolve()):n.states[d]===3?(o("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,o("resolve",d);const c=n.queue;return c.length>0?(n.queue=[],s(c).then(r)):Promise.resolve()},()=>(n.states[d]=3,o("reject",d),Promise.reject(d)))))),a=l=>(n.loading=!0,s(l).then(d=>{n.loading=!1;const c=n.queueLoadedCallbacks.shift();return C.from(c).each(ws),r(d)})),i=ug(e);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,d)})}):a(i)}}no.ScriptLoader=new no;const Ws={},cc=re("en"),Gp=()=>Ft(Ws,cc.get()),yn={getData:()=>Ss(Ws,t=>({...t})),setCode:t=>{t&&cc.set(t)},getCode:()=>cc.get(),add:(t,e)=>{let n=Ws[t];n||(Ws[t]=n={});const o=Ct(Le(e),r=>r.toLowerCase());Dt(e,(r,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const d=i.indexOf(l);return d!==-1&&i.indexOf(l,d+1)>d})(o,a)?(pt(e,a)||(n[a]=r),n[s]=r):n[a]=r})},translate:t=>{const e=Gp().getOr({}),n=i=>Nt(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>i===""||i==null,r=i=>{const l=n(i);return pt(e,l)?n(e[l]):Ft(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(o(t))return"";if(ie(a=t)&&pt(a,"raw"))return n(t.raw);var a;if((i=>Vt(i)&&i.length>1)(t)){const i=t.slice(1);return s(r(t[0]).replace(/\{([0-9]+)\}/g,(l,d)=>pt(i,d)?n(i[d]):l))}return s(r(t))},isRtl:()=>Gp().bind(t=>Ft(t,"_dir")).exists(t=>t==="rtl"),hasCode:t=>pt(Ws,t)},ke=()=>{const t=[],e={},n={},o=[],r=(l,d)=>{const c=ft(o,u=>u.name===l&&u.state===d);U(c,u=>u.resolve())},s=l=>pt(e,l),a=(l,d)=>{const c=yn.getCode();!c||d&&(","+(d||"")+",").indexOf(","+c+",")===-1||no.ScriptLoader.add(e[l]+"/langs/"+c+".js")},i=(l,d="added")=>d==="added"&&(c=>pt(n,c))(l)||d==="loaded"&&s(l)?Promise.resolve():new Promise(c=>{o.push({name:l,state:d,resolve:c})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,d)=>{ke.languageLoad!==!1&&(s(l)?a(l,d):i(l,"loaded").then(()=>a(l,d)))},add:(l,d)=>(t.push(d),n[l]={instance:d},r(l,"added"),d),remove:l=>{delete e[l],delete n[l]},createUrl:(l,d)=>st(d)?st(l)?{prefix:"",resource:d,suffix:""}:{prefix:l.prefix,resource:d,suffix:l.suffix}:d,load:(l,d)=>{if(e[l])return Promise.resolve();let c=st(d)?d:d.prefix+d.resource+d.suffix;c.indexOf("/")!==0&&c.indexOf("://")===-1&&(c=ke.baseURL+"/"+c),e[l]=c.substring(0,c.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():no.ScriptLoader.add(c).then(u)},waitFor:i}};ke.languageLoad=!0,ke.baseURL="",ke.PluginManager=ke(),ke.ThemeManager=ke(),ke.ModelManager=ke();const _i=(t,e)=>{let n=null;return{cancel:()=>{Ee(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Ee(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},uc=(t,e)=>{let n=null;const o=()=>{Ee(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},Ks=Y("mce-annotation"),Xo=Y("data-mce-annotation"),Ir=Y("data-mce-annotation-uid"),Ys=Y("data-mce-annotation-active"),Gs=Y("data-mce-annotation-classes"),Xs=Y("data-mce-annotation-attrs"),Xp=t=>e=>kt(e,t),Zp=(t,e)=>{const n=t.selection.getRng(),o=R(n.startContainer),r=R(t.getBody()),s=e.fold(()=>"."+Ks(),i=>`[${Xo()}="${i}"]`),a=Tr(o,n.startOffset).getOr(o);return Br(a,s,Xp(r)).bind(i=>Xn(i,`${Ir()}`).bind(l=>Xn(i,`${Xo()}`).map(d=>{const c=Jp(t,l);return{uid:l,name:d,elements:c}})))},Qp=(t,e)=>Os(t,"data-mce-bogus")||((n,o,r)=>Is(n,'[data-mce-bogus="all"]',r).isSome())(t,0,Xp(e)),Jp=(t,e)=>{const n=R(t.getBody()),o=be(n,`[${Ir()}="${e}"]`);return ft(o,r=>!Qp(r,n))},th=(t,e)=>{const n=R(t.getBody()),o=be(n,`[${Xo()}="${e}"]`),r={};return U(o,s=>{if(!Qp(s,n)){const a=He(s,Ir()),i=Ft(r,a).getOr([]);r[a]=i.concat([s])}}),r},eh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let nh=0;const Zs=t=>{const e=new Date().getTime(),n=Math.floor(1e9*eh());return nh++,t+"_"+n+nh+String(e)},oh=(t,e)=>R(t.dom.cloneNode(e)),Zo=t=>oh(t,!1),rh=t=>oh(t,!0),sh=(t,e,n=jt)=>{const o=new oe(t,e),r=s=>{let a;do a=o[s]();while(a&&!H(a)&&!n(a));return C.from(a).filter(H)};return{current:()=>C.from(o.current()).filter(H),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},Qo=(t,e)=>{const n=e||(r=>t.isBlock(r)||$t(r)||Lt(r)),o=(r,s,a,i)=>{if(H(r)){const l=i(r,s,r.data);if(l!==-1)return C.some({container:r,offset:l})}return a().bind(l=>o(l.container,l.offset,a,i))};return{backwards:(r,s,a,i)=>{const l=sh(r,i??t.getRoot(),n);return o(r,s,()=>l.prev().map(d=>({container:d,offset:d.length})),a).getOrNull()},forwards:(r,s,a,i)=>{const l=sh(r,i??t.getRoot(),n);return o(r,s,()=>l.next().map(d=>({container:d,offset:0})),a).getOrNull()}}},mc=((t,e)=>{const n=o=>t(o)?C.from(o.dom.nodeValue):C.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(Ae),Qs=t=>mc.get(t),ah=(t,e)=>mc.set(t,e),Fr=t=>{let e;return n=>(e=e||bd(t,Wt),pt(e,wt(n)))},Jo=t=>je(t)&&wt(t)==="br",ih=Fr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),fc=Fr(["ul","ol","dl"]),Ur=Fr(["li","dd","dt"]),F_=Fr(["thead","tbody","tfoot"]),Js=Fr(["td","th"]),Si=Fr(["pre","script","textarea","style"]),zr=()=>{const t=ne("br");return de(t,"data-mce-bogus","1"),t},wo=t=>{Pr(t),Gt(t,zr())},se=Us,Ni=zd,$e=t=>t.replace(/\uFEFF/g,""),U_=nt,jr=H,Hr=t=>(jr(t)&&(t=t.parentNode),U_(t)&&t.hasAttribute("data-mce-caret")),Eo=t=>jr(t)&&Ni(t.data),Ke=t=>Hr(t)||Eo(t),lh=t=>t.firstChild!==t.lastChild||!$t(t.firstChild),gc=t=>{const e=t.container();return!!H(e)&&(e.data.charAt(t.offset())===se||t.isAtStart()&&Eo(e.previousSibling))},pc=t=>{const e=t.container();return!!H(e)&&(e.data.charAt(t.offset()-1)===se||t.isAtEnd()&&Eo(e.nextSibling))},Ri=t=>jr(t)&&t.data[0]===se,Ai=t=>jr(t)&&t.data[t.data.length-1]===se,hc=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Vo(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,dh=t=>Hr(t.startContainer),$r=Math.round,tr=t=>t?{left:$r(t.left),top:$r(t.top),bottom:$r(t.bottom),right:$r(t.right),width:$r(t.width),height:$r(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ch=(t,e)=>(t=tr(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),uh=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,ta=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&uh(e.top-t.bottom,t,e)},ea=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&uh(e.bottom-t.top,t,e),mh=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},Ti=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},xo=(t,e)=>{if(nt(t)&&t.hasChildNodes()){const n=t.childNodes,o=((r,s,a)=>Math.min(Math.max(r,0),a))(e,0,n.length-1);return n[o]}return t},z_=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),fh=t=>st(t)&&t.charCodeAt(0)>=768&&z_.test(t),gh=ln,j_=Lt,H_=$t,$_=H,V_=bn(["script","style","textarea"]),ph=bn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),q_=bn(["table"]),W_=Ke,Cn=t=>!W_(t)&&($_(t)?!V_(t.parentNode):ph(t)||H_(t)||q_(t)||bc(t)),bc=t=>!(e=>nt(e)&&e.getAttribute("unselectable")==="true")(t)&&j_(t),hh=(t,e)=>Cn(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(bc(r))return!1;if(gh(r))return!0}return!0})(t,e),bh=nt,K_=Cn,vh=vi("display","block table"),Y_=vi("float","left right"),na=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(bh,K_,Cs(Y_)),G_=Cs(vi("white-space","pre pre-line pre-wrap")),oa=H,vc=$t,yh=Pt.nodeIndex,Oi=(t,e)=>e<0&&nt(t)&&t.hasChildNodes()?void 0:xo(t,e),yc=t=>t?t.createRange():Pt.DOM.createRng(),Cc=t=>st(t)&&/[\r\n\t ]/.test(t),Ch=t=>!!t.setStart&&!!t.setEnd,wc=t=>{const e=t.startContainer,n=t.startOffset;if(Cc(t.toString())&&G_(e.parentNode)&&H(e)){const o=e.data;if(Cc(o[n-1])||Cc(o[n+1]))return!0}return!1},wh=t=>t.left===0&&t.right===0&&t.top===0&&t.bottom===0,ko=t=>{var e;let n;const o=t.getClientRects();return n=o.length>0?tr(o[0]):tr(t.getBoundingClientRect()),!Ch(t)&&vc(t)&&wh(n)?(r=>{const s=r.ownerDocument,a=yc(s),i=s.createTextNode(Jt),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const d=tr(a.getBoundingClientRect());return l.removeChild(i),d})(t):wh(n)&&Ch(t)&&(e=(r=>{const s=r.startContainer,a=r.endContainer,i=r.startOffset,l=r.endOffset;if(s===a&&H(a)&&i===0&&l===1){const d=r.cloneRange();return d.setEndAfter(a),ko(d)}return null})(t))!==null&&e!==void 0?e:n},er=(t,e)=>{const n=ch(t,e);return n.width=1,n.right=n.left+1,n},I=(t,e,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=c=>{var u,m;c.height!==0&&(s.length>0&&(u=c,m=s[s.length-1],u.left===m.left&&u.top===m.top&&u.bottom===m.bottom&&u.right===m.right)||s.push(c))},i=(c,u)=>{const m=yc(c.ownerDocument);if(u<c.data.length){if(fh(c.data[u]))return;if(fh(c.data[u-1])&&(m.setStart(c,u),m.setEnd(c,u+1),!wc(m)))return void a(er(ko(m),!1))}u>0&&(m.setStart(c,u-1),m.setEnd(c,u),wc(m)||a(er(ko(m),!1))),u<c.data.length&&(m.setStart(c,u),m.setEnd(c,u+1),wc(m)||a(er(ko(m),!0)))},l=r.container(),d=r.offset();if(oa(l))return i(l,d),s;if(bh(l))if(r.isAtEnd()){const c=Oi(l,d);oa(c)&&i(c,c.data.length),na(c)&&!vc(c)&&a(er(ko(c),!1))}else{const c=Oi(l,d);if(oa(c)&&i(c,0),na(c)&&r.isAtEnd())return a(er(ko(c),!1)),s;const u=Oi(r.container(),r.offset()-1);na(u)&&!vc(u)&&(vh(u)||vh(c)||!na(c))&&a(er(ko(u),!1)),na(c)&&a(er(ko(c),!0))}return s})(I(t,e))),n);return{container:Y(t),offset:Y(e),toRange:()=>{const r=yc(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(oa(t),e===0),isAtEnd:()=>oa(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>Oi(t,r?e-1:e)}};I.fromRangeStart=t=>I(t.startContainer,t.startOffset),I.fromRangeEnd=t=>I(t.endContainer,t.endOffset),I.after=t=>I(t.parentNode,yh(t)+1),I.before=t=>I(t.parentNode,yh(t)),I.isAbove=(t,e)=>pe(Re(e.getClientRects()),go(t.getClientRects()),ta).getOr(!1),I.isBelow=(t,e)=>pe(go(e.getClientRects()),Re(t.getClientRects()),ea).getOr(!1),I.isAtStart=t=>!!t&&t.isAtStart(),I.isAtEnd=t=>!!t&&t.isAtEnd(),I.isTextPosition=t=>!!t&&H(t.container()),I.isElementPosition=t=>!I.isTextPosition(t);const Bi=(t,e)=>{H(e)&&e.data.length===0&&t.remove(e)},Ec=(t,e,n)=>{Hd(n)?((o,r,s)=>{const a=C.from(s.firstChild),i=C.from(s.lastChild);r.insertNode(s),a.each(l=>Bi(o,l.previousSibling)),i.each(l=>Bi(o,l.nextSibling))})(t,e,n):((o,r,s)=>{r.insertNode(s),Bi(o,s.previousSibling),Bi(o,s.nextSibling)})(t,e,n)},wn=H,Eh=Vo,xh=Pt.nodeIndex,kh=t=>{const e=t.parentNode;return Eh(e)?kh(e):e},xc=t=>t?ri(t.childNodes,(e,n)=>(Eh(n)&&n.nodeName!=="BR"?e=e.concat(xc(n)):e.push(n),e),[]):[],_h=t=>e=>t===e,Sh=t=>(wn(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=xc(kh(e)),o=fg(n,_h(e),e),n=n.slice(0,o+1);const r=ri(n,(s,a,i)=>(wn(a)&&wn(n[i-1])&&s++,s),0);return n=Rs(n,bn([e.nodeName])),o=fg(n,_h(e),e),o-r})(t)+"]",Nh=(t,e)=>{let n,o=[],r=e.container(),s=e.offset();if(wn(r))n=((i,l)=>{let d=i;for(;(d=d.previousSibling)&&wn(d);)l+=d.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(Sh(r));let a=((i,l,d)=>{const c=[];for(let u=l.parentNode;u&&u!==i;u=u.parentNode)c.push(u);return c})(t,r);return a=Rs(a,Cs(Vo)),o=o.concat(wd(a,i=>Sh(i))),o.reverse().join("/")+","+n},Rh=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=ri(o,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?(l[1]==="text()"&&(l[1]="#text"),((d,c,u)=>{let m=xc(d);return m=Rs(m,(p,f)=>!wn(p)||!wn(m[f-1])),m=Rs(m,bn([c])),m[u]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!wn(s)&&s.parentNode){let a;return a=r==="after"?xh(s)+1:xh(s),I(s.parentNode,a)}return((a,i)=>{let l=a,d=0;for(;wn(l);){const c=l.data.length;if(i>=d&&i<=d+c){a=l,i-=d;break}if(!wn(l.nextSibling)){a=l,i=c;break}d+=c,l=l.nextSibling}return wn(a)&&i>a.data.length&&(i=a.data.length),I(a,i)})(s,parseInt(r,10))},Pi=Lt,Ah=(t,e,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=t.getRoot();if(H(s))i.push(n?((d,c,u)=>{let m=d(c.data.slice(0,u)).length;for(let p=c.previousSibling;p&&H(p);p=p.previousSibling)m+=d(p.data).length;return m})(e,s,a):a);else{let d=0;const c=s.childNodes;a>=c.length&&c.length&&(d=1,a=Math.max(0,c.length-1)),i.push(t.nodeIndex(c[a],n)+d)}for(let d=s;d&&d!==l;d=d.parentNode)i.push(t.nodeIndex(d,n));return i},kc=(t,e,n)=>{let o=0;return $.each(t.select(e),r=>r.getAttribute("data-mce-bogus")==="all"?void 0:r!==n&&void o++),o},Th=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(nt(n)&&n.nodeName==="TR"){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},Oh=t=>(Th(t,!0),Th(t,!1),t),Bh=(t,e)=>{if(nt(t)&&(t=xo(t,e),Pi(t)))return t;if(Ke(t)){H(t)&&Hr(t)&&(t=t.parentNode);let n=t.previousSibling;if(Pi(n)||(n=t.nextSibling,Pi(n)))return n}},Ph=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if(o.nodeName==="IMG"||Pi(o)){const a=o.nodeName;return{name:a,index:kc(n.dom,a,o)}}const s=(a=>Bh(a.startContainer,a.startOffset)||Bh(a.endContainer,a.endOffset))(r);if(s){const a=s.tagName;return{name:a,index:kc(n.dom,a,s)}}return((a,i,l,d)=>{const c=i.dom,u=Ah(c,a,l,d,!0),m=i.isForward(),p=dh(d)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:u,forward:m,...p}:{start:u,end:Ah(c,a,l,d,!1),forward:m,...p}})(t,n,e,r)},Dh=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},Lh=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if(i==="IMG")return{name:i,index:kc(n,i,a)};const d=Oh(o.cloneRange());if(!s){d.collapse(!1);const u=Dh(n,r+"_end",e);Ec(n,d,u)}o=Oh(o),o.collapse(!0);const c=Dh(n,r+"_start",e);return Ec(n,o,c),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},_c=et(Ph,xe,!0),Mh=t=>{const e=s=>s(t),n=Y(t),o=()=>r,r={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:Wt,isError:jt,map:s=>Te.value(s(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(t)},toOptional:()=>C.some(t)};return r},Ih=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(o,r)=>o(t),isValue:jt,isError:Wt,map:e,mapError:o=>Te.error(o(t)),bind:e,exists:jt,forall:Wt,getOr:xe,or:xe,getOrThunk:pd,orThunk:pd,getOrDie:rg(String(t)),each:vt,toOptional:C.none};return n},Te={value:Mh,error:Ih,fromOption:(t,e)=>t.fold(()=>Ih(e),Mh)},Dn=t=>{if(!Vt(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const e=[],n={};return U(t,(o,r)=>{const s=Le(o);if(s.length!==1)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(n[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Vt(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const d=l.length;if(d!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+d);return{fold:(...c)=>{if(c.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+c.length);return c[r].apply(null,l)},match:c=>{const u=Le(c);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+`
Actual: `+u.join(","));if(!Kn(e,m=>_t(u,m)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+`
Required: `+e.join(", "));return c[a].apply(null,l)},log:c=>{console.log(c,{constructors:e,constructor:a,params:l})}}}}),n};Dn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const X_=t=>t.type==="inline-command"||t.type==="inline-format",Z_=t=>t.type==="block-command"||t.type==="block-format",Q_=t=>{var e;const n=r=>Te.error({message:r,pattern:t}),o=(r,s,a)=>{if(t.format!==void 0){let i;if(Vt(t.format)){if(!Kn(t.format,st))return n(r+" pattern has non-string items in the `format` array");i=t.format}else{if(!st(t.format))return n(r+" pattern has non-string `format` parameter");i=[t.format]}return Te.value(s(i))}return t.cmd!==void 0?st(t.cmd)?Te.value(a(t.cmd,t.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!ie(t))return n("Raw pattern is not an object");if(!st(t.start))return n("Raw pattern is missing `start` parameter");if(t.end!==void 0){if(!st(t.end))return n("Inline pattern has non-string `end` parameter");if(t.start.length===0&&t.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=t.start,s=t.end;return s.length===0&&(s=r,r=""),o("Inline",a=>({type:"inline-format",start:r,end:s,format:a}),(a,i)=>({type:"inline-command",start:r,end:s,cmd:a,value:i}))}if(t.replacement!==void 0)return st(t.replacement)?t.start.length===0?n("Replacement pattern has empty `start` parameter"):Te.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const r=(e=t.trigger)!==null&&e!==void 0?e:"space";return t.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",s=>({type:"block-format",start:t.start,format:s[0],trigger:r}),(s,a)=>({type:"block-command",start:t.start,cmd:s,value:a,trigger:r}))}},Fh=t=>ft(t,Z_),Uh=t=>ft(t,X_),Sc=(t,e)=>({...t,blockPatterns:ft(t.blockPatterns,n=>((o,r)=>(o.type==="block-command"||o.type==="block-format")&&o.trigger===r)(n,e))}),zh=t=>{const e=(n=>{const o=[],r=[];return U(n,s=>{s.fold(a=>{o.push(a)},a=>{r.push(a)})}),{errors:o,values:r}})(Ct(t,Q_));return U(e.errors,n=>console.error(n.message,n.pattern)),e.values},jh=(t,e,n)=>{t.dispatch(e,n)},Hh=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},$h=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},Vh=(t,e)=>t.dispatch("SetContent",e),qh=(t,e)=>t.dispatch("GetContent",e),Nc=(t,e)=>{t.dispatch("AutocompleterUpdateActiveRange",e)},Wh=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),Rc=Rn().deviceType,J_=Rc.isTouch(),tS=Pt.DOM,Kh=t=>Ja(t,RegExp),Z=t=>e=>e.options.get(t),Di=t=>st(t)||ie(t),Yh=(t,e="")=>n=>{const o=st(n);if(o){if(n.indexOf("=")!==-1){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return De(a,(i,l)=>{const d=l.split("="),c=d[0],u=d.length>1?d[1]:c;return i[_r(c)]=_r(u),i},{})})(n);return{value:Ft(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},eS=Z("iframe_attrs"),nS=Z("doctype"),Gh=Z("document_base_url"),oS=Z("body_id"),rS=Z("body_class"),Xh=Z("content_security_policy"),sS=Z("br_in_pre"),ye=Z("forced_root_block"),ra=Z("forced_root_block_attrs"),aS=Z("newline_behavior"),iS=Z("br_newline_selector"),lS=Z("no_newline_selector"),dS=Z("keep_styles"),cS=Z("end_container_on_empty_block"),Zh=Z("automatic_uploads"),Qh=Z("images_reuse_filename"),uS=Z("images_replace_blob_uris"),Jh=Z("icons"),mS=Z("icons_url"),fS=Z("images_upload_url"),gS=Z("images_upload_base_path"),pS=Z("images_upload_credentials"),hS=Z("images_upload_handler"),bS=Z("content_css_cors"),Ac=Z("referrer_policy"),tb=Z("language"),vS=Z("language_url"),eb=Z("indent_use_margin"),yS=Z("indentation"),CS=Z("content_css"),wS=Z("content_style"),nb=Z("font_css"),ES=Z("directionality"),xS=Z("inline_boundaries_selector"),ob=Z("object_resizing"),kS=Z("resize_img_proportional"),_S=Z("placeholder"),rb=Z("event_root"),SS=Z("service_message"),Vr=Z("theme"),NS=Z("theme_url"),Tc=Z("model"),RS=Z("model_url"),sa=Z("inline_boundaries"),AS=Z("formats"),TS=Z("preview_styles"),OS=Z("format_empty_lines"),BS=Z("format_noneditable_selector"),PS=Z("custom_ui_selector"),Oc=Z("inline"),DS=Z("hidden_input"),LS=Z("submit_patch"),MS=Z("add_form_submit_trigger"),IS=Z("add_unload_trigger"),FS=Z("custom_undo_redo_levels"),US=Z("disable_nodechange"),sb=Z("readonly"),zS=Z("editable_root"),ab=Z("content_css_cors"),Li=Z("plugins"),jS=Z("external_plugins"),HS=Z("block_unsupported_drop"),$S=Z("visual"),VS=Z("visual_table_class"),ib=Z("visual_anchor_class"),lb=Z("iframe_aria_text"),qS=Z("setup"),WS=Z("init_instance_callback"),KS=Z("urlconverter_callback"),YS=Z("auto_focus"),GS=Z("browser_spellcheck"),XS=Z("protect"),ZS=Z("paste_block_drop"),Mi=Z("paste_data_images"),QS=Z("paste_preprocess"),JS=Z("paste_postprocess"),tN=Z("newdocument_content"),eN=Z("paste_webkit_styles"),nN=Z("paste_remove_styles_if_webkit"),oN=Z("paste_merge_formats"),rN=Z("smart_paste"),sN=Z("paste_as_text"),aN=Z("paste_tab_spaces"),iN=Z("allow_html_data_urls"),lN=Z("text_patterns"),dN=Z("text_patterns_lookup"),db=Z("noneditable_class"),cN=Z("editable_class"),uN=Z("noneditable_regexp"),mN=Z("preserve_cdata"),fN=Z("highlight_on_focus"),cb=Z("xss_sanitization"),gN=Z("init_content_sync"),ub=t=>$.explode(t.options.get("images_file_types")),pN=Z("table_tab_navigation"),hN=Z("details_initial_state"),bN=Z("details_serialized_state"),mb=Z("sandbox_iframes"),Bc=t=>t.options.get("sandbox_iframes_exclusions"),vN=Z("convert_unsafe_embeds"),yN=Z("license_key"),CN=Z("api_key"),Ii=Z("disabled"),wN=nt,fb=H,gb=t=>{const e=t.parentNode;e&&e.removeChild(t)},pb=t=>{const e=$e(t);return{count:t.length-e.length,text:e}},hb=t=>{let e;for(;(e=t.data.lastIndexOf(se))!==-1;)t.deleteData(e,1)},bb=(t,e)=>(nr(t),e),EN=(t,e)=>I.isTextPosition(e)?((n,o)=>fb(n)&&o.container()===n?((r,s)=>{const a=pb(r.data.substr(0,s.offset())),i=pb(r.data.substr(s.offset()));return(a.text+i.text).length>0?(hb(r),I(r,s.offset()-a.count)):s})(n,o):bb(n,o))(t,e):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,d)=>{const c=sg(l,d);return c===-1?C.none():C.some(c)})(ze(a.childNodes),r).map(l=>l<s.offset()?I(a,s.offset()-1):s).getOr(s);return nr(r),i})(n,o):bb(n,o))(t,e),nr=t=>{wN(t)&&Ke(t)&&(lh(t)?t.removeAttribute("data-mce-caret"):gb(t)),fb(t)&&(hb(t),t.data.length===0&&gb(t))},xN=Lt,kN=Pn,_N=yi,vb=(t,e,n)=>{const o=ch(e.getBoundingClientRect(),n);let r,s;if(t.tagName==="BODY"){const i=t.ownerDocument.documentElement;r=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();r=t.scrollLeft-i.left,s=t.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},SN=(t,e,n,o)=>{const r=eo();let s,a;const i=ye(t),l=t.dom,d=()=>{(c=>{var u,m;const p=be(R(c),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<p.length;f++){const h=p[f].dom;let g=h.previousSibling;if(Ai(g)){const b=g.data;b.length===1?(u=g.parentNode)===null||u===void 0||u.removeChild(g):g.deleteData(b.length-1,1)}g=h.nextSibling,Ri(g)&&(g.data.length===1?(m=g.parentNode)===null||m===void 0||m.removeChild(g):g.deleteData(0,1))}})(e),a&&(nr(a),a=null),r.on(c=>{l.remove(c.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(c,u)=>{let m;if(d(),_N(u))return null;if(!n(u))return a=((p,f)=>{var h;const g=((h=p.ownerDocument)!==null&&h!==void 0?h:document).createTextNode(se),b=p.parentNode;if(f){const v=p.previousSibling;if(jr(v)){if(Ke(v))return v;if(Ai(v))return v.splitText(v.data.length-1)}b?.insertBefore(g,p)}else{const v=p.nextSibling;if(jr(v)){if(Ke(v))return v;if(Ri(v))return v.splitText(1),v}p.nextSibling?b?.insertBefore(g,p.nextSibling):b?.appendChild(g)}return g})(u,c),m=u.ownerDocument.createRange(),aa(a.nextSibling)?(m.setStart(a,0),m.setEnd(a,0)):(m.setStart(a,1),m.setEnd(a,1)),m;{const p=((g,b,v)=>{var y;const E=((y=b.ownerDocument)!==null&&y!==void 0?y:document).createElement(g);E.setAttribute("data-mce-caret",v?"before":"after"),E.setAttribute("data-mce-bogus","all"),E.appendChild(zr().dom);const w=b.parentNode;return v?w?.insertBefore(E,b):b.nextSibling?w?.insertBefore(E,b.nextSibling):w?.appendChild(E),E})(i,u,c),f=vb(e,u,c);l.setStyle(p,"top",f.top),l.setStyle(p,"caret-color","transparent"),a=p;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,{...f}),l.add(e,h),r.set({caret:h,element:u,before:c}),c&&l.addClass(h,"mce-visual-caret-before"),s=setInterval(()=>{r.on(g=>{o()?l.toggleClass(g.caret,"mce-visual-caret-hidden"):l.addClass(g.caret,"mce-visual-caret-hidden")})},500),m=u.ownerDocument.createRange(),m.setStart(p,0),m.setEnd(p,0)}return m},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(c=>{const u=vb(e,c.element,c.before);l.setStyles(c.caret,{...u})})},destroy:()=>clearInterval(s)}},yb=()=>Et.browser.isFirefox(),aa=t=>xN(t)||kN(t),ia=t=>(aa(t)||Bn(t)&&yb())&&ci(R(t)).exists(jo),NN=ln,Pc=Lt,RN=Pn,Cb=vi("display","block table table-cell table-row table-caption list-item"),wb=Ke,Eb=Hr,AN=nt,TN=H,ON=Cn,qr=t=>t>0,or=t=>t<0,Fi=(t,e)=>{let n;for(;n=t(e);)if(!Eb(n))return n;return null},la=(t,e,n,o,r)=>{const s=new oe(t,o),a=Pc(t)||Eb(t);let i;if(or(e)){if(a&&(i=Fi(s.prev.bind(s),!0),n(i)))return i;for(;i=Fi(s.prev.bind(s),r);)if(n(i))return i}if(qr(e)){if(a&&(i=Fi(s.next.bind(s),!0),n(i)))return i;for(;i=Fi(s.next.bind(s),r);)if(n(i))return i}return null},_o=(t,e)=>{for(;t&&t!==e;){if(Cb(t))return t;t=t.parentNode}return null},Ln=(t,e,n)=>_o(t.container(),n)===_o(e.container(),n),Dc=(t,e)=>{if(!e)return C.none();const n=e.container(),o=e.offset();return AN(n)?C.from(n.childNodes[o+t]):C.none()},xb=(t,e)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},BN=(t,e,n)=>_o(e,t)===_o(n,t),kb=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let s=r[o];if(s&&wb(s)&&(s=s[o]),Pc(s)||RN(s)){if(BN(e,s,r))return s;break}if(ON(s))break;r=r.parentNode}return null},da=et(xb,!0),ca=et(xb,!1),Lc=(t,e,n)=>{let o;const r=et(kb,!0,e),s=et(kb,!1,e),a=n.startContainer,i=n.startOffset;if(Hr(a)){const l=TN(a)?a.parentNode:a,d=l.getAttribute("data-mce-caret");if(d==="before"&&(o=l.nextSibling,ia(o)))return da(o);if(d==="after"&&(o=l.previousSibling,ia(o)))return ca(o)}if(!n.collapsed)return n;if(H(a)){if(wb(a)){if(t===1){if(o=s(a),o)return da(o);if(o=r(a),o)return ca(o)}if(t===-1){if(o=r(a),o)return ca(o);if(o=s(a),o)return da(o)}return n}if(Ai(a)&&i>=a.data.length-1)return t===1&&(o=s(a),o)?da(o):n;if(Ri(a)&&i<=1)return t===-1&&(o=r(a),o)?ca(o):n;if(i===a.data.length)return o=s(a),o?da(o):n;if(i===0)return o=r(a),o?ca(o):n}return n},_b=(t,e)=>Dc(t?0:-1,e).filter(Pc),ua=(t,e,n)=>{const o=Lc(t,e,n);return t===-1?I.fromRangeStart(o):I.fromRangeEnd(o)},Ui=t=>C.from(t.getNode()).map(R),Mc=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},zi=(t,e)=>{const n=Ln(t,e);return!(n||!$t(t.getNode()))||n};var ae;(function(t){t[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards"})(ae||(ae={}));const PN=Lt,Mn=H,Sb=nt,Ic=$t,Wr=Cn,Nb=t=>ph(t)||(e=>!!bc(e)&&!De(ze(e.getElementsByTagName("*")),(n,o)=>n||gh(o),!1))(t),ji=hh,Rb=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Ab=(t,e)=>{if(qr(t)){if(Wr(e.previousSibling)&&!Mn(e.previousSibling))return I.before(e);if(Mn(e))return I(e,0)}if(or(t)){if(Wr(e.nextSibling)&&!Mn(e.nextSibling))return I.after(e);if(Mn(e))return I(e,e.data.length)}return or(t)?Ic(e)?I.before(e):I.after(e):I.before(e)},Fc=(t,e,n)=>{let o,r,s,a;if(!Sb(n)||!e)return null;if(e.isEqual(I.after(n))&&n.lastChild){if(a=I.after(n.lastChild),or(t)&&Wr(n.lastChild)&&Sb(n.lastChild))return Ic(n.lastChild)?I.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(Mn(i)){if(or(t)&&l>0)return I(i,--l);if(qr(t)&&l<i.length)return I(i,++l);o=i}else{if(or(t)&&l>0&&(r=Rb(i,l-1),Wr(r)))return!Nb(r)&&(s=la(r,t,ji,r),s)?Mn(s)?I(s,s.data.length):I.after(s):Mn(r)?I(r,r.data.length):I.before(r);if(qr(t)&&l<i.childNodes.length&&(r=Rb(i,l),Wr(r)))return Ic(r)?((c,u)=>{const m=u.nextSibling;return m&&Wr(m)?Mn(m)?I(m,0):I.before(m):Fc(ae.Forwards,I.after(u),c)})(n,r):!Nb(r)&&(s=la(r,t,ji,r),s)?Mn(s)?I(s,0):I.before(s):Mn(r)?I(r,0):I.after(r);o=r||a.getNode()}if(o&&(qr(t)&&a.isAtEnd()||or(t)&&a.isAtStart())&&(o=la(o,t,Wt,n,!0),ji(o,n)))return Ab(t,o);r=o&&la(o,t,ji,n);const d=Fo(ft(((c,u)=>{const m=[];let p=c;for(;p&&p!==u;)m.push(p),p=p.parentNode;return m})(i,n),PN));return!d||r&&d.contains(r)?r?Ab(t,r):null:(a=qr(t)?I.after(d):I.before(d),a)},In=t=>({next:e=>Fc(ae.Forwards,e,t),prev:e=>Fc(ae.Backwards,e,t)}),Tb=t=>I.isTextPosition(t)?t.offset()===0:Cn(t.getNode()),Ob=t=>{if(I.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return Cn(t.getNode(!0))},Bb=(t,e)=>!I.isTextPosition(t)&&!I.isTextPosition(e)&&t.getNode()===e.getNode(!0),Ye=(t,e,n)=>{const o=In(e);return C.from(t?o.next(n):o.prev(n))},Kr=(t,e,n)=>Ye(t,e,n).bind(o=>Ln(n,o,e)&&((r,s,a)=>{return r?!Bb(s,a)&&(i=s,!(!I.isTextPosition(i)&&$t(i.getNode())))&&Ob(s)&&Tb(a):!Bb(a,s)&&Tb(s)&&Ob(a);var i})(t,n,o)?Ye(t,e,o):C.some(o)),Pb=(t,e,n,o)=>Kr(t,e,n).bind(r=>o(r)?Pb(t,e,r,o):C.some(r)),Yr=(t,e)=>{const n=t?e.firstChild:e.lastChild;return H(n)?C.some(I(n,t?0:n.data.length)):n?Cn(n)?C.some(t?I.before(n):$t(o=n)?I.before(o):I.after(o)):((r,s,a)=>{const i=r?I.before(a):I.after(a);return Ye(r,s,i)})(t,e,n):C.none();var o},Oe=et(Ye,!0),Ie=et(Ye,!1),Ce=et(Yr,!0),dn=et(Yr,!1),Uc="_mce_caret",Ge=t=>nt(t)&&t.id===Uc,rr=(t,e)=>{let n=e;for(;n&&n!==t;){if(Ge(n))return n;n=n.parentNode}return null},Db=t=>pt(t,"name"),Lb=t=>$.isArray(t.start),Hi=t=>!(!Db(t)&&_n(t.forward))||t.forward,Mb=(t,e)=>(nt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),DN=(t,e)=>dn(t).fold(jt,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Ib=(t,e,n)=>!(!(o=>!o.hasChildNodes())(e)||!rr(t,e)||(((o,r)=>{var s;const a=((s=o.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(se);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(e,n),0)),Fb=(t,e,n,o)=>{const r=n[e?"start":"end"],s=t.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const d=a.childNodes;if(Ib(s,a,o))return!0;if(r[l]>d.length-1)return!!Ib(s,a,o)||DN(a,o);a=d[r[l]]}H(a)&&(i=Math.min(r[0],a.data.length)),nt(a)&&(i=Math.min(r[0],a.childNodes.length)),e?o.setStart(a,i):o.setEnd(a,i)}return!0},zc=t=>H(t)&&t.data.length>0,Ub=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if(e==="start"?s?o.hasChildNodes()?(a=o.firstChild,i=1):zc(o.nextSibling)?(a=o.nextSibling,i=0):zc(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)+1):(a=r,i=t.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):zc(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)):(a=r,i=t.nodeIndex(o)),!s){const l=o.previousSibling,d=o.nextSibling;let c;for($.each($.grep(o.childNodes),u=>{H(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});c=t.get(n.id+"_"+e);)t.remove(c,!0);if(H(d)&&H(l)&&!Et.browser.isOpera()){const u=l.data.length;l.appendData(d.data),t.remove(d),a=l,i=u}}return C.some(I(a,i))}return C.none()},LN=(t,e,n)=>((o,r,s=!1)=>r===2?Ph($e,s,o):r===3?(a=>{const i=a.getRng();return{start:Nh(a.dom.getRoot(),I.fromRangeStart(i)),end:Nh(a.dom.getRoot(),I.fromRangeEnd(i)),forward:a.isForward()}})(o):r?(a=>({rng:a.getRng(),forward:a.isForward()}))(o):Lh(o,!1))(t,e,n),MN=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(Lb(o))return((s,a)=>{const i=s.createRng();return Fb(s,!0,a,i)&&Fb(s,!1,a,i)?C.some({range:i,forward:Hi(a)}):C.none()})(r,o);if((s=>st(s.start))(o))return((s,a)=>{const i=C.from(Rh(s.getRoot(),a.start)),l=C.from(Rh(s.getRoot(),a.end));return pe(i,l,(d,c)=>{const u=s.createRng();return u.setStart(d.container(),d.offset()),u.setEnd(c.container(),c.offset()),{range:u,forward:Hi(a)}})})(r,o);if((s=>pt(s,"id"))(o))return((s,a)=>{const i=Ub(s,"start",a),l=Ub(s,"end",a);return pe(i,l.or(i),(d,c)=>{const u=s.createRng();return u.setStart(Mb(s,d.container()),d.offset()),u.setEnd(Mb(s,c.container()),c.offset()),{range:u,forward:Hi(a)}})})(r,o);if(Db(o))return((s,a)=>C.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((s=>pt(s,"rng"))(o))return C.some({range:o.rng,forward:Hi(o)})}return C.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},Xe=t=>nt(t)&&t.tagName==="SPAN"&&t.getAttribute("data-mce-type")==="bookmark",$i=(zb=Jt,t=>zb===t);var zb;const sr=t=>t!==""&&` \f
\r	\v`.indexOf(t)!==-1,jc=t=>!sr(t)&&!$i(t)&&!zd(t),Hc=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},jb=(t,e)=>{const n=be(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(o=>ft((r=>We(r,s=>{const a=Ti(s);return a?[R(a)]:[]}))(o),Js))(t)},Gr=t=>jb(Hc(t.selection.getSel()),R(t.getBody())),ma=(t,e)=>Is(t,"table",e),Hb=t=>Ad(t).fold(Y([t]),e=>[t].concat(Hb(e))),$c=t=>Td(t).fold(Y([t]),e=>wt(e)==="br"?ho(e).map(n=>[t].concat($c(n))).getOr([]):[t].concat($c(e))),Vc=(t,e)=>pe((n=>{const o=n.startContainer,r=n.startOffset;return H(o)?r===0?C.some(R(o)):C.none():C.from(o.childNodes[r]).map(R)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return H(o)?r===o.data.length?C.some(R(o)):C.none():C.from(o.childNodes[r-1]).map(R)})(e),(n,o)=>{const r=Zt(Hb(t),et(kt,n)),s=Zt($c(t),et(kt,o));return r.isSome()&&s.isSome()}).getOr(!1),qc=(t,e,n,o)=>{const r=n,s=new oe(n,r),a=Ns(t.schema.getMoveCaretBeforeOnEnterElements(),(l,d)=>!_t(["td","th","table"],d.toLowerCase()));let i=n;do{if(H(i)&&$.trim(i.data).length!==0)return void(o?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?e.setStartBefore(i):i.nodeName==="BR"?e.setEndBefore(i):e.setEndAfter(i))}while(i=o?s.next():s.prev());r.nodeName==="BODY"&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},Vi=t=>{const e=t.selection.getSel();return W(e)&&e.rangeCount>0},Wc=(t,e)=>{const n=Gr(t);n.length>0?U(n,o=>{const r=o.dom,s=t.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),e(s,!0)}):e(t.selection.getRng(),!1)},$b=(t,e,n)=>{const o=Lh(t,e);n(o),t.moveToBookmark(o)},fa=t=>an(t?.nodeType),Kc=t=>nt(t)&&!Xe(t)&&!Ge(t)&&!Vo(t),Vb=(t,e,n)=>{const{selection:o,dom:r}=t,s=o.getNode(),a=Lt(s);$b(o,!0,()=>{e()}),a&&Lt(s)&&r.isChildOf(s,t.getBody())?t.selection.select(s):n(o.getStart())&&IN(r,o)},IN=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(Kc(l)&&!/^(TD|TH)$/.test(l.nodeName)){const d=i.getAttrib(l,"data-mce-selected"),c=parseInt(d,10);return!isNaN(c)&&c>0}return!1})(t,e.getNode())&&nt(s)){const i=s.childNodes,l=t.getRoot();let d;if(a<i.length){const c=i[a];d=new oe(c,(n=t.getParent(c,t.isBlock))!==null&&n!==void 0?n:l)}else{const c=i[i.length-1];d=new oe(c,(o=t.getParent(c,t.isBlock))!==null&&o!==void 0?o:l),d.next(!0)}for(let c=d.current();c;c=d.next()){if(t.getContentEditable(c)==="false")return;if(H(c)&&!Gc(c))return r.setStart(c,0),void e.setRng(r)}}},qb=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(nt(t)||!Gc(t))return t}},Yc=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Wo(t,e),Xr=(t,e,n)=>t.schema.isValidChild(e,n),Gc=(t,e=!1)=>{if(W(t)&&H(t)){const n=e?t.data.replace(/ /g,"\xA0"):t.data;return Lr(n)}return!1},Wb=(t,e)=>{const n=t.dom;return Kc(e)&&n.getContentEditable(e)==="false"&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=BS(o),i=Ts(a)?s:`${s},${a}`;return gn(R(r),i)})(t,e)&&n.select('[contenteditable="true"]',e).length===0},So=(t,e)=>Nt(t)?t(e):(W(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),Xc=(t,e)=>(e=e||"",t=""+((t=t||"").nodeName||t),e=""+(e.nodeName||e),t.toLowerCase()===e.toLowerCase()),Zc=(t,e)=>{if(Yt(t))return null;{let n=String(t);return e!=="color"&&e!=="backgroundColor"||(n=$s(n)),e==="fontWeight"&&t===700&&(n="bold"),e==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},qi=(t,e,n)=>{const o=t.getStyle(e,n);return Zc(o,n)},Kb=(t,e)=>{let n;return t.getParent(e,o=>!!nt(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&n!=="none")),n},Wi=(t,e,n)=>t.getParents(e,n,t.getRoot()),Qc=(t,e,n)=>{const o=t.formatter.get(e);return W(o)&&Ht(o,n)},Fn=t=>kr(t,"block"),Ze=t=>kr(t,"selector"),te=t=>kr(t,"inline"),Jc=t=>Ze(t)&&t.expand!==!1&&!te(t),Yb=t=>(e=>{const n=[];let o=e;for(;o;){if(H(o)&&o.data!==se||o.childNodes.length>1)return[];nt(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,tu=t=>Ge(t.dom)&&Yb(t.dom),Zr=Xe,Gb=Wi,Xb=Gc,FN=Yc,Zb=(t,e)=>{let n=e;for(;n;){if(nt(n)&&t.getContentEditable(n))return t.getContentEditable(n)==="false"?n:e;n=n.parentNode}return e},Qb=(t,e,n,o)=>{const r=e.data;if(t){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},UN=(t,e,n)=>Qb(t,e,n,o=>$i(o)||sr(o)),zN=(t,e,n)=>Qb(t,e,n,jc),Jb=(t,e,n,o,r,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(d,c,u)=>{const m=Qo(t),p=r?m.backwards:m.forwards;return C.from(p(d,c,(f,h)=>Zr(f.parentNode)?-1:(a=f,u(r,f,h)),i))};return l(n,o,UN).bind(d=>s?l(d.container,d.offset+(r?-1:0),zN):C.some(d)).orThunk(()=>a?C.some({container:a,offset:r?0:a.length}):C.none())},t0=(t,e,n,o,r)=>{const s=o[r];H(o)&&Ts(o.data)&&s&&(o=s);const a=Gb(t,o);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const d=e[l];if((!W(d.collapsed)||d.collapsed===n.collapsed)&&Ze(d)&&t.is(a[i],d.selector))return a[i]}return o},e0=(t,e,n,o)=>{var r;let s=n;const a=t.getRoot(),i=e[0];if(Fn(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=(r=t.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&r!==void 0?r:a;s=t.getParent(H(n)?n.parentNode:n,d=>d!==a&&FN(t.schema,d),l)}if(s&&Fn(i)&&i.wrapper&&(s=Gb(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!t.isBlock(s[o])&&(s=s[o],!Xc(s,"br")););return s||n},n0=(t,e,n,o)=>{const r=n.parentNode;return!W(n[o])&&(!(r!==e&&!Yt(r)&&!t.isBlock(r))||n0(t,e,r,o))},Ki=(t,e,n,o,r)=>{let s=n;const a=r?"previousSibling":"nextSibling",i=t.getRoot();if(H(n)&&!Xb(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let d=s[a];d;d=d[a]){const c=H(d)&&!n0(t,i,d,a);if(!Zr(d)&&(!$t(l=d)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Xb(d,c))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},o0=t=>Zr(t.parentNode)||Zr(t),ar=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return nt(r)&&r.hasChildNodes()&&(r=xo(r,s),H(r)&&(s=0)),nt(a)&&a.hasChildNodes()&&(a=xo(a,e.collapsed?i:i-1),H(a)&&(i=a.data.length)),r=Zb(t,r),a=Zb(t,a),o0(r)&&(r=Zr(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,H(r)&&(s=e.collapsed?r.length:0)),o0(a)&&(a=Zr(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,H(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(Jb(t,t.getRoot(),r,s,!0,o).each(({container:d,offset:c})=>{r=d,s=c}),Jb(t,t.getRoot(),a,i,!1,o).each(({container:d,offset:c})=>{a=d,i=c})),(te(l)||l.block_expand)&&(te(l)&&H(r)&&s!==0||(r=Ki(t,n,r,s,!0)),te(l)&&H(a)&&i!==a.data.length||(a=Ki(t,n,a,i,!1))),Jc(l)&&(r=t0(t,n,e,r,"previousSibling"),a=t0(t,n,e,a,"nextSibling")),(Fn(l)||Ze(l))&&(r=e0(t,n,r,"previousSibling"),a=e0(t,n,a,"nextSibling"),Fn(l)&&(t.isBlock(r)||(r=Ki(t,n,r,s,!0),H(r)&&(s=0)),t.isBlock(a)||(a=Ki(t,n,a,i,!1),H(a)&&(i=a.data.length)))),nt(r)&&r.parentNode&&(s=t.nodeIndex(r),r=r.parentNode),nt(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:s,endContainer:a,endOffset:i}},ga=(t,e,n)=>{var o;const r=e.startOffset,s=xo(e.startContainer,r),a=e.endOffset,i=xo(e.endContainer,a-1),l=g=>{const b=g[0];H(b)&&b===s&&r>=b.data.length&&g.splice(0,1);const v=g[g.length-1];return a===0&&g.length>0&&v===i&&H(v)&&g.splice(g.length-1,1),g},d=(g,b,v)=>{const y=[];for(;g&&g!==v;g=g[b])y.push(g);return y},c=(g,b)=>t.getParent(g,v=>v.parentNode===b,b),u=(g,b,v)=>{const y=v?"nextSibling":"previousSibling";for(let E=g,w=E.parentNode;E&&E!==b;E=w){w=E.parentNode;const x=d(E===g?E:E[y],y);x.length&&(v||x.reverse(),n(l(x)))}};if(s===i)return n(l([s]));const m=(o=t.findCommonAncestor(s,i))!==null&&o!==void 0?o:t.getRoot();if(t.isChildOf(s,i))return u(s,m,!0);if(t.isChildOf(i,s))return u(i,m);const p=c(s,m)||s,f=c(i,m)||i;u(s,p,!0);const h=d(p===s?p:p.nextSibling,"nextSibling",f===i?f.nextSibling:f);h.length&&n(l(h)),u(i,f)},jN=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],r0=(t,e,n,o,r,s)=>{const{uid:a=e,...i}=n;Rr(t,Ks()),de(t,`${Ir()}`,a),de(t,`${Xo()}`,o);const{attributes:l={},classes:d=[]}=r(a,i);if(Gn(t,l),((c,u)=>{U(u,m=>{Rr(c,m)})})(t,d),s){d.length>0&&de(t,`${Gs()}`,d.join(","));const c=Le(l);c.length>0&&de(t,`${Xs()}`,c.join(","))}},s0=(t,e,n,o,r)=>{const s=ne("span",t);return r0(s,e,n,o,r,!1),s},HN=(t,e,n,o,r,s)=>{const a=[],i=s0(t.getDoc(),n,s,o,r),l=eo(),d=()=>{l.clear()},c=m=>{U(m,u)},u=m=>{switch(((p,f,h,g)=>hn(f).fold(()=>"skipping",b=>g==="br"||(v=>Ae(v)&&Qs(v)===se)(f)?"valid":(v=>je(v)&&Rd(v,Ks()))(f)?"existing":Ge(f.dom)?"caret":Ht(jN,v=>gn(f,v))?"valid-block":Xr(p,h,g)&&Xr(p,wt(b),h)?"valid":"invalid-child"))(t,m,"span",wt(m))){case"invalid-child":{d();const p=he(m);c(p),d();break}case"valid-block":d(),r0(m,n,s,o,r,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const f=Zo(i);return a.push(f),l.set(f),f});op(m,p);break}}};return ga(t.dom,e,m=>{d(),(p=>{const f=Ct(p,R);c(f)})(m)}),a},a0=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Ft(s,a).map(i=>i.settings),getNames:()=>Le(s)}})();((s,a)=>{const i=Xo(),l=c=>C.from(c.attr(i)).bind(a.lookup),d=c=>{var u,m;c.attr(Ir(),null),c.attr(Xo(),null),c.attr(Ys(),null);const p=C.from(c.attr(Xs())).map(b=>b.split(",")).getOr([]),f=C.from(c.attr(Gs())).map(b=>b.split(",")).getOr([]);U(p,b=>c.attr(b,null));const h=(m=(u=c.attr("class"))===null||u===void 0?void 0:u.split(" "))!==null&&m!==void 0?m:[],g=ei(h,[Ks()].concat(f));c.attr("class",g.length>0?g.join(" "):null),c.attr(Gs(),null),c.attr(Xs(),null)};s.serializer.addTempAttr(Ys()),s.serializer.addAttributeFilter(i,c=>{for(const u of c)l(u).each(m=>{m.persistent===!1&&(u.name==="span"?u.unwrap():d(u))})})})(t,e);const n=((s,a)=>{const i=re({}),l=()=>({listeners:[],previous:eo()}),d=(p,f)=>{c(p,h=>(f(h),h))},c=(p,f)=>{const h=i.get(),g=f(Ft(h,p).getOrThunk(l));h[p]=g,i.set(h)},u=(p,f)=>{U(Jp(s,p),h=>{f?de(h,Ys(),"true"):ce(h,Ys())})},m=uc(()=>{const p=Io(a.getNames());U(p,f=>{c(f,h=>{const g=h.previous.get();return Zp(s,C.some(f)).fold(()=>{g.each(b=>{(v=>{d(v,y=>{U(y.listeners,E=>E(!1,v))})})(f),h.previous.clear(),u(b,!1)})},({uid:b,name:v,elements:y})=>{Sr(g,b)||(g.each(E=>u(E,!1)),((E,w,x)=>{d(E,S=>{U(S.listeners,_=>_(!0,E,{uid:w,nodes:Ct(x,O=>O.dom)}))})})(v,b,y),h.previous.set(b),u(b,!0))}),{previous:h.previous,listeners:h.listeners}})})},30);return s.on("remove",()=>{m.cancel()}),s.on("NodeChange",()=>{m.throttle()}),{addListener:(p,f)=>{c(p,h=>({previous:h.previous,listeners:h.listeners.concat([f])}))}}})(t,e),o=li("span"),r=s=>{U(s,a=>{o(a)?vo(a):(i=>{Ps(i,Ks()),ce(i,`${Ir()}`),ce(i,`${Xo()}`),ce(i,`${Ys()}`);const l=Xn(i,`${Xs()}`).map(u=>u.split(",")).getOr([]),d=Xn(i,`${Gs()}`).map(u=>u.split(",")).getOr([]);var c;U(l,u=>ce(i,u)),c=i,U(d,u=>{Ps(c,u)}),ce(i,`${Gs()}`),ce(i,`${Xs()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{((l,d,c,u)=>{l.undoManager.transact(()=>{const m=l.selection,p=m.getRng(),f=Gr(l).length>0,h=Zs("mce-annotation");if(p.collapsed&&!f&&((g,b)=>{const v=ar(g.dom,b,[{inline:"span"}]);b.setStart(v.startContainer,v.startOffset),b.setEnd(v.endContainer,v.endOffset),g.selection.setRng(b)})(l,p),m.getRng().collapsed&&!f){const g=s0(l.getDoc(),h,u,d,c.decorate);pi(g,Jt),m.getRng().insertNode(g.dom),m.select(g.dom)}else $b(m,!1,()=>{Wc(l,g=>{HN(l,g,h,d,c.decorate,u)})})})})(t,s,i,a)})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{Zp(t,C.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();r(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();Dt(th(t,s),(i,l)=>{r(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=th(t,s);return Ss(a,i=>Ct(i,l=>l.dom))}}},pa=t=>({getBookmark:et(LN,t),moveToBookmark:et(MN,t)});pa.isBookmarkNode=Xe;const i0=(t,e,n)=>!n.collapsed&&Ht(n.getClientRects(),o=>((r,s,a)=>s>=r.left&&s<=r.right&&a>=r.top&&a<=r.bottom)(o,t,e)),l0=()=>R(document),d0=(t,e=!1)=>t.dom.focus({preventScroll:e}),c0=t=>{const e=bo(t).dom;return t.dom===e.activeElement},eu=(t=l0())=>C.from(t.dom.activeElement).map(R),u0=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),nu=Dn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),oo={before:nu.before,on:nu.on,after:nu.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(xe,xe,xe)},Yi=Dn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Qr={domRange:Yi.domRange,relative:Yi.relative,exact:Yi.exact,exactFromRange:t=>Yi.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=(n=>n.match({domRange:o=>R(o.startContainer),relative:(o,r)=>oo.getStart(o),exact:(o,r,s,a)=>o}))(t);return Ls(e)},range:u0},m0=(t,e)=>{const n=Ae(e)?Qs(e).length:he(e).length+1;return t>n?n:t<0?0:t},$N=t=>Qr.range(t.start,m0(t.soffset,t.start),t.finish,m0(t.foffset,t.finish)),f0=(t,e)=>!bi(e.dom)&&(pn(t,e)||kt(t,e)),g0=t=>e=>f0(t,e.start)&&f0(t,e.finish),VN=t=>Qr.range(R(t.startContainer),t.startOffset,R(t.endContainer),t.endOffset),qN=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch{return C.none()}},Gi=t=>{const e=(o=>o.inline||Et.browser.isFirefox())(t)?(n=R(t.getBody()),(o=>{const r=o.getSelection();return(r&&r.rangeCount!==0?C.from(r.getRangeAt(0)):C.none()).map(VN)})(Ls(n).dom).filter(g0(n))):C.none();var n;t.bookmark=e.isSome()?e:t.bookmark},ou=t=>(t.bookmark?t.bookmark:C.none()).bind(e=>{return n=R(t.getBody()),o=e,C.from(o).filter(g0(n)).map($N);var n,o}).bind(qN),p0={isEditorUIElement:t=>{const e=t.className.toString();return e.indexOf("tox-")!==-1||e.indexOf("mce-")!==-1}},Qe={setEditorTimeout:(t,e,n)=>((o,r)=>(an(r)||(r=0),setTimeout(o,r)))(()=>{t.removed||e()},n),setEditorInterval:(t,e,n)=>{const o=((r,s)=>(an(s)||(s=0),setInterval(r,s)))(()=>{t.removed?clearInterval(o):e()},n);return o}};let Jr;const ru=Pt.DOM,su=t=>{const e=t.classList;return e!==void 0&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Xi=(t,e)=>{const n=PS(t);return ru.getParent(e,r=>(s=>nt(s)&&p0.isEditorUIElement(s))(r)||!!n&&t.dom.is(r,n))!==null},au=t=>{try{const e=bo(R(t.getElement()));return eu(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},WN=(t,e)=>{const n=e.editor;(r=>{const s=_i(()=>{Gi(r)},0);r.on("init",()=>{r.inline&&((a,i)=>{const l=()=>{i.throttle()};Pt.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Pt.DOM.unbind(document,"mouseup",l)})})(r,s),((a,i)=>{((l,d)=>{l.on("mouseup touchend",c=>{d.throttle()})})(a,i),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(d=>d.type==="nodechange"&&d.selectionChange)(l)||Gi(a)})})(r,s)}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{fN(r)&&r.inline!==!0&&s(R(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=t.focusedEditor;su(au(n))&&o(n,Rr),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{Qe.setEditorTimeout(n,()=>{const r=t.focusedEditor;su(au(n))&&r===n||o(n,Ps),Xi(n,au(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Jr||(Jr=r=>{const s=t.activeEditor;s&&Zg(r).each(a=>{const i=a;i.ownerDocument===document&&(i===document.body||Xi(s,i)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},ru.bind(document,"focusin",Jr))},KN=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&Jr&&(ru.unbind(document,"focusin",Jr),Jr=null)},h0=(t,e)=>{((n,o)=>(r=>r.collapsed?C.from(xo(r.startContainer,r.startOffset)).map(R):C.none())(o).bind(r=>F_(r)?C.some(r):pn(n,r)?C.none():C.some(n)))(R(t.getBody()),e).bind(n=>Ce(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Zi=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},ts=t=>t.inline?(e=>{const n=e.getBody();return n&&(o=R(n),c0(o)||(r=o,eu(bo(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(t):(e=>W(e.iframeElement)&&c0(R(e.iframeElement)))(t),iu=t=>ts(t)||(e=>{const n=bo(R(e.getElement()));return eu(n).filter(o=>!su(o.dom)&&Xi(e,o.dom)).isSome()})(t),lu=t=>t.editorManager.setActive(t),Q={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||Q.metaKeyPressed(t),metaKeyPressed:t=>Et.os.isMacOS()||Et.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},ir="data-mce-selected",b0=Math.abs,Qi=Math.round,du={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},v0=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,s=e.getBody();let a,i,l,d,c,u,m,p,f,h,g,b,v,y,E;const w=K=>W(K)&&(hp(K)||n.is(K,"figure.image")),x=K=>Pn(K)||n.hasClass(K,"mce-preview-object"),S=K=>{const tt=K.target;((A,B)=>{if((M=>M.type==="longpress"||M.type.indexOf("touch")===0)(A)){const M=A.touches[0];return w(A.target)&&!i0(M.clientX,M.clientY,B)}return w(A.target)&&!i0(A.clientX,A.clientY,B)})(K,e.selection.getRng())&&!K.isDefaultPrevented()&&e.selection.select(tt)},_=K=>n.hasClass(K,"mce-preview-object")&&W(K.firstElementChild)?[K,K.firstElementChild]:n.is(K,"figure.image")?[K.querySelector("img")]:[K],O=K=>{const tt=ob(e);return!(!tt||e.mode.isReadOnly())&&K.getAttribute("data-mce-resize")!=="false"&&K!==e.getBody()&&(n.hasClass(K,"mce-preview-object")&&W(K.firstElementChild)?gn(R(K.firstElementChild),tt):gn(R(K),tt))},D=(K,tt,A)=>{if(W(A)){const B=_(K);U(B,M=>{M.style[tt]||!e.schema.isValid(M.nodeName.toLowerCase(),tt)?n.setStyle(M,tt,A):n.setAttrib(M,tt,""+A)})}},k=(K,tt,A)=>{D(K,"width",tt),D(K,"height",A)},N=K=>{let tt,A,B,M,L;tt=K.screenX-u,A=K.screenY-m,b=tt*d[2]+p,v=A*d[3]+f,b=b<5?5:b,v=v<5?5:v,B=(w(a)||x(a))&&kS(e)!==!1?!Q.modifierPressed(K):Q.modifierPressed(K),B&&(b0(tt)>b0(A)?(v=Qi(b*h),b=Qi(v/h)):(b=Qi(v/h),v=Qi(b*h))),k(i,b,v),M=d.startPos.x+tt,L=d.startPos.y+A,M=M>0?M:0,L=L>0?L:0,n.setStyles(l,{left:M,top:L,display:"block"}),l.innerHTML=b+" &times; "+v,d[2]<0&&i.clientWidth<=b&&n.setStyle(i,"left",void 0+(p-b)),d[3]<0&&i.clientHeight<=v&&n.setStyle(i,"top",void 0+(f-v)),tt=s.scrollWidth-y,A=s.scrollHeight-E,tt+A!==0&&n.setStyles(l,{left:M-tt,top:L-A}),g||(((q,V,at,lt,gt)=>{q.dispatch("ObjectResizeStart",{target:V,width:at,height:lt,origin:gt})})(e,a,p,f,"corner-"+d.name),g=!0)},T=()=>{const K=g;g=!1,K&&(D(a,"width",b),D(a,"height",v)),n.unbind(o,"mousemove",N),n.unbind(o,"mouseup",T),r!==o&&(n.unbind(r,"mousemove",N),n.unbind(r,"mouseup",T)),n.remove(i),n.remove(l),n.remove(c),F(a),K&&(((tt,A,B,M,L)=>{tt.dispatch("ObjectResized",{target:A,width:B,height:M,origin:L})})(e,a,b,v,"corner-"+d.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},F=K=>{rt();const tt=n.getPos(K,s),A=tt.x,B=tt.y,M=K.getBoundingClientRect(),L=M.width||M.right-M.left,q=M.height||M.bottom-M.top;a!==K&&(z(),a=K,b=v=0);const V=e.dispatch("ObjectSelected",{target:K});O(K)&&!V.isDefaultPrevented()?Dt(du,(at,lt)=>{let gt=n.get("mceResizeHandle"+lt);gt&&n.remove(gt),gt=n.add(s,"div",{id:"mceResizeHandle"+lt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+lt+"-resize; margin:0; padding:0"}),n.bind(gt,"mousedown",Mt=>{Mt.stopImmediatePropagation(),Mt.preventDefault(),(It=>{const qe=_(a)[0];u=It.screenX,m=It.screenY,p=qe.clientWidth,f=qe.clientHeight,h=f/p,d=at,d.name=lt,d.startPos={x:L*at[0]+A,y:q*at[1]+B},y=s.scrollWidth,E=s.scrollHeight,c=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((X,ht)=>{if(x(ht))return X.create("img",{src:Et.transparentSrc});if(Bn(ht)){const yt=Qt(d.name,"n")?Re:go,mt=ht.cloneNode(!0);return yt(X.select("tr",mt)).each(xt=>{const Ot=X.select("td,th",xt);X.setStyle(xt,"height",null),U(Ot,G=>X.setStyle(G,"height",null))}),mt}return ht.cloneNode(!0)})(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:A,top:B,margin:0}),k(i,L,q),i.removeAttribute(ir),s.appendChild(i),n.bind(o,"mousemove",N),n.bind(o,"mouseup",T),r!==o&&(n.bind(r,"mousemove",N),n.bind(r,"mouseup",T)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(Mt)}),at.elm=gt,n.setStyles(gt,{left:L*at[0]+A-gt.offsetWidth/2,top:q*at[1]+B-gt.offsetHeight/2})}):z(!1)},j=_i(F,0),z=(K=!0)=>{j.cancel(),rt(),a&&K&&a.removeAttribute(ir),Dt(du,(tt,A)=>{const B=n.get("mceResizeHandle"+A);B&&(n.unbind(B),n.remove(B))})},J=(K,tt)=>n.isChildOf(K,tt),ot=K=>{if(g||e.removed||e.composing)return;const tt=K.type==="mousedown"?K.target:t.getNode(),A=Br(R(tt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(M=>M.dom).filter(M=>n.isEditable(M.parentElement)||M.nodeName==="IMG"&&n.isEditable(M)).getOrUndefined(),B=W(A)?n.getAttrib(A,ir,"1"):"1";if(U(n.select(`img[${ir}],hr[${ir}]`),M=>{M.removeAttribute(ir)}),W(A)&&J(A,s)&&iu(e)){it();const M=t.getStart(!0);if(J(M,A)&&J(t.getEnd(!0),A))return n.setAttrib(A,ir,B),void j.throttle(A)}z()},rt=()=>{Dt(du,K=>{K.elm&&(n.unbind(K.elm),delete K.elm)})},it=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{it(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ot),e.on("keyup compositionend",K=>{a&&a.nodeName==="TABLE"&&ot(K)}),e.on("hide blur",z),e.on("contextmenu longpress",S,!0)}),e.on("remove",rt),{isResizable:O,showResizeRect:F,hideResizeRect:z,updateResizeRect:ot,destroy:()=>{j.cancel(),a=i=c=null}}},y0=(t,e,n)=>{const o=t.document.createRange();var r;return r=o,e.fold(s=>{r.setStartBefore(s.dom)},(s,a)=>{r.setStart(s.dom,a)},s=>{r.setStartAfter(s.dom)}),((s,a)=>{a.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)})})(o,n),o},cu=(t,e,n,o,r)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(o.dom,r),s},ha=Dn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),C0=(t,e,n)=>e(R(n.startContainer),n.startOffset,R(n.endContainer),n.endOffset);ha.ltr,ha.rtl;const Ji=(t,e)=>{const n=wt(t);return n==="input"?oo.after(t):_t(["br","img"],n)?e===0?oo.before(t):oo.after(t):oo.on(t,e)},YN=(t,e)=>{const n=t.fold(oo.before,Ji,oo.after),o=e.fold(oo.before,Ji,oo.after);return Qr.relative(n,o)},w0=(t,e,n,o)=>{const r=Ji(t,e),s=Ji(n,o);return Qr.relative(r,s)},uu=(t,e)=>{const n=(e||document).createDocumentFragment();return U(t,o=>{n.appendChild(o.dom)}),R(n)},GN=t=>{const e=Qr.getWin(t).dom,n=(r,s,a,i)=>cu(e,r,s,a,i),o=(r=>r.match({domRange:s=>{const a=R(s.startContainer),i=R(s.endContainer);return w0(a,s.startOffset,i,s.endOffset)},relative:YN,exact:w0}))(t);return((r,s)=>{const a=((i,l)=>l.match({domRange:d=>({ltr:Y(d),rtl:C.none}),relative:(d,c)=>({ltr:Sn(()=>y0(i,d,c)),rtl:Sn(()=>C.some(y0(i,c,d)))}),exact:(d,c,u,m)=>({ltr:Sn(()=>cu(i,d,c,u,m)),rtl:Sn(()=>C.some(cu(i,u,m,d,c)))})}))(r,s);return((i,l)=>{const d=l.ltr();return d.collapsed?l.rtl().filter(c=>c.collapsed===!1).map(c=>ha.rtl(R(c.endContainer),c.endOffset,R(c.startContainer),c.startOffset)).getOrThunk(()=>C0(0,ha.ltr,d)):C0(0,ha.ltr,d)})(0,a)})(e,o).match({ltr:n,rtl:n})},XN=(t,e,n)=>((o,r,s)=>((a,i,l)=>a.caretPositionFromPoint?((d,c,u)=>{var m;return C.from((m=d.caretPositionFromPoint)===null||m===void 0?void 0:m.call(d,c,u)).bind(p=>{if(p.offsetNode===null)return C.none();const f=d.createRange();return f.setStart(p.offsetNode,p.offset),f.collapse(),C.some(f)})})(a,i,l):a.caretRangeFromPoint?((d,c,u)=>{var m;return C.from((m=d.caretRangeFromPoint)===null||m===void 0?void 0:m.call(d,c,u))})(a,i,l):C.none())(o.document,r,s).map(a=>u0(R(a.startContainer),a.startOffset,R(a.endContainer),a.endOffset)))(t,e,n),E0=(t,e,n)=>{const o=Ls(R(n));return XN(o.dom,t,e).map(r=>{const s=n.createRange();return s.setStart(r.start.dom,r.soffset),s.setEnd(r.finish.dom,r.foffset),s}).getOrUndefined()},mu=(t,e)=>W(t)&&W(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,x0=(t,e,n)=>((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(t,e,n)!==null,ZN=(t,e,n)=>x0(t,e,o=>o.nodeName===n),QN=(t,e)=>Ke(t)&&!x0(t,e,Ge),k0=(t,e,n)=>{const o=e.parentNode;if(o){const r=new oe(e,t.getParent(o,t.isBlock)||t.getRoot());let s;for(;s=r[n?"prev":"next"]();)if($t(s))return!0}return!1},fu=(t,e,n,o,r)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=r.parentNode;let l,d;if(!i)return C.none();const c=t.getParent(i,t.isBlock)||s;if(o&&$t(r)&&e&&t.isEmpty(c))return C.some(I(i,t.nodeIndex(r)));const u=new oe(r,c);for(;d=u[o?"prev":"next"]();){if(t.getContentEditableParent(d)==="false"||QN(d,s))return C.none();if(H(d)&&d.data.length>0)return ZN(d,s,"A")?C.none():C.some(I(d,o?d.data.length:0));if(t.isBlock(d)||a[d.nodeName.toLowerCase()])return C.none();l=d}return yo(l)?C.none():n&&l?C.some(I(l,0)):C.none()},_0=(t,e,n,o)=>{const r=t.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const d=nt(i)&&l===i.childNodes.length,c=t.schema.getNonEmptyElements();let u=n;if(Ke(i))return C.none();if(nt(i)&&l>i.childNodes.length-1&&(u=!1),js(i)&&(i=r,l=0),i===r){if(u&&(s=i.childNodes[l>0?l-1:0],s)&&(Ke(s)||c[s.nodeName]||Bn(s)))return C.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=H(i)&&d?i.data.length:0,!e&&i===r.lastChild&&Bn(i)||((m,p)=>{let f=p;for(;f&&f!==m;){if(Lt(f))return!0;f=f.parentNode}return!1})(r,i)||Ke(i)||$d(i))return C.none();if(i.hasChildNodes()&&!Bn(i)){s=i;const m=new oe(i,r);do{if(Lt(s)||Ke(s)){a=!1;break}if(H(s)&&s.data.length>0){l=u?0:s.data.length,i=s,a=!0;break}if(c[s.nodeName.toLowerCase()]&&!f_(s)){l=t.nodeIndex(s),i=s.parentNode,u||l++,a=!0;break}}while(s=u?m.next():m.prev())}}}return e&&(H(i)&&l===0&&fu(t,d,e,!0,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),nt(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!$t(s)||((m,p)=>{var f;return((f=m.previousSibling)===null||f===void 0?void 0:f.nodeName)==="A"})(s)||k0(t,s,!1)||k0(t,s,!0)||fu(t,d,e,!0,s).each(m=>{i=m.container(),l=m.offset(),a=!0}))),u&&!e&&H(i)&&l===i.data.length&&fu(t,d,e,!1,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),a&&i?C.some(I(i,l)):C.none()},tl=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=I.fromRangeStart(e);return _0(t,n,!0,o).each(s=>{n&&I.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||_0(t,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),mu(e,o)?C.none():C.some(o)},el=(t,e)=>t.splitText(e),nl=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&H(e)){if(n>0&&n<e.data.length)if(o=el(e,n),e=o.previousSibling,r>n){r-=n;const s=el(o,r).previousSibling;e=o=s,r=s.data.length,n=0}else r=0}else if(H(e)&&n>0&&n<e.data.length&&(e=el(e,n),n=0),H(o)&&r>0&&r<o.data.length){const s=el(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},lr=t=>({walk:(e,n)=>ga(t,e,n),split:nl,expand:(e,n={type:"word"})=>{if(n.type==="word"){const o=ar(t,e,[{inline:"span"}]),r=t.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return e},normalize:e=>tl(t,e).fold(jt,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});lr.compareRanges=mu,lr.getCaretRangeFromPoint=E0,lr.getSelectedNode=Ti,lr.getNode=xo;const JN=((t,e)=>{const n=r=>{const s=(a=>{const i=a.dom;return Or(a)?i.getBoundingClientRect().height:i.offsetHeight})(r);if(s<=0||s===null){const a=On(r,t);return parseFloat(a)||0}return s},o=(r,s)=>De(s,(a,i)=>{const l=On(r,i),d=l===void 0?0:parseInt(l,10);return isNaN(d)?a:a+d},0);return{set:(r,s)=>{if(!an(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=r.dom;Fs(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,a)=>{const i=o(r,a);return s>i?s-i:0}}})("height"),S0=(t,e)=>t.view(e).fold(Y([]),n=>{const o=t.owner(n),r=S0(t,o);return[n].concat(r)});var tR=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?C.none():C.from((e=t.dom.defaultView)===null||e===void 0?void 0:e.frameElement)).map(R)},owner:t=>po(t)});const gu=t=>wt(t)==="textarea",N0=(t,e)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return Dr(a.offsetLeft,a.offsetTop);const d=hi(i?.pageYOffset,l.scrollTop),c=hi(i?.pageXOffset,l.scrollLeft),u=hi(l.clientTop,a.clientTop),m=hi(l.clientLeft,a.clientLeft);return Fd(r).translate(c-m,d-u)})(t),o=(r=>JN.get(r))(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},R0=(t,e,n,o)=>{nR(t,(r,s)=>eR(t,e,n,o),n)},A0=(t,e,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};((a,i)=>a.dispatch("ScrollIntoView",i).isDefaultPrevented())(t,s)||(n(t,e,Ud(e).top,o,r),((a,i)=>{a.dispatch("AfterScrollIntoView",i)})(t,s))},eR=(t,e,n,o)=>{const r=R(t.getBody()),s=R(t.getDoc());r.dom.offsetWidth;const a=((i,l)=>{const d=((u,m)=>{const p=he(u);if(p.length===0||gu(u))return{element:u,offset:m};if(m<p.length&&!gu(p[m]))return{element:p[m],offset:0};{const f=p[p.length-1];return gu(f)?{element:u,offset:m}:wt(f)==="img"?{element:f,offset:1}:Ae(f)?{element:f,offset:Qs(f).length}:{element:f,offset:he(f).length}}})(i,l),c=di('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return Me(d.element,c),N0(c,()=>Ut(c))})(R(n.startContainer),n.startOffset);A0(t,s,e,a,o),a.cleanup()},T0=(t,e,n,o)=>{const r=R(t.getDoc());A0(t,r,n,(s=>N0(R(s),vt))(e),o)},nR=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;e(R(o),R(s));const i=t.dom.createRng();i.setStart(o,r),i.setEnd(s,a),t.selection.setRng(n)},pu=(t,e,n,o,r)=>{const s=e.pos;if(o)ap(s.left,s.top,r);else{const a=s.top-n+e.height;ap(-t.getBody().getBoundingClientRect().left,a,r)}},O0=(t,e,n,o,r,s)=>{const a=o+n,i=r.pos.top,l=r.bottom,d=l-i>=o;i<n?pu(t,r,o,s!==!1,e):i>a?pu(t,r,o,d?s!==!1:s===!0,e):l>a&&!d&&pu(t,r,o,s===!0,e)},B0=(t,e,n,o,r)=>{const s=Ls(e).dom.innerHeight;O0(t,e,n,s,o,r)},P0=(t,e,n,o,r)=>{const s=Ls(e).dom.innerHeight;O0(t,e,n,s,o,r);const a=(l=>{const d=l0(),c=Ud(d),u=((f,h)=>{const g=h.owner(f);return S0(h,g)})(l,tR),m=Fd(l),p=Es(u,(f,h)=>{const g=Fd(h);return{left:f.left+g.left,top:f.top+g.top}},{left:0,top:0});return Dr(p.left+m.left+c.left,p.top+m.top+c.top)})(o.element),i=dp(window);a.top<i.y?ip(o.element,r!==!1):a.top>i.bottom&&ip(o.element,r===!0)},oR=(t,e,n)=>R0(t,B0,e,n),rR=(t,e,n)=>T0(t,e,B0,n),sR=(t,e,n)=>R0(t,P0,e,n),aR=(t,e,n)=>T0(t,e,P0,n),ba=(t,e,n)=>{(t.inline?oR:sR)(t,e,n)},D0=(t,e)=>e.collapsed?t.isEditable(e.startContainer):t.isEditable(e.startContainer)&&t.isEditable(e.endContainer),L0=(t,e,n,o,r)=>{const s=n?e.startContainer:e.endContainer,a=n?e.startOffset:e.endOffset;return C.from(s).map(R).map(i=>o&&e.collapsed?i:Tr(i,r(i,a)).getOr(i)).bind(i=>je(i)?C.some(i):hn(i).filter(je)).map(i=>i.dom).getOr(t)},M0=(t,e,n=!1)=>L0(t,e,!0,n,(o,r)=>Math.min(Od(o),r)),I0=(t,e,n=!1)=>L0(t,e,!1,n,(o,r)=>r>0?r-1:r),F0=(t,e)=>{const n=t;for(;t&&H(t)&&t.length===0;)t=e?t.nextSibling:t.previousSibling;return t||n},hu=(t,e)=>Ct(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),iR={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ol=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let s=t[r];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[r],s)return s}},lR=t=>{var e;const n=(e=t.value)!==null&&e!==void 0?e:"";if(!Lr(n))return!1;const o=t.parent;return!o||o.name==="span"&&!o.attr("style")||!/^[ ]+$/.test(n)},U0=t=>{const e=t.name==="a"&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class _e{static create(e,n){const o=new _e(e,iR[e]||1);return n&&Dt(n,(r,s)=>{o.attr(s,r)}),o}constructor(e,n){this.name=e,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!st(e))return W(e)&&Dt(e,(s,a)=>{o.attr(a,s)}),o;const r=o.attributes;if(r){if(n!==void 0){if(n===null){if(e in r.map){delete r.map[e];let s=r.length;for(;s--;)if(r[s].name===e)return r.splice(s,1),o}return o}if(e in r.map){let s=r.length;for(;s--;)if(r[s].name===e){r[s].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new _e(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];i.name!=="id"&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=ol(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=ol(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const s=this;let a=s.firstChild;if(U0(s))return!1;if(a)do{if(a.type===1){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||U0(a))return!1}if(a.type===8||a.type===3&&!lR(a)||a.type===3&&a.parent&&n[a.parent.name]&&Lr((r=a.value)!==null&&r!==void 0?r:"")||o&&o(a))return!1}while(a=ol(a,s));return!0}walk(e){return ol(this,null,e)}}const dR=$.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),z0=t=>st(t.nodeValue)&&t.nodeValue.includes(se),j0=t=>(t.length===0?"":`${Ct(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',H0=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>z0(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),$0=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(z0(e)){const n=e.parentNode;return n&&pt(dR,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),cR=t=>H0(t).nextNode()!==null,uR=t=>$0(t).nextNode()!==null,mR=(t,e)=>e.querySelector(j0(t))!==null,fR=(t,e)=>{U(((n,o)=>o.querySelectorAll(j0(n)))(t,e),n=>{const o=R(n);He(o,"data-mce-bogus")==="all"?Ut(o):U(t,r=>{Os(o,r)&&ce(o,r)})})},V0=t=>{let e=t.nextNode();for(;e!==null;)e.nodeValue=null,e=t.nextNode()},gR=fn(V0,H0),pR=fn(V0,$0),q0=(t,e)=>{const n=[{condition:et(mR,e),action:et(fR,e)},{condition:cR,action:gR},{condition:uR,action:pR}];let o=t,r=!1;return U(n,({condition:s,action:a})=>{s(o)&&(r||(o=t.cloneNode(!0),r=!0),a(o))}),o},W0=t=>{const e=be(t,"[data-mce-bogus]");U(e,n=>{He(n,"data-mce-bogus")==="all"?Ut(n):Jo(n)?(Me(n,Ar(Us)),Ut(n)):vo(n)})},K0=t=>{const e=be(t,"input");U(e,n=>{ce(n,"name")})},hR=(t,e,n)=>{let o;return o=e.format==="raw"?$.trim($e(q0(n,t.serializer.getTempAttrs()).innerHTML)):e.format==="text"?((r,s)=>{const a=r.getDoc(),i=bo(R(r.getBody())),l=ne("div",a);de(l,"data-mce-bogus","all"),fi(l,{position:"fixed",left:"-9999999px",top:"0"}),pi(l,s.innerHTML),W0(l),K0(l);const d=(u=>Bd(u)?u:R(po(u).dom.body))(i);Gt(d,l);const c=$e(l.dom.innerText);return Ut(l),c})(t,n):e.format==="tree"?t.serializer.serialize(n,e):((r,s)=>{const a=ye(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${a}>[\r
]*|<br \\/>[\r
]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),e.format!=="text"&&!Si(R(n))&&st(o)?$.trim(o):o},Y0=$.makeMap,G0=t=>{const e=[],n=(t=t||{}).indent,o=Y0(t.indent_before||""),r=Y0(t.indent_after||""),s=Yo.getEncodeFunc(t.entity_encoding||"raw",t.entities),a=t.element_format!=="xhtml";return{start:(i,l,d)=>{if(n&&o[i]&&e.length>0){const c=e[e.length-1];c.length>0&&c!==`
`&&e.push(`
`)}if(e.push("<",i),l)for(let c=0,u=l.length;c<u;c++){const m=l[c];e.push(" ",m.name,'="',s(m.value,!0),'"')}if(e[e.length]=!d||a?">":" />",d&&n&&r[i]&&e.length>0){const c=e[e.length-1];c.length>0&&c!==`
`&&e.push(`
`)}},end:i=>{let l;e.push("</",i,">"),n&&r[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&l!==`
`&&e.push(`
`))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("<!--",i,"-->")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push(`
`)},doctype:i=>{e.push("<!DOCTYPE",i,">",n?`
`:"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},No=(t={},e=Co())=>{const n=G0(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,s={3:i=>{var l;n.text((l=i.value)!==null&&l!==void 0?l:"",i.raw)},8:i=>{var l;n.comment((l=i.value)!==null&&l!==void 0?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype((l=i.value)!==null&&l!==void 0?l:"")},4:i=>{var l;n.cdata((l=i.value)!==null&&l!==void 0?l:"")},11:i=>{let l=i;if(l=l.firstChild)do a(l);while(l=l.next)}};n.reset();const a=i=>{var l;const d=s[i.type];if(d)d(i);else{const c=i.name,u=c in e.getVoidElements();let m=i.attributes;if(r&&m&&m.length>1){const p=[];p.map={};const f=e.getElementRule(i.name);if(f){for(let h=0,g=f.attributesOrder.length;h<g;h++){const b=f.attributesOrder[h];if(b in m.map){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}for(let h=0,g=m.length;h<g;h++){const b=m[h].name;if(!(b in p.map)){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}m=p}}if(n.start(c,m,u),qo(c))st(i.value)&&n.text(i.value,!0),n.end(c);else if(!u){let p=i.firstChild;if(p){c!=="pre"&&c!=="textarea"||p.type!==3||((l=p.value)===null||l===void 0?void 0:l[0])!==`
`||n.text(`
`,!0);do a(p);while(p=p.next)}n.end(c)}}};return o.type!==1||t.inner?o.type===3?s[3](o):s[11](o):a(o),n.getContent()}}},X0=new Set;U(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{X0.add(t)});const Z0=new Set;U(["background-color"],t=>{Z0.add(t)});const Q0=["font","text-decoration","text-emphasis"],es=(t,e)=>Le(((n,o)=>n.parseStyle(n.getAttrib(o,"style")))(t,e)),J0=(t,e)=>Ht(es(t,e),n=>(o=>X0.has(o))(n)),tv=(t,e,n)=>C.from(n.container()).filter(H).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),bu=et(tv,!0,sr),vu=et(tv,!1,sr),bR=t=>{const e=t.container();return H(e)&&(e.data.length===0||Ni(e.data)&&pa.isBookmarkNode(e.parentNode))},Ro=(t,e)=>n=>Dc(t?0:-1,n).filter(e).isSome(),ev=t=>hp(t)&&On(R(t),"display")==="block",nv=t=>Lt(t)&&!(e=>nt(e)&&e.getAttribute("data-mce-bogus")==="all")(t),vR=Ro(!0,ev),yR=Ro(!1,ev),va=Ro(!0,Pn),ya=Ro(!1,Pn),ov=Ro(!0,Bn),yu=Ro(!1,Bn),Ao=Ro(!0,nv),To=Ro(!1,nv),rv=(t,e)=>((n,o,r)=>pn(o,n)?Yg(n,s=>r(s)||kt(s,o)).slice(0,-1):[])(t,e,jt),ro=(t,e)=>[t].concat(rv(t,e)),Cu=(t,e,n)=>Pb(t,e,n,bR),sv=(t,e,n)=>Zt(ro(R(e.container()),t),(o=>r=>o.isBlock(wt(r)))(n)),av=(t,e,n,o)=>Cu(t,e.dom,n).forall(r=>sv(e,n,o).fold(()=>!Ln(r,n,e.dom),s=>!Ln(r,n,e.dom)&&pn(s,R(r.container())))),iv=(t,e,n,o)=>sv(e,n,o).fold(()=>Cu(t,e.dom,n).forall(r=>!Ln(r,n,e.dom)),r=>Cu(t,r.dom,n).isNone()),wu=et(iv,!1),lv=et(iv,!0),CR=et(av,!1),wR=et(av,!0),ER=t=>Ui(t).exists(Jo),rl=(t,e,n,o)=>{const r=ft(ro(R(n.container()),e),a=>o.isBlock(wt(a))),s=Re(r).getOr(e);return Ye(t,s.dom,n).filter(ER)},Eu=(t,e,n)=>Ui(e).exists(Jo)||rl(!0,t,e,n).isSome(),sl=(t,e,n)=>(o=>C.from(o.getNode(!0)).map(R))(e).exists(Jo)||rl(!1,t,e,n).isSome(),dv=et(rl,!1),xR=et(rl,!0),cv=t=>I.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),uv=(t,e,n)=>{const o=ft(ro(R(e.container()),t),r=>n.isBlock(wt(r)));return Re(o).getOr(t)},mv=(t,e,n)=>cv(e)?vu(e):vu(e)||Ie(uv(t,e,n).dom,e).exists(vu),fv=(t,e,n)=>cv(e)?bu(e):bu(e)||Oe(uv(t,e,n).dom,e).exists(bu),xu=t=>Ui(t).bind(e=>zo(e,je)).exists(e=>(n=>_t(["pre","pre-wrap"],n))(On(e,"white-space"))),gv=(t,e)=>n=>{return o=new oe(n,t)[e](),W(o)&&Lt(o)&&Cb(o);var o},pv=(t,e,n)=>!xu(e)&&(((o,r,s)=>((a,i)=>Ie(a.dom,i).isNone())(o,r)||((a,i)=>Oe(a.dom,i).isNone())(o,r)||wu(o,r,s)||lv(o,r,s)||sl(o,r,s)||Eu(o,r,s))(t,e,n)||mv(t,e,n)||fv(t,e,n)),Ca=(t,e,n)=>!xu(e)&&(wu(t,e,n)||CR(t,e,n)||sl(t,e,n)||mv(t,e,n)||((o,r)=>{const s=Ie(o.dom,r).getOr(r),a=gv(o.dom,"prev");return r.isAtStart()&&(a(r.container())||a(s.container()))})(t,e)),wa=(t,e,n)=>!xu(e)&&(lv(t,e,n)||wR(t,e,n)||Eu(t,e,n)||fv(t,e,n)||((o,r)=>{const s=Oe(o.dom,r).getOr(r),a=gv(o.dom,"next");return r.isAtEnd()&&(a(r.container())||a(s.container()))})(t,e)),ku=(t,e,n)=>Ca(t,e,n)||wa(t,(o=>{const r=o.container(),s=o.offset();return H(r)&&s<r.data.length?I(r,s+1):o})(e),n),hv=(t,e)=>$i(t.charAt(e)),bv=(t,e)=>sr(t.charAt(e)),vv=(t,e,n,o)=>{const r=e.data,s=I(e,0);return n||!hv(r,0)||ku(t,s,o)?!!(n&&bv(r,0)&&Ca(t,s,o))&&(e.data=Jt+r.slice(1),!0):(e.data=" "+r.slice(1),!0)},yv=(t,e,n,o)=>{const r=e.data,s=I(e,r.length-1);return n||!hv(r,r.length-1)||ku(t,s,o)?!!(n&&bv(r,r.length-1)&&wa(t,s,o))&&(e.data=r.slice(0,-1)+Jt,!0):(e.data=r.slice(0,-1)+" ",!0)},kR=(t,e,n)=>{const o=e.container();if(!H(o))return C.none();if((r=>{const s=r.container();return H(s)&&ge(s.data,Jt)})(e)){const r=vv(t,o,!1,n)||(s=>{const a=s.data,i=(l=>{const d=l.split("");return Ct(d,(c,u)=>$i(c)&&u>0&&u<d.length-1&&jc(d[u-1])&&jc(d[u+1])?" ":c).join("")})(a);return i!==a&&(s.data=i,!0)})(o)||yv(t,o,!1,n);return Nr(r,e)}if(ku(t,e,n)){const r=vv(t,o,!0,n)||yv(t,o,!0,n);return Nr(r,e)}return C.none()},Cv=(t,e,n,o)=>{if(n===0)return;const r=R(t),s=Zn(r,d=>o.isBlock(wt(d))).getOr(r),a=t.data.slice(e,e+n),i=e+n>=t.data.length&&wa(s,I(t,t.data.length),o),l=e===0&&Ca(s,I(t,0),o);t.replaceData(e,n,gp(a,4,l,i))},al=(t,e,n)=>{const o=t.data.slice(e),r=o.length-zk(o).length;Cv(t,e,r,n)},_u=(t,e,n)=>{const o=t.data.slice(0,e),r=o.length-vg(o).length;Cv(t,e-r,r,n)},Su=(t,e,n,o,r=!0)=>{const s=vg(t.data).length,a=r?t:e,i=r?e:t;return r?a.appendData(i.data):a.insertData(0,i.data),Ut(R(i)),o&&al(a,s,n),a},_R=(t,e)=>((n,o)=>{const r=n.container(),s=n.offset();return!I.isTextPosition(n)&&r===o.parentNode&&s>I.before(o).offset()})(e,t)?I(e.container(),e.offset()-1):e,wv=t=>{return Cn(t.previousSibling)?C.some((e=t.previousSibling,H(e)?I(e,e.data.length):I.after(e))):t.previousSibling?dn(t.previousSibling):C.none();var e},Ev=t=>{return Cn(t.nextSibling)?C.some((e=t.nextSibling,H(e)?I(e,0):I.before(e))):t.nextSibling?Ce(t.nextSibling):C.none();var e},SR=(t,e,n)=>((o,r,s)=>o?((a,i)=>Ev(i).orThunk(()=>wv(i)).orThunk(()=>((l,d)=>Oe(l,I.after(d)).orThunk(()=>Ie(l,I.before(d))))(a,i)))(r,s):((a,i)=>wv(i).orThunk(()=>Ev(i)).orThunk(()=>((l,d)=>C.from(d.previousSibling?d.previousSibling:d.parentNode).bind(c=>Ie(l,I.before(c))).orThunk(()=>Oe(l,I.after(d))))(a,i)))(r,s))(t,e,n).map(et(_R,n)),xv=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},NR=(t,e)=>e&&pt(t.schema.getBlockElements(),wt(e)),dr=(t,e,n,o=!0,r=!1)=>{const s=SR(e,t.getBody(),n.dom),a=Zn(n,et(NR,t),(i=t.getBody(),d=>d.dom===i));var i;const l=((d,c,u,m)=>{const p=ho(d).filter(Ae),f=Ms(d).filter(Ae);return Ut(d),(h=p,g=f,b=c,v=(y,E,w)=>{const x=y.dom,S=E.dom,_=x.data.length;return Su(x,S,u,m),w.container()===S?I(x,_):w},h.isSome()&&g.isSome()&&b.isSome()?C.some(v(h.getOrDie(),g.getOrDie(),b.getOrDie())):C.none()).orThunk(()=>(m&&(p.each(y=>_u(y.dom,y.dom.length,u)),f.each(y=>al(y.dom,0,u))),c));var h,g,b,v})(n,s,t.schema,((d,c)=>pt(d.schema.getTextInlineElements(),wt(c)))(t,n));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(d=>((c,u,m)=>{if(ve(c,u)){const p=di('<br data-mce-bogus="1">');return m?U(he(u),f=>{tu(f)||Ut(f)}):Pr(u),Gt(u,p),C.some(I.before(p.dom))}return C.none()})(t.schema,d,r)).fold(()=>{o&&xv(t,e,l)},d=>{o&&xv(t,e,C.some(d))})},RR=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,cr=(t,e)=>gn(R(e),xS(t))&&!Wo(t.schema,e)&&t.dom.isEditable(e),kv=t=>{var e;return Pt.DOM.getStyle(t,"direction",!0)==="rtl"||(n=>RR.test(n))((e=t.textContent)!==null&&e!==void 0?e:"")},Oo=(t,e,n)=>{const o=((r,s,a)=>ft(Pt.DOM.getParents(a.container(),"*",s),r))(t,e,n);return C.from(o[o.length-1])},Je=(t,e)=>{const n=e.container(),o=e.offset();return t?Eo(n)?H(n.nextSibling)?I(n.nextSibling,0):I.after(n):gc(e)?I(n,o+1):e:Eo(n)?H(n.previousSibling)?I(n.previousSibling,n.previousSibling.data.length):I.before(n):pc(e)?I(n,o-1):e},_v=et(Je,!0),Sv=et(Je,!1),Nv=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},il=t=>Nv(t,"Delete"),Rv=t=>Nv(t,"ForwardDelete"),AR=t=>ih(t)||Ur(t),ll=(t,e)=>pn(t,e)?zo(e,AR,(n=>o=>Sr(hn(o),n,kt))(t)):C.none(),Nu=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Av=(t,e,n)=>pe(Ce(n),dn(n),(o,r)=>{const s=Je(!0,o),a=Je(!1,r),i=Je(!1,e);return t?Oe(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):Ie(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),Tv=t=>{var e;return(Fg(e=t)===8||wt(e)==="#comment"?ho(t):Td(t)).bind(Tv).orThunk(()=>C.some(t))},Ov=(t,e,n,o=!0)=>{var r;e.deleteContents();const s=Tv(n).getOr(n),a=R((r=t.dom.getParent(s.dom,t.dom.isBlock))!==null&&r!==void 0?r:n.dom);if(a.dom===t.getBody()?Nu(t,o):ve(t.schema,a,{checkRootAsContent:!1})&&(wo(a),o&&t.selection.setCursorLocation(a.dom,0)),!kt(n,a)){const l=Sr(hn(a),n)?[]:hn(i=a).map(he).map(d=>ft(d,c=>!kt(i,c))).getOr([]);U(l.concat(he(n)),d=>{kt(d,a)||pn(d,a)||!ve(t.schema,d)||Ut(d)})}var i},Ru=t=>be(t,"td,th"),Bv=(t,e)=>ma(R(t),e),Au=(t,e)=>({start:t,end:e}),Ea=Dn([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),dl=(t,e)=>Br(R(t),"td,th",e),Pv=t=>!kt(t.start,t.end),Dv=(t,e)=>ma(t.start,e).bind(n=>ma(t.end,e).bind(o=>Nr(kt(n,o),n))),Tu=t=>e=>Dv(e,t).map(n=>((o,r,s)=>({rng:o,table:r,cells:s}))(e,n,Ru(n))),Lv=(t,e,n,o)=>{if(n.collapsed||!t.forall(Pv))return C.none();if(e.isSameTable){const r=t.bind(Tu(o));return C.some({start:r,end:r})}{const r=dl(n.startContainer,o),s=dl(n.endContainer,o),a=r.bind((l=>d=>ma(d,l).bind(c=>go(Ru(c)).map(u=>Au(d,u))))(o)).bind(Tu(o)),i=s.bind((l=>d=>ma(d,l).bind(c=>Re(Ru(c)).map(u=>Au(u,d))))(o)).bind(Tu(o));return C.some({start:a,end:i})}},Mv=(t,e)=>xs(t,n=>kt(n,e)),Ou=t=>pe(Mv(t.cells,t.rng.start),Mv(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),Iv=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},TR=(t,e)=>{const n=(s=>a=>kt(s,a))(t),o=((s,a)=>{const i=dl(s.startContainer,a),l=dl(s.endContainer,a);return pe(i,l,Au)})(e,n),r=((s,a)=>{const i=Bv(s.startContainer,a),l=Bv(s.endContainer,a),d=i.isSome(),c=l.isSome(),u=pe(i,l,kt).getOr(!1);return(m=>pe(m.startTable,m.endTable,(p,f)=>{const h=mp(p,b=>kt(b,f)),g=mp(f,b=>kt(b,p));return h||g?{...m,startTable:h?C.none():m.startTable,endTable:g?C.none():m.endTable,isSameTable:!1,isMultiTable:!1}:m}).getOr(m))({startTable:i,endTable:l,isStartInTable:d,isEndInTable:c,isSameTable:u,isMultiTable:!u&&d&&c})})(e,n);return((s,a,i)=>s.exists(l=>((d,c)=>!Pv(d)&&Dv(d,c).exists(u=>{const m=u.dom.rows;return m.length===1&&m[0].cells.length===1}))(l,i)&&Vc(l.start,a)))(o,e,n)?o.map(s=>Ea.singleCellTable(e,s.start)):r.isMultiTable?((s,a,i,l)=>Lv(s,a,i,l).bind(({start:d,end:c})=>{const u=d.bind(Ou).getOr([]),m=c.bind(Ou).getOr([]);if(u.length>0&&m.length>0){const p=Iv(i,a);return C.some(Ea.multiTable(u,m,p))}return C.none()}))(o,r,e,n):((s,a,i,l)=>Lv(s,a,i,l).bind(({start:d,end:c})=>d.or(c)).bind(d=>{const{isSameTable:c}=a,u=Ou(d).getOr([]);if(c&&d.cells.length===u.length)return C.some(Ea.fullTable(d.table));if(u.length>0){if(c)return C.some(Ea.partialTable(u,C.none()));{const m=Iv(i,a);return C.some(Ea.partialTable(u,C.some({...a,rng:m})))}}return C.none()}))(o,r,e,n)},Fv=t=>U(t,e=>{ce(e,"contenteditable"),wo(e)}),Bu=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Pu(t,r,e,!1).each(s=>s())},Uv=t=>{const e=Gr(t),n=R(t.selection.getNode());yi(n.dom)&&ve(t.schema,n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Ht(e,o=>kt(o,n))&&de(n,"data-mce-selected","1")},zv=(t,e,n)=>C.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:s,isStartInTable:a})=>{const i=((d,c)=>C.from(d.dom.getParent(c,d.dom.isBlock)).map(R))(t,a?s.endContainer:s.startContainer);s.deleteContents(),((d,c,u)=>{u.each(m=>{c?Ut(m):(wo(m),d.selection.setCursorLocation(m.dom,0))})})(t,a,i.filter(et(ve,t.schema)));const l=a?e[0]:e[e.length-1];return Bu(t,l,o,a),ve(t.schema,l)?C.none():C.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);Fv(r),Uv(t)}),OR=(t,e,n,o)=>C.some(()=>{const r=t.selection.getRng(),s=e[0],a=n[n.length-1];Bu(t,s,r,!0),Bu(t,a,r,!1);const i=ve(t.schema,s)?e:e.slice(1),l=ve(t.schema,a)?n:n.slice(0,-1);Fv(i.concat(l)),o.deleteContents(),Uv(t)}),Pu=(t,e,n,o=!0)=>C.some(()=>{Ov(t,e,n,o)}),BR=(t,e)=>C.some(()=>dr(t,!1,e)),jv=(t,e)=>Zt(ro(e,t),Js),Du=(t,e)=>Zt(ro(e,t),li("caption")),cl=(t,e)=>C.some(()=>{wo(e),t.selection.setCursorLocation(e.dom,0)}),Hv=(t,e)=>t?ov(e):yu(e),PR=(t,e,n)=>{const o=R(t.getBody());return Du(o,n).fold(()=>((r,s,a,i)=>{const l=I.fromRangeStart(r.selection.getRng());return jv(a,i).bind(d=>ve(r.schema,d,{checkRootAsContent:!1})?cl(r,d):((c,u,m,p,f)=>Kr(m,c.getBody(),f).bind(h=>jv(u,R(h.getNode())).bind(g=>kt(g,p)?C.none():C.some(vt))))(r,a,s,d,l))})(t,e,o,n).orThunk(()=>Nr(((r,s)=>{const a=I.fromRangeStart(r.selection.getRng());return Hv(s,a)||Ye(s,r.getBody(),a).exists(i=>Hv(s,i))})(t,e),vt)),r=>((s,a,i,l)=>{const d=I.fromRangeStart(s.selection.getRng());return ve(s.schema,l)?cl(s,l):((c,u,m,p,f)=>Kr(m,c.getBody(),f).fold(()=>C.some(vt),h=>((g,b,v,y)=>Ce(g.dom).bind(E=>dn(g.dom).map(w=>b?v.isEqual(E)&&y.isEqual(w):v.isEqual(w)&&y.isEqual(E))).getOr(!0))(p,m,f,h)?((g,b)=>cl(g,b))(c,p):((g,b,v)=>Du(g,R(v.getNode())).fold(()=>C.some(vt),y=>Nr(!kt(y,b),vt)))(u,p,h)))(s,i,a,l,d)})(t,e,o,r))},Lu=(t,e)=>{const n=R(t.selection.getStart(!0)),o=Gr(t);return t.selection.isCollapsed()&&o.length===0?PR(t,e,n):((r,s,a)=>{const i=R(r.getBody()),l=r.selection.getRng();return a.length!==0?zv(r,a,C.none()):((d,c,u,m)=>Du(c,m).fold(()=>((p,f,h)=>TR(f,h).bind(g=>g.fold(et(Pu,p),et(BR,p),et(zv,p),et(OR,p))))(d,c,u),p=>((f,h)=>cl(f,h))(d,p)))(r,i,l,s)})(t,n,o)},ur=(t,e)=>{let n=e;for(;n&&n!==t;){if(ln(n)||Lt(n))return n;n=n.parentNode}return null},DR=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],LR=$.each,Mu=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>Ht(DR,s=>Qt(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const d={};return LR(e.getAttribs(l),c=>{const u=c.nodeName.toLowerCase();u==="style"||o(u)||(d[u]=e.getAttrib(l,u))}),d},i=(l,d)=>{for(const c in l)if(pt(l,c)){const u=d[c];if(le(u)||l[c]!==u)return!1;delete d[c]}for(const c in d)if(pt(d,c))return!1;return!0};return nt(r)&&nt(s)&&(!i(a(r),a(s))||!i(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(s,"style"))))?!1:!Xe(r)&&!Xe(s)},isAttributeInternal:o}},$v=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),Vv=(t,e,n,o)=>{const r=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const d=o.attributes[l];d?d.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},qv=(t,e)=>{const n=(o,r)=>{Dt(o,s=>{const a=ze(s.nodes);U(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const d=a[l];(r?d.attr(s.filter.name)!==void 0:d.name===s.filter.name)&&!Yt(d.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},Wv=(t,e,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((d,c)=>{let u=d;for(;u=u.walk();)Vv(s,a,u,l)})(i),l})(t,e,n);qv(r,o)},Iu=(t,e,n,o)=>{if((t.pad_empty_with_br||e.insert)&&n(o)){const r=new _e("br",1);e.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new _e("#text",3)).value=Jt},Kv=(t,e)=>{const n=t?.firstChild;return W(n)&&n===t.lastChild&&n.name===e},xa=(t,e,n,o)=>o.isEmpty(e,n,r=>((s,a)=>{const i=s.getElementRule(a.name);return i?.paddEmpty===!0})(t,r)),MR=t=>{let e;for(let n=t;n;n=n.parent){const o=n.attr("contenteditable");if(o==="false")break;o==="true"&&(e=n)}return C.from(e)},Fu=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&Fu(r,e,n);t.unwrap()}},Uu=(t,e,n,o=vt)=>{const r=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=$.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,d=c=>c!==n&&!i[c.name];for(let c=0;c<t.length;c++){const u=t[c];let m,p,f;if(!u.parent||l.has(u))continue;if(r[u.name]&&u.parent.name==="li"){let g=u.next;for(;g&&r[g.name];)g.name="li",l.add(g),u.parent.insert(g,u.parent),g=g.next;u.unwrap();continue}const h=[u];for(m=u.parent;m&&!e.isValidChild(m.name,u.name)&&d(m);m=m.parent)h.push(m);if(m&&h.length>1)if(zu(e,u,m))Fu(u,e);else{h.reverse(),p=h[0].clone(),o(p);let g=p;for(let b=0;b<h.length-1;b++){e.isValidChild(g.name,h[b].name)&&b>0?(f=h[b].clone(),o(f),g.append(f)):f=g;for(let v=h[b].firstChild;v&&v!==h[b+1];){const y=v.next;f.append(v),v=y}g=f}xa(e,s,a,p)?m.insert(u,h[0],!0):(m.insert(p,h[0],!0),m.insert(u,p)),m=h[0],(xa(e,s,a,m)||Kv(m,"br"))&&m.empty().remove()}else if(u.parent){if(u.name==="li"){let g=u.prev;if(g&&(g.name==="ul"||g.name==="ol")){g.append(u);continue}if(g=u.next,g&&(g.name==="ul"||g.name==="ol")&&g.firstChild){g.insert(u,g.firstChild,!0);continue}const b=new _e("ul",1);o(b),u.wrap(b);continue}if(e.isValidChild(u.parent.name,"div")&&e.isValidChild("div",u.name)){const g=new _e("div",1);o(g),u.wrap(g)}else Fu(u,e)}}},zu=(t,e,n=e.parent)=>!(!n||(!t.children[e.name]||t.isValidChild(n.name,e.name))&&(e.name!=="a"||!((o,r)=>{let s=o;for(;s;){if(s.name==="a")return!0;s=s.parent}return!1})(n))&&(!(o=>o.name==="summary")(n)||!$v(e)||n?.firstChild===e&&n?.lastChild===e)),ju=t=>t.collapsed?t:(e=>{const n=I.fromRangeStart(e),o=I.fromRangeEnd(e),r=e.commonAncestorContainer;return Ye(!1,r,o).map(s=>!Ln(n,o,r)&&Ln(n,s,r)?((a,i,l,d)=>{const c=document.createRange();return c.setStart(a,i),c.setEnd(l,d),c})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),IR=(t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&n.name==="meta"&&(n=n.next),o&&o.attr("id")==="mce_marker"&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return W(s)&&(s.isEmpty(a)||((i,l)=>i.getBlockElements()[l.name]&&(d=>W(d.firstChild)&&d.firstChild===d.lastChild)(l)&&(d=>d.name==="br"||d.value===Jt)(l.firstChild))(r,s))})(t,o)&&(o=o?.prev),!(!n||n!==o||n.name!=="ul"&&n.name!=="ol")},FR=t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||W((e=n)==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&(o=>o.data===Jt||$t(o))(e.firstChild))?t.slice(0,-1):t;var e,n},Hu=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&n.nodeName==="LI"?n:null},Yv=(t,e)=>{const n=I.after(t),o=In(e).prev(n);return o?o.toRange():null},UR=(t,e,n,o)=>{const r=((u,m,p)=>{const f=m.serialize(p);return(h=>{var g,b;const v=h.firstChild,y=h.lastChild;return v&&v.nodeName==="META"&&((g=v.parentNode)===null||g===void 0||g.removeChild(v)),y&&y.id==="mce_marker"&&((b=y.parentNode)===null||b===void 0||b.removeChild(y)),h})(u.createFragment(f))})(e,t,o),s=Hu(e,n.startContainer),a=FR((i=r.firstChild,ft((l=i?.childNodes)!==null&&l!==void 0?l:[],u=>u.nodeName==="LI")));var i,l;const d=e.getRoot(),c=u=>{const m=I.fromRangeStart(n),p=In(e.getRoot()),f=u===1?p.prev(m):p.next(m),h=f?.getNode();return!h||Hu(e,h)!==s};return s?c(1)?((u,m,p)=>{const f=u.parentNode;return f&&$.each(m,h=>{f.insertBefore(h,u)}),((h,g)=>{const b=I.before(h),v=In(g).next(b);return v?v.toRange():null})(u,p)})(s,a,d):c(2)?((u,m,p,f)=>(f.insertAfter(m.reverse(),u),Yv(m[0],p)))(s,a,d,e):((u,m,p,f)=>{const h=((b,v)=>{const y=v.cloneRange(),E=v.cloneRange();return y.setStartBefore(b),E.setEndAfter(b),[y.cloneContents(),E.cloneContents()]})(u,f),g=u.parentNode;return g&&(g.insertBefore(h[0],u),$.each(m,b=>{g.insertBefore(b,u)}),g.insertBefore(h[1],u),g.removeChild(u)),Yv(m[m.length-1],p)})(s,a,d,n):null},zR=["pre"],$u=yi,jR=(t,e,n)=>{var o,r;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,d=No({validate:!0},t.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=$e(e)),e.indexOf("{$caret}")===-1&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,c);let u=s.getRng();const m=u.startContainer,p=t.getBody();m===p&&s.isCollapsed()&&a.isBlock(p.firstChild)&&((y,E)=>W(E)&&!y.schema.getVoidElements()[E.nodeName])(t,p.firstChild)&&a.isEmpty(p.firstChild)&&(u=a.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),s.setRng(u)),s.isCollapsed()||(y=>{const E=y.dom,w=ju(y.selection.getRng());y.selection.setRng(w);const x=E.getParent(w.startContainer,$u);((S,_,O)=>!!W(O)&&O===S.getParent(_.endContainer,$u)&&Vc(R(O),_))(E,w,x)?Pu(y,w,R(x)):w.startContainer===w.endContainer&&w.endOffset-w.startOffset==1&&H(w.startContainer.childNodes[w.startOffset])?w.deleteContents():y.getDoc().execCommand("Delete",!1)})(t);const f=s.getNode(),h={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},g=i.parse(e,h);if(n.paste===!0&&IR(t.schema,g)&&((y,E)=>!!Hu(y,E))(a,f))return u=UR(d,a,s.getRng(),g),u&&s.setRng(u),e;n.paste===!0&&((y,E,w,x)=>{var S;const _=E.firstChild,O=E.lastChild,D=_===(O.attr("data-mce-type")==="bookmark"?O.prev:O),k=_t(zR,_.name);if(D&&k){const N=_.attr("contenteditable")!=="false",T=((S=y.getParent(w,y.isBlock))===null||S===void 0?void 0:S.nodeName.toLowerCase())===_.name,F=C.from(ur(x,w)).forall(ln);return N&&T&&F}return!1})(a,g,f,t.getBody())&&((o=g.firstChild)===null||o===void 0||o.unwrap()),(y=>{let E=y;for(;E=E.walk();)E.type===1&&E.attr("data-mce-fragment","1")})(g);let b=g.lastChild;if(b&&b.attr("id")==="mce_marker"){const y=b;for(b=b.prev;b&&b.name!=="table";b=b.walk(!0))if(b.type===3||!a.isBlock(b.name)){b.parent&&t.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,b.name==="br");break}}if(t._selectionOverrides.showBlockCaretContainer(f),h.invalid||((y,E,w)=>{var x;return Ht(w.children(),$v)&&((x=y.getParent(E,y.isBlock))===null||x===void 0?void 0:x.nodeName)==="SUMMARY"})(a,f,g)){t.selection.setContent(c);let y,E=s.getNode();const w=t.getBody();for(js(E)?E=y=w:y=E;y&&y!==w;)E=y,y=y.parentNode;e=E===w?w.innerHTML:a.getOuterHTML(E);const x=i.parse(e),S=(N=>{for(let T=N;T;T=T.walk())if(T.attr("id")==="mce_marker")return C.some(T);return C.none()})(x),_=S.bind(MR).getOr(x);S.each(N=>N.replace(g));const O=g.children(),D=(r=g.parent)!==null&&r!==void 0?r:x;g.unwrap();const k=ft(O,N=>zu(t.schema,N,D));Uu(k,t.schema,_),Wv(i.getNodeFilters(),i.getAttributeFilters(),x),e=d.serialize(x),E===w?a.setHTML(w,e):a.setOuterHTML(E,e)}else e=d.serialize(g),((y,E,w)=>{var x;if(w.getAttribute("data-mce-bogus")==="all")(x=w.parentNode)===null||x===void 0||x.insertBefore(y.dom.createFragment(E),w);else{const S=w.firstChild,_=w.lastChild;!S||S===_&&S.nodeName==="BR"?y.dom.setHTML(w,E):y.selection.setContent(E,{no_events:!0})}})(t,e,f);var v;return((y,E)=>{const w=y.schema.getTextInlineElements(),x=y.dom;if(E){const S=y.getBody(),_=Mu(y),O="*[data-mce-fragment]",D=x.select(O);$.each(D,k=>{const N=j=>W(w[j.nodeName.toLowerCase()]),T=j=>j.childNodes.length===1;if(!J0(x,F=k)&&!((j,z)=>J0(j,z)&&Ht(es(j,z),J=>(ot=>Z0.has(ot))(J)))(x,F)&&N(k)&&T(k)){const j=es(x,k),z=(it,K)=>Kn(it,tt=>_t(K,tt)),J=it=>T(k)&&x.is(it,O)&&N(it)&&(it.nodeName===k.nodeName&&z(j,es(x,it))||J(it.children[0])),ot=it=>W(it)&&it!==S&&(_.compare(k,it)||ot(it.parentElement)),rt=it=>W(it)&&it!==S&&x.is(it,O)&&(((K,tt,A)=>{const B=es(K,tt),M=es(K,A),L=q=>{var V,at;const lt=(V=K.getStyle(tt,q))!==null&&V!==void 0?V:"",gt=(at=K.getStyle(A,q))!==null&&at!==void 0?at:"";return Nn(lt)&&Nn(gt)&&lt!==gt};return Ht(B,q=>{const V=at=>Ht(at,lt=>lt===q);if(!V(M)&&V(Q0)){const at=ft(M,lt=>Ht(Q0,gt=>Qt(lt,gt)));return Ht(at,L)}return L(q)})})(x,k,it)||rt(it.parentElement));(J(k.children[0])||ot(k.parentElement)&&!rt(k.parentElement))&&x.remove(k,!0)}var F})}})(t,l),((y,E)=>{var w,x,S;let _;const O=y.dom,D=y.selection;if(!E)return;D.scrollIntoView(E);const k=ur(y.getBody(),E);if(k&&O.getContentEditable(k)==="false")return O.remove(E),void D.select(k);let N=O.createRng();const T=E.previousSibling;if(H(T)){N.setStart(T,(x=(w=T.nodeValue)===null||w===void 0?void 0:w.length)!==null&&x!==void 0?x:0);const j=E.nextSibling;H(j)&&(T.appendData(j.data),(S=j.parentNode)===null||S===void 0||S.removeChild(j))}else N.setStartBefore(E),N.setEndBefore(E);const F=O.getParent(E,O.isBlock);if(O.remove(E),F&&O.isEmpty(F)){const j=$u(F);Pr(R(F)),N.setStart(F,0),N.setEnd(F,0),j||(z=>!!z.getAttribute("data-mce-fragment"))(F)||!(_=(z=>{let J=I.fromRangeStart(z);return J=In(y.getBody()).next(J),J?.toRange()})(N))?O.add(F,O.create("br",j?{}:{"data-mce-bogus":"1"})):(N=_,O.remove(F))}D.setRng(N)})(t,a.get("mce_marker")),v=t.getBody(),$.each(v.getElementsByTagName("*"),y=>{y.removeAttribute("data-mce-fragment")}),((y,E,w)=>{C.from(y.getParent(E,"td,th")).map(R).each(x=>((S,_)=>{Td(S).each(O=>{ho(O).each(D=>{_.isBlock(wt(S))&&Jo(O)&&_.isBlock(wt(D))&&Ut(O)})})})(x,w))})(a,s.getStart(),t.schema),((y,E,w)=>{const x=Yg(R(w),S=>kt(S,R(E)));_s(x,x.length-2).filter(je).fold(()=>Kd(y,E),S=>Kd(y,S.dom))})(t.schema,t.getBody(),s.getStart()),e},ul=t=>t instanceof _e,Vu=(t,e,n)=>{t.dom.setHTML(t.getBody(),e),n!==!0&&(o=>{ts(o)&&Ce(o.getBody()).each(r=>{const s=r.getNode(),a=Bn(s)?Ce(s).getOr(r):r;o.selection.setRng(a.toRange())})})(t)},Gv=t=>Nt(t)?t:jt,qu=(t,e,n)=>{const o=e(t),r=Gv(n);return o.orThunk(()=>r(t)?C.none():((s,a,i)=>{let l=s.dom;const d=Gv(i);for(;l.parentNode;){l=l.parentNode;const c=R(l),u=a(c);if(u.isSome())return u;if(d(c))break}return C.none()})(t,e,r))},Wu=Xc,Xv=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(Ze(s)&&s.inherit===!1&&t.dom.is(e,s.selector))return!0}return!1},Ku=(t,e,n,o,r)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!Xv(t,i,n)||i.parentNode===s||!!Un(t,i,n,o,!0));return!!Un(t,a,n,o,r)},ml=(t,e,n)=>!(!te(n)||!Wu(e,n.inline))||!(!Fn(n)||!Wu(e,n.block))||!!Ze(n)&&nt(e)&&t.is(e,n.selector),Zv=(t,e,n,o,r,s)=>{const a=n[o],i=o==="attributes";if(Nt(n.onmatch))return n.onmatch(e,n,o);if(a){if(mg(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):qi(t,e,a[l]))return!0}else for(const l in a)if(pt(a,l)){const d=i?t.getAttrib(e,l):qi(t,e,l),c=So(a[l],s),u=Yt(d)||Ts(d);if(u&&Yt(c))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!Wu(d,Zc(c,l)))return!1}}return!0},Un=(t,e,n,o,r)=>{const s=t.formatter.get(n),a=t.dom;if(s&&nt(e))for(let i=0;i<s.length;i++){const l=s[i];if(ml(t.dom,e,l)&&Zv(a,e,l,"attributes",r,o)&&Zv(a,e,l,"styles",r,o)){const d=l.classes;if(d){for(let c=0;c<d.length;c++)if(!t.dom.hasClass(e,So(d[c],o)))return}return l}}},Yu=(t,e,n,o,r)=>{if(o)return Ku(t,o,e,n,r);if(o=t.selection.getNode(),Ku(t,o,e,n,r))return!0;const s=t.selection.getStart();return!(s===o||!Ku(t,s,e,n,r))},ka=se,Qv=t=>{if(t){const e=new oe(t,t);for(let n=e.current();n;n=e.next())if(H(n))return n}return null},Gu=t=>{const e=ne("span");return Gn(e,{id:Uc,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Gt(e,Ar(ka)),e},Xu=(t,e,n)=>{const o=t.dom,r=t.selection;if(Yb(e))dr(t,!1,R(e),n,!0);else{const s=r.getRng(),a=o.getParent(e,o.isBlock),i=s.startContainer,l=s.startOffset,d=s.endContainer,c=s.endOffset,u=(m=>{const p=Qv(m);return p&&p.data.charAt(0)===ka&&p.deleteData(0,1),p})(e);o.remove(e,!0),i===u&&l>0&&s.setStart(u,l-1),d===u&&c>0&&s.setEnd(u,c-1),a&&o.isEmpty(a)&&wo(R(a)),r.setRng(s)}},Zu=(t,e,n)=>{const o=t.dom,r=t.selection;if(e)Xu(t,e,n);else if(!(e=rr(t.getBody(),r.getStart())))for(;e=o.get(Uc);)Xu(t,e,n)},Jv=(t,e)=>(t.appendChild(e),e),ty=(t,e)=>{var n;const o=Es(t,(s,a)=>Jv(s,a.cloneNode(!1)),e),r=(n=o.ownerDocument)!==null&&n!==void 0?n:document;return Jv(o,r.createTextNode(ka))},ey=t=>ah(t,Qs(t).replace(new RegExp(`${Jt}$`)," ")),ny=(t,e)=>{const n=()=>{e===null||t.dom.isEmpty(e)||ho(R(e)).each(o=>{Ae(o)?ey(o):Dd(o,r=>Ae(r)).each(r=>{Ae(r)&&ey(r)})})};t.once("input",o=>{o.data&&!sr(o.data)&&(o.isComposing?t.once("compositionend",()=>{n()}):n())})},HR=(t,e,n,o)=>{const r=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),d=l.startContainer,c=l.startOffset;let u=d;H(d)&&(c!==d.data.length&&(a=!0),u=u.parentNode);const m=[];let p;for(;u;){if(Un(t,u,e,n,o)){p=u;break}u.nextSibling&&(a=!0),m.push(u),u=u.parentNode}if(p)if(a){const f=s.getBookmark();l.collapse(!0);let h=ar(r,l,i,!0);h=nl(h),t.formatter.remove(e,n,h,o),s.moveToBookmark(f)}else{const f=rr(t.getBody(),p),h=W(f)?r.getParents(p.parentNode,Wt,f):[],g=Gu(!1).dom;((y,E,w)=>{var x,S;const _=y.dom,O=_.getParent(w,et(Yc,y.schema));O&&_.isEmpty(O)?(x=w.parentNode)===null||x===void 0||x.replaceChild(E,w):((D=>{const k=be(D,"br"),N=ft((T=>{const F=[];let j=T.dom;for(;j;)F.push(R(j)),j=j.lastChild;return F})(D).slice(-1),Jo);k.length===N.length&&U(N,Ut)})(R(w)),_.isEmpty(w)?(S=w.parentNode)===null||S===void 0||S.replaceChild(E,w):_.insertAfter(E,w))})(t,g,f??p);const b=((y,E,w,x,S,_)=>{const O=y.formatter,D=y.dom,k=ft(Le(O.get()),T=>T!==x&&!ge(T,"removeformat")),N=((T,F,j)=>De(j,(z,J)=>{const ot=((rt,it)=>Qc(rt,it,K=>{const tt=A=>Nt(A)||A.length>1&&A.charAt(0)==="%";return Ht(["styles","attributes"],A=>Ft(K,A).exists(B=>{const M=Vt(B)?B:yd(B);return Ht(M,tt)}))}))(T,J);return T.formatter.matchNode(F,J,{},ot)?z.concat([J]):z},[]))(y,w,k);if(ft(N,T=>!((F,j,z)=>{const J=["inline","block","selector","attributes","styles","classes"],ot=rt=>Ns(rt,(it,K)=>Ht(J,tt=>tt===K));return Qc(F,j,rt=>{const it=ot(rt);return Qc(F,z,K=>{const tt=ot(K);return((A,B,M=md)=>Jf(M).eq(A,B))(it,tt)})})})(y,T,x)).length>0){const T=w.cloneNode(!1);return D.add(E,T),O.remove(x,S,T,_),D.remove(T),C.some(T)}return C.none()})(t,g,p,e,n,o),v=ty([...m,...b.toArray(),...h],g);f&&Xu(t,f,W(f)),s.setCursorLocation(v,1),ny(t,g),r.isEmpty(p)&&r.remove(p)}},oy=t=>{const e=Gu(!1),n=ty(t,e.dom);return{caretContainer:e,caretPosition:I(n,0)}},ry=(t,e)=>{const{caretContainer:n,caretPosition:o}=oy(e);return Me(R(t),n),Ut(R(t)),o},sy=(t,e)=>{if(Ge(e.dom))return!1;const n=t.schema.getTextInlineElements();return pt(n,wt(e))&&!Ge(e.dom)&&!Vo(e.dom)},_a={},ay=bn(["pre"]);((t,e)=>{_a[t]||(_a[t]=[]),_a[t].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=ft(ft(o,ay),(s=>a=>{const i=a.previousSibling;return ay(i)&&_t(s,i)})(o));U(r,s=>{((a,i)=>{const l=R(i),d=po(l).dom;Ut(l),Ho(R(a),[ne("br",d),ne("br",d),...he(l)])})(s.previousSibling,s)})}})})("pre");const iy=["fontWeight","fontStyle","color","fontSize","fontFamily"],ly=(t,e)=>{const n=t.get(e);return Vt(n)?Zt(n,o=>te(o)&&o.inline==="span"&&(r=>ie(r.styles)&&Ht(Le(r.styles),s=>_t(iy,s)))(o)):C.none()},dy=(t,e)=>Ie(e,I.fromRangeStart(t)).isNone(),cy=(t,e)=>Oe(e,I.fromRangeEnd(t)).exists(n=>!$t(n.getNode())||Oe(e,n).isSome())===!1,uy=t=>e=>g_(e)&&t.isEditable(e),my=t=>ft(t.getSelectedBlocks(),uy(t.dom)),Qu=$.each,Ju=t=>nt(t)&&!Xe(t)&&!Ge(t)&&!Vo(t),fy=(t,e)=>{for(let n=t;n;n=n[e]){if(H(n)&&Nn(n.data))return t;if(nt(n)&&!Xe(n))return n}return t},gy=(t,e,n)=>{const o=Mu(t),r=Jn(e)&&t.dom.isEditable(e),s=Jn(n)&&t.dom.isEditable(n);if(r&&s){const a=fy(e,"previousSibling"),i=fy(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const d=l;l=l.nextSibling,a.appendChild(d)}return t.dom.remove(i),$.each($.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},py=(t,e,n,o)=>{var r;if(o&&e.merge_siblings!==!1){const s=(r=gy(t,qb(o),o))!==null&&r!==void 0?r:o;gy(t,s,qb(s,!0))}},tm=(t,e,n)=>{Qu(t.childNodes,o=>{Ju(o)&&(e(o)&&n(o),o.hasChildNodes()&&tm(o,e,n))})},hy=(t,e)=>n=>!(!n||!qi(t,n,e)),by=(t,e,n)=>o=>{t.setStyle(o,e,n),o.getAttribute("style")===""&&o.removeAttribute("style"),((r,s)=>{s.nodeName==="SPAN"&&r.getAttribs(s).length===0&&r.remove(s,!0)})(t,o)},mr=Dn([{keep:[]},{rename:["name"]},{removed:[]}]),$R=/^(src|href|style)$/,em=$.each,fl=Xc,vy=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),yy=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(nt(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return H(o)&&n&&r>=o.data.length&&(o=new oe(o,t.getBody()).next()||o),H(o)&&!n&&r===0&&(o=new oe(o,t.getBody()).prev()||o),o},Cy=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return(r=>/^(TR|TH|TD)$/.test(r.nodeName))(t)&&o?t.nodeName==="TR"&&o[n]||o:t},nm=(t,e,n,o)=>{var r;const s=t.create(n,o);return(r=e.parentNode)===null||r===void 0||r.insertBefore(s,e),s.appendChild(e),s},wy=(t,e,n,o,r)=>{const s=R(e),a=R(t.create(o,r)),i=n?Xg(s):Gg(s);return Ho(a,i),n?(Me(s,a),Md(a,s)):(Qn(s,a),Gt(a,s)),a.dom},Ey=(t,e,n)=>{const o=e.parentNode;let r;const s=t.dom,a=ye(t);Fn(n)&&o===s.getRoot()&&(n.list_block&&fl(e,n.list_block)||U(ze(e.childNodes),i=>{Xr(t,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=nm(s,i,a),s.setAttribs(r,ra(t))):r=null})),(i=>Ze(i)&&te(i)&&Sr(Ft(i,"mixed"),!0))(n)&&!fl(n.inline,e)||s.remove(e,!0)},xy=(t,e,n)=>an(t)?{name:e,value:null}:{name:t,value:So(e,n)},ky=(t,e)=>{t.getAttrib(e,"style")===""&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},_y=(t,e,n,o,r)=>{let s=!1;em(n.styles,(a,i)=>{const{name:l,value:d}=xy(i,a,o),c=Zc(d,l);(n.remove_similar||Ee(d)||!nt(r)||fl(qi(t,r,l),c))&&t.setStyle(e,l,""),s=!0}),s&&ky(t,e)},Sy=(t,e,n,o,r)=>{const s=t.dom,a=Mu(t),i=t.schema;if(te(e)&&Gd(i,e.inline)&&Wo(i,o)&&o.parentElement===t.getBody())return Ey(t,o,e),mr.removed();if(!e.ceFalseOverride&&o&&s.getContentEditableParent(o)==="false"||o&&!ml(s,o,e)&&!((c,u)=>u.links&&c.nodeName==="A")(o,e))return mr.keep();const l=o,d=e.preserve_attributes;if(te(e)&&e.remove==="all"&&Vt(d)){const c=ft(s.getAttribs(l),u=>_t(d,u.name.toLowerCase()));if(s.removeAllAttribs(l),U(c,u=>s.setAttrib(l,u.name,u.value)),c.length>0)return mr.rename("span")}if(e.remove!=="all"){_y(s,l,e,n,r),em(e.attributes,(u,m)=>{const{name:p,value:f}=xy(m,u,n);if(e.remove_similar||Ee(f)||!nt(r)||fl(s.getAttrib(r,p),f)){if(p==="class"){const h=s.getAttrib(l,p);if(h){let g="";if(U(h.split(/\s+/),b=>{/mce\-\w+/.test(b)&&(g+=(g?" ":"")+b)}),g)return void s.setAttrib(l,p,g)}}if($R.test(p)&&l.removeAttribute("data-mce-"+p),p==="style"&&bn(["li"])(l)&&s.getStyle(l,"list-style-type")==="none")return l.removeAttribute(p),void s.setStyle(l,"list-style-type","none");p==="class"&&l.removeAttribute("className"),l.removeAttribute(p)}}),em(e.classes,u=>{u=So(u,n),nt(r)&&!s.hasClass(r,u)||s.removeClass(l,u)});const c=s.getAttribs(l);for(let u=0;u<c.length;u++){const m=c[u].nodeName;if(!a.isAttributeInternal(m))return mr.keep()}}return e.remove!=="none"?(Ey(t,l,e),mr.removed()):mr.keep()},VR=(t,e,n,o)=>Sy(t,e,n,o,o).fold(Y(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),Y(null)),Ny=(t,e,n,o,r)=>{(o||t.selection.isEditable())&&((s,a,i,l,d)=>{const c=s.formatter.get(a),u=c[0],m=s.dom,p=s.selection,f=y=>{const E=((w,x,S,_,O)=>{let D;return x.parentNode&&U(Wi(w.dom,x.parentNode).reverse(),k=>{if(!D&&nt(k)&&k.id!=="_start"&&k.id!=="_end"){const N=Un(w,k,S,_,O);N&&N.split!==!1&&(D=k)}}),D})(s,y,a,i,d);return((w,x,S,_,O,D,k,N)=>{var T,F;let j,z;const J=w.dom;if(S){const ot=S.parentNode;for(let rt=_.parentNode;rt&&rt!==ot;rt=rt.parentNode){let it=J.clone(rt,!1);for(let K=0;K<x.length&&(it=VR(w,x[K],N,it),it!==null);K++);it&&(j&&it.appendChild(j),z||(z=it),j=it)}k.mixed&&J.isBlock(S)||(_=(T=J.split(S,_))!==null&&T!==void 0?T:_),j&&z&&((F=O.parentNode)===null||F===void 0||F.insertBefore(j,O),z.appendChild(O),te(k)&&py(w,k,0,j))}return _})(s,c,E,y,y,0,u,i)},h=y=>Ht(c,E=>Sa(s,E,i,y,y)),g=y=>{const E=ze(y.childNodes),w=h(y)||Ht(c,S=>ml(m,y,S)),x=y.parentNode;if(!w&&W(x)&&Jc(u)&&h(x),u.deep&&E.length)for(let S=0;S<E.length;S++)g(E[S]);U(["underline","line-through","overline"],S=>{nt(y)&&s.dom.getStyle(y,"text-decoration")===S&&y.parentNode&&Kb(m,y.parentNode)===S&&Sa(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:S}},void 0,y)})},b=y=>{const E=m.get(y?"_start":"_end");if(E){let w=E[y?"firstChild":"lastChild"];return(x=>Xe(x)&&nt(x)&&(x.id==="_start"||x.id==="_end"))(w)&&(w=w[y?"firstChild":"lastChild"]),H(w)&&w.data.length===0&&(w=y?E.previousSibling||E.nextSibling:E.nextSibling||E.previousSibling),m.remove(E,!0),w}return null},v=y=>{let E,w,x=ar(m,y,c,y.collapsed);if(u.split){if(x=nl(x),E=yy(s,x,!0),w=yy(s,x),E!==w){if(E=Cy(E,!0),w=Cy(w,!1),vy(m,E,w)){const _=C.from(E.firstChild).getOr(E);return f(wy(m,_,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void b(!0)}if(vy(m,w,E)){const _=C.from(w.lastChild).getOr(w);return f(wy(m,_,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void b(!1)}E=nm(m,E,"span",{id:"_start","data-mce-type":"bookmark"}),w=nm(m,w,"span",{id:"_end","data-mce-type":"bookmark"});const S=m.createRng();S.setStartAfter(E),S.setEndBefore(w),ga(m,S,_=>{U(_,O=>{Xe(O)||Xe(O.parentNode)||f(O)})}),f(E),f(w),E=b(!0),w=b()}else E=w=f(E);x.startContainer=E.parentNode?E.parentNode:E,x.startOffset=m.nodeIndex(E),x.endContainer=w.parentNode?w.parentNode:w,x.endOffset=m.nodeIndex(w)+1}ga(m,x,S=>{U(S,g)})};if(l){if(fa(l)){const y=m.createRng();y.setStartBefore(l),y.setEndAfter(l),v(y)}else v(l);$h(s,a,l,i)}else p.isCollapsed()&&te(u)&&!Gr(s).length?HR(s,a,i,d):(Vb(s,()=>Wc(s,v),y=>te(u)&&Yu(s,a,i,y)),s.nodeChanged()),((y,E,w)=>{E==="removeformat"?U(my(y.selection),x=>{U(iy,S=>y.dom.setStyle(x,S,"")),ky(y.dom,x)}):ly(y.formatter,E).each(x=>{U(my(y.selection),S=>_y(y.dom,S,x,w,null))})})(s,a,i),$h(s,a,l,i)})(t,e,n,o,r)},Sa=(t,e,n,o,r)=>Sy(t,e,n,o,r).fold(jt,s=>(t.dom.rename(o,s),!0),Wt),Ry=$.each,gl=$.each,Ay=(t,e,n,o)=>{if(gl(n.styles,(r,s)=>{t.setStyle(e,s,So(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},qR=(t,e,n,o)=>{const r=t.formatter.get(e),s=r[0],a=!o&&t.selection.isCollapsed(),i=t.dom,l=t.selection,d=(f,h=s)=>{Nt(h.onformat)&&h.onformat(f,h,n,o),Ay(i,f,h,n),gl(h.attributes,(g,b)=>{i.setAttrib(f,b,So(g,n))}),gl(h.classes,g=>{const b=So(g,n);i.hasClass(f,b)||i.addClass(f,b)})},c=(f,h)=>{let g=!1;return gl(f,b=>!(!Ze(b)||(i.getContentEditable(h)!=="false"||b.ceFalseOverride)&&(!W(b.collapsed)||b.collapsed===a)&&i.is(h,b.selector)&&!Ge(h)&&(d(h,b),g=!0,1))),g},u=f=>{if(st(f)){const h=i.create(f);return d(h),h}return null},m=(f,h,g)=>{const b=[];let v=!0;const y=s.inline||s.block,E=u(y);ga(f,h,w=>{let x;const S=_=>{let O=!1,D=v,k=!1;const N=_.parentNode,T=N.nodeName.toLowerCase(),F=f.getContentEditable(_);W(F)&&(D=v,v=F==="true",O=!0,k=Wb(t,_));const j=v&&!O;if($t(_)&&!((z,J,ot,rt)=>{if(OS(z)&&te(J)&&ot.parentNode){const it=zp(z.schema),K=d_(R(ot),tt=>Ge(tt.dom));return kr(it,rt)&&to(z.schema,ot.parentNode,{skipBogus:!1,includeZwsp:!0})&&!K}return!1})(t,s,_,T))return x=null,void(Fn(s)&&f.remove(_));if((z=>(J=>Fn(J)&&J.wrapper===!0)(s)&&Un(t,z,e,n))(_))x=null;else{if(((z,J,ot)=>{const rt=(it=>Fn(it)&&it.wrapper!==!0)(s)&&Yc(t.schema,z)&&Xr(t,J,y);return ot&&rt})(_,T,j)){const z=f.rename(_,y);return d(z),b.push(z),void(x=null)}if(Ze(s)){let z=c(r,_);if(!z&&W(N)&&Jc(s)&&(z=c(r,N)),!te(s)||z)return void(x=null)}W(E)&&((z,J,ot,rt)=>{const it=z.nodeName.toLowerCase(),K=Xr(t,y,it)&&Xr(t,J,y),tt=!g&&H(z)&&Ni(z.data),A=Ge(z),B=!te(s)||!f.isBlock(z);return(ot||rt)&&K&&!tt&&!A&&B})(_,T,j,k)?(x||(x=f.clone(E,!1),N.insertBefore(x,_),b.push(x)),k&&O&&(v=D),x.appendChild(_)):(x=null,U(ze(_.childNodes),S),O&&(v=D),x=null)}};U(w,S)}),s.links===!0&&U(b,w=>{const x=S=>{S.nodeName==="A"&&d(S,s),U(ze(S.childNodes),x)};x(w)}),U(b,w=>{const x=(S=>{let _=0;return U(S.childNodes,O=>{(D=>W(D)&&H(D)&&D.length===0)(O)||Xe(O)||_++}),_})(w);!(b.length>1)&&f.isBlock(w)||x!==0?(te(s)||Fn(s)&&s.wrapper)&&(s.exact||x!==1||(w=(S=>Zt(S.childNodes,Kc).filter(O=>f.getContentEditable(O)!=="false"&&ml(f,O,s)).map(O=>{const D=f.clone(O,!1);return d(D),f.replace(D,S,!0),f.remove(O,!0),D}).getOr(S))(w)),((S,_,O,D)=>{Ry(_,k=>{te(k)&&Ry(S.dom.select(k.inline,D),N=>{Ju(N)&&Sa(S,k,O,N,k.exact?N:null)}),((N,T,F)=>{if(T.clear_child_styles){const j=T.links?"*:not(a)":"*";Qu(N.select(j,F),z=>{Ju(z)&&N.isEditable(z)&&Qu(T.styles,(J,ot)=>{N.setStyle(z,ot,"")})})}})(S.dom,k,D)})})(t,r,n,w),((S,_,O,D,k)=>{const N=k.parentNode;Un(S,N,O,D)&&Sa(S,_,D,k)||_.merge_with_parents&&N&&S.dom.getParent(N,T=>!!Un(S,T,O,D)&&(Sa(S,_,D,k),!0))})(t,s,e,n,w),((S,_,O,D)=>{if(_.styles&&_.styles.backgroundColor){const k=hy(S,"fontSize");tm(D,N=>k(N)&&S.isEditable(N),by(S,"backgroundColor",So(_.styles.backgroundColor,O)))}})(f,s,n,w),((S,_,O,D)=>{const k=N=>{if(Jn(N)&&nt(N.parentNode)&&S.isEditable(N)){const T=Kb(S,N.parentNode);S.getStyle(N,"color")&&T?S.setStyle(N,"text-decoration",T):S.getStyle(N,"text-decoration")===T&&S.setStyle(N,"text-decoration",null)}};_.styles&&(_.styles.color||_.styles.textDecoration)&&($.walk(D,k,"childNodes"),k(D))})(f,s,0,w),((S,_,O,D)=>{if(te(_)&&(_.inline==="sub"||_.inline==="sup")){const k=hy(S,"fontSize");tm(D,T=>k(T)&&S.isEditable(T),by(S,"fontSize",""));const N=ft(S.select(_.inline==="sup"?"sub":"sup",D),S.isEditable);S.remove(N,!0)}})(f,s,0,w),py(t,s,0,w)):f.remove(w,!0)})},p=fa(o)?o:l.getNode();if(i.getContentEditable(p)==="false"&&!Wb(t,p))return c(r,o=p),void Hh(t,e,o,n);if(s){if(o)if(fa(o)){if(!c(r,o)){const f=i.createRng();f.setStartBefore(o),f.setEndAfter(o),m(i,ar(i,f,r),!0)}}else m(i,o,!0);else a&&te(s)&&!Gr(t).length?((f,h,g)=>{let b;const v=f.selection,y=f.formatter.get(h);if(!y)return;const E=v.getRng();let w=E.startOffset;const x=E.startContainer.nodeValue;b=rr(f.getBody(),v.getStart());const S=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&w>0&&w<x.length&&S.test(x.charAt(w))&&S.test(x.charAt(w-1))){const D=v.getBookmark();E.collapse(!0);let k=ar(f.dom,E,y);k=nl(k),f.formatter.apply(h,g,k),v.moveToBookmark(D)}else{let D=b?Qv(b):null;b&&D?.data===ka||(_=f.getDoc(),O=Gu(!0).dom,b=_.importNode(O,!0),D=b.firstChild,E.insertNode(b),w=1,ny(f,b)),f.formatter.apply(h,g,b),v.setCursorLocation(D,w)}var _,O})(t,e,n):(l.setRng(ju(l.getRng())),Vb(t,()=>{Wc(t,(f,h)=>{const g=h?f:ar(i,f,r);m(i,g,!1)})},Wt),t.nodeChanged()),ly(t.formatter,e).each(f=>{U((h=>ft((g=>{const b=g.getSelectedBlocks(),v=g.getRng();if(g.isCollapsed())return[];if(b.length===1)return dy(v,b[0])&&cy(v,b[0])?b:[];{const y=Re(b).filter(x=>dy(v,x)).toArray(),E=go(b).filter(x=>cy(v,x)).toArray(),w=b.slice(1,-1);return y.concat(w).concat(E)}})(h),uy(h.dom)))(t.selection),h=>Ay(i,h,f,n))});((f,h)=>{pt(_a,f)&&U(_a[f],g=>{g(h)})})(e,t)}Hh(t,e,o,n)},Ty=(t,e,n,o)=>{(o||t.selection.isEditable())&&qR(t,e,n,o)},Oy=t=>pt(t,"vars"),By=t=>t.selection.getStart(),Py=(t,e,n,o,r)=>ig(e,s=>{const a=t.formatter.matchNode(s,n,r??{},o);return!le(a)},s=>!!Xv(t,s,n)||!o&&W(t.formatter.matchNode(s,n,r,!0))),Dy=(t,e)=>{const n=e??By(t);return ft(Wi(t.dom,n),o=>nt(o)&&!Vo(o))},Ly=(t,e,n)=>{const o=Dy(t,e);Dt(n,(r,s)=>{const a=i=>{const l=Py(t,o,s,i.similar,Oy(i)?i.vars:void 0),d=l.isSome();if(i.state.get()!==d){i.state.set(d);const c=l.getOr(e);Oy(i)?i.callback(d,{node:c,format:s,parents:o}):U(i.callbacks,u=>u(d,{node:c,format:s,parents:o}))}};U([r.withSimilar,r.withoutSimilar],a),U(r.withVars,a)})},My=$.explode,Iy=()=>{const t={};return{addFilter:(e,n)=>{U(My(e),o=>{pt(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>yd(t),removeFilter:(e,n)=>{U(My(e),o=>{if(pt(t,o))if(W(n)){const r=t[o],s=ft(r.callbacks,a=>a!==n);s.length>0?r.callbacks=s:delete t[o]}else delete t[o]})}}},WR=(t,e,n)=>{var o;const r=sc();e.convert_fonts_to_spans&&((s,a,i)=>{s.addNodeFilter("font",l=>{U(l,d=>{const c=a.parse(d.attr("style")),u=d.attr("color"),m=d.attr("face"),p=d.attr("size");u&&(c.color=u),m&&(c["font-family"]=m),p&&si(p).each(f=>{c["font-size"]=i[f-1]}),d.name="span",d.attr("style",a.serialize(c)),((f,h)=>{U(["color","face","size"],g=>{f.attr(g,null)})})(d)})})})(t,r,$.explode((o=e.font_size_legacy_values)!==null&&o!==void 0?o:"")),((s,a,i)=>{s.addNodeFilter("strike",l=>{const d=a.type!=="html4";U(l,c=>{if(d)c.name="s";else{const u=i.parse(c.attr("style"));u["text-decoration"]="line-through",c.name="span",c.attr("style",i.serialize(u))}})})})(t,n,r)},om=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const s=r[2]===";base64",a=(l=>{try{return decodeURIComponent(l)}catch{return l}})(o),i=s?(l=>{const d=/([a-z0-9+\/=\s]+)/i.exec(l);return d?d[1]:""})(a):a;return C.some({type:r[1],data:i,base64Encoded:s})}return C.none()},Fy=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch{return C.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return C.some(new Blob([r],{type:t}))},Uy=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n((r=o.error)===null||r===void 0?void 0:r.message)},o.readAsDataURL(t)});let KR=0;const zy=(t,e,n)=>om(t).bind(({data:o,type:r,base64Encoded:s})=>{if(e&&!s)return C.none();{const a=s?o:btoa(o);return n(a,r)}}),jy=(t,e,n)=>{const o=t.create("blobid"+KR++,e,n);return t.add(o),o},Hy=(t,e,n=!1)=>zy(e,n,(o,r)=>C.from(t.getByData(o,r)).orThunk(()=>Fy(r,o).map(s=>jy(t,s,o)))),YR=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,GR=t=>C.from(t.match(YR)).bind(e=>_s(e,1)).map(e=>Qt(e,"www.")?e.substring(4):e),$y=(t,e)=>{C.from(t.attr("src")).bind(GR).forall(n=>!_t(e,n))&&t.attr("sandbox","")},rm=(t,e)=>Qt(t,`${e}/`),{entries:Vy,setPrototypeOf:qy,isFrozen:XR,getPrototypeOf:ZR,getOwnPropertyDescriptor:QR}=Object;let{freeze:Fe,seal:cn,create:Wy}=Object,{apply:sm,construct:am}=typeof Reflect<"u"&&Reflect;Fe||(Fe=function(t){return t}),cn||(cn=function(t){return t}),sm||(sm=function(t,e,n){return t.apply(e,n)}),am||(am=function(t,e){return new t(...e)});const pl=tn(Array.prototype.forEach),Ky=tn(Array.prototype.pop),Na=tn(Array.prototype.push),hl=tn(String.prototype.toLowerCase),im=tn(String.prototype.toString),Yy=tn(String.prototype.match),Ra=tn(String.prototype.replace),JR=tn(String.prototype.indexOf),tA=tn(String.prototype.trim),En=tn(Object.prototype.hasOwnProperty),Ue=tn(RegExp.prototype.test),Aa=(Gy=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return am(Gy,e)});var Gy;function tn(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return sm(t,e,o)}}function Rt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hl;qy&&qy(t,null);let o=e.length;for(;o--;){let r=e[o];if(typeof r=="string"){const s=n(r);s!==r&&(XR(e)||(e[o]=s),r=s)}t[r]=!0}return t}function eA(t){for(let e=0;e<t.length;e++)En(t,e)||(t[e]=null);return t}function fr(t){const e=Wy(null);for(const[n,o]of Vy(t))En(t,n)&&(Array.isArray(o)?e[n]=eA(o):o&&typeof o=="object"&&o.constructor===Object?e[n]=fr(o):e[n]=o);return e}function Ta(t,e){for(;t!==null;){const n=QR(t,e);if(n){if(n.get)return tn(n.get);if(typeof n.value=="function")return tn(n.value)}t=ZR(t)}return function(){return null}}const Xy=Fe(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),lm=Fe(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),dm=Fe(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nA=Fe(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cm=Fe(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),oA=Fe(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Zy=Fe(["#text"]),Qy=Fe(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),um=Fe(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Jy=Fe(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bl=Fe(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),rA=cn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),sA=cn(/<%[\w\W]*|[\w\W]*%>/gm),aA=cn(/\${[\w\W]*}/gm),iA=cn(/^data-[\-\w.\u00B7-\uFFFF]/),lA=cn(/^aria-[\-\w]+$/),tC=cn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),dA=cn(/^(?:\w+script|data):/i),cA=cn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),eC=cn(/^html$/i),uA=cn(/^[a-z][.\w]*(-[.\w]+)+$/i);var nC=Object.freeze({__proto__:null,MUSTACHE_EXPR:rA,ERB_EXPR:sA,TMPLIT_EXPR:aA,DATA_ATTR:iA,ARIA_ATTR:lA,IS_ALLOWED_URI:tC,IS_SCRIPT_OR_DATA:dA,ATTR_WHITESPACE:cA,DOCTYPE_NAME:eC,CUSTOM_ELEMENT:uA});const mA=function(){return typeof window>"u"?null:window};var mm=function t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mA();const n=P=>t(P);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;let{document:o}=e;const r=o,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:d,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:m,DOMParser:p,trustedTypes:f}=e,h=d.prototype,g=Ta(h,"cloneNode"),b=Ta(h,"remove"),v=Ta(h,"nextSibling"),y=Ta(h,"childNodes"),E=Ta(h,"parentNode");if(typeof i=="function"){const P=o.createElement("template");P.content&&P.content.ownerDocument&&(o=P.content.ownerDocument)}let w,x="";const{implementation:S,createNodeIterator:_,createDocumentFragment:O,getElementsByTagName:D}=o,{importNode:k}=r;let N={};n.isSupported=typeof Vy=="function"&&typeof E=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:T,ERB_EXPR:F,TMPLIT_EXPR:j,DATA_ATTR:z,ARIA_ATTR:J,IS_SCRIPT_OR_DATA:ot,ATTR_WHITESPACE:rt,CUSTOM_ELEMENT:it}=nC;let{IS_ALLOWED_URI:K}=nC,tt=null;const A=Rt({},[...Xy,...lm,...dm,...cm,...Zy]);let B=null;const M=Rt({},[...Qy,...um,...Jy,...bl]);let L=Object.seal(Wy(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,V=null,at=!0,lt=!0,gt=!1,Mt=!0,It=!1,qe=!0,X=!1,ht=!1,yt=!1,mt=!1,xt=!1,Ot=!1,G=!0,dt=!1,At=!0,Tt=!1,qt={},ue=null;const kn=Rt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let we=null;const rn=Rt({},["audio","video","img","source","image","track"]);let ee=null;const wr=Rt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Do="http://www.w3.org/1998/Math/MathML",$n="http://www.w3.org/2000/svg",sn="http://www.w3.org/1999/xhtml";let Lo=sn,co=!1,Vn=null;const ud=Rt({},[Do,$n,sn],im);let Pe=null;const vs=["application/xhtml+xml","text/html"];let Kt=null,uo=null;const oP=o.createElement("form"),yk=function(P){return P instanceof RegExp||P instanceof Function},Xf=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!uo||uo!==P){if(P&&typeof P=="object"||(P={}),P=fr(P),Pe=vs.indexOf(P.PARSER_MEDIA_TYPE)===-1?"text/html":P.PARSER_MEDIA_TYPE,Kt=Pe==="application/xhtml+xml"?im:hl,tt=En(P,"ALLOWED_TAGS")?Rt({},P.ALLOWED_TAGS,Kt):A,B=En(P,"ALLOWED_ATTR")?Rt({},P.ALLOWED_ATTR,Kt):M,Vn=En(P,"ALLOWED_NAMESPACES")?Rt({},P.ALLOWED_NAMESPACES,im):ud,ee=En(P,"ADD_URI_SAFE_ATTR")?Rt(fr(wr),P.ADD_URI_SAFE_ATTR,Kt):wr,we=En(P,"ADD_DATA_URI_TAGS")?Rt(fr(rn),P.ADD_DATA_URI_TAGS,Kt):rn,ue=En(P,"FORBID_CONTENTS")?Rt({},P.FORBID_CONTENTS,Kt):kn,q=En(P,"FORBID_TAGS")?Rt({},P.FORBID_TAGS,Kt):{},V=En(P,"FORBID_ATTR")?Rt({},P.FORBID_ATTR,Kt):{},qt=!!En(P,"USE_PROFILES")&&P.USE_PROFILES,at=P.ALLOW_ARIA_ATTR!==!1,lt=P.ALLOW_DATA_ATTR!==!1,gt=P.ALLOW_UNKNOWN_PROTOCOLS||!1,Mt=P.ALLOW_SELF_CLOSE_IN_ATTR!==!1,It=P.SAFE_FOR_TEMPLATES||!1,qe=P.SAFE_FOR_XML!==!1,X=P.WHOLE_DOCUMENT||!1,mt=P.RETURN_DOM||!1,xt=P.RETURN_DOM_FRAGMENT||!1,Ot=P.RETURN_TRUSTED_TYPE||!1,yt=P.FORCE_BODY||!1,G=P.SANITIZE_DOM!==!1,dt=P.SANITIZE_NAMED_PROPS||!1,At=P.KEEP_CONTENT!==!1,Tt=P.IN_PLACE||!1,K=P.ALLOWED_URI_REGEXP||tC,Lo=P.NAMESPACE||sn,L=P.CUSTOM_ELEMENT_HANDLING||{},P.CUSTOM_ELEMENT_HANDLING&&yk(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(L.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&yk(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(L.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(L.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),It&&(lt=!1),xt&&(mt=!0),qt&&(tt=Rt({},Zy),B=[],qt.html===!0&&(Rt(tt,Xy),Rt(B,Qy)),qt.svg===!0&&(Rt(tt,lm),Rt(B,um),Rt(B,bl)),qt.svgFilters===!0&&(Rt(tt,dm),Rt(B,um),Rt(B,bl)),qt.mathMl===!0&&(Rt(tt,cm),Rt(B,Jy),Rt(B,bl))),P.ADD_TAGS&&(tt===A&&(tt=fr(tt)),Rt(tt,P.ADD_TAGS,Kt)),P.ADD_ATTR&&(B===M&&(B=fr(B)),Rt(B,P.ADD_ATTR,Kt)),P.ADD_URI_SAFE_ATTR&&Rt(ee,P.ADD_URI_SAFE_ATTR,Kt),P.FORBID_CONTENTS&&(ue===kn&&(ue=fr(ue)),Rt(ue,P.FORBID_CONTENTS,Kt)),At&&(tt["#text"]=!0),X&&Rt(tt,["html","head","body"]),tt.table&&(Rt(tt,["tbody"]),delete q.tbody),P.TRUSTED_TYPES_POLICY){if(typeof P.TRUSTED_TYPES_POLICY.createHTML!="function")throw Aa('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof P.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Aa('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=P.TRUSTED_TYPES_POLICY,x=w.createHTML("")}else w===void 0&&(w=function(bt,ut){if(typeof bt!="object"||typeof bt.createPolicy!="function")return null;let Bt=null;const zt="data-tt-policy-suffix";ut&&ut.hasAttribute(zt)&&(Bt=ut.getAttribute(zt));const St="dompurify"+(Bt?"#"+Bt:"");try{return bt.createPolicy(St,{createHTML:fe=>fe,createScriptURL:fe=>fe})}catch{return console.warn("TrustedTypes policy "+St+" could not be created."),null}}(f,s)),w!==null&&typeof x=="string"&&(x=w.createHTML(""));Fe&&Fe(P),uo=P}},Ck=Rt({},["mi","mo","mn","ms","mtext"]),wk=Rt({},["annotation-xml"]),rP=Rt({},["title","style","font","a","script"]),Ek=Rt({},[...lm,...dm,...nA]),xk=Rt({},[...cm,...oA]),qn=function(P){Na(n.removed,{element:P});try{E(P).removeChild(P)}catch{b(P)}},Qa=function(P,bt){try{Na(n.removed,{attribute:bt.getAttributeNode(P),from:bt})}catch{Na(n.removed,{attribute:null,from:bt})}if(bt.removeAttribute(P),P==="is"&&!B[P])if(mt||xt)try{qn(bt)}catch{}else try{bt.setAttribute(P,"")}catch{}},kk=function(P){let bt=null,ut=null;if(yt)P="<remove></remove>"+P;else{const St=Yy(P,/^[\r\n\t ]+/);ut=St&&St[0]}Pe==="application/xhtml+xml"&&Lo===sn&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");const Bt=w?w.createHTML(P):P;if(Lo===sn)try{bt=new p().parseFromString(Bt,Pe)}catch{}if(!bt||!bt.documentElement){bt=S.createDocument(Lo,"template",null);try{bt.documentElement.innerHTML=co?x:Bt}catch{}}const zt=bt.body||bt.documentElement;return P&&ut&&zt.insertBefore(o.createTextNode(ut),zt.childNodes[0]||null),Lo===sn?D.call(bt,X?"html":"body")[0]:X?bt.documentElement:zt},_k=function(P){return _.call(P.ownerDocument||P,P,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Sk=function(P){return P instanceof m&&(typeof P.nodeName!="string"||typeof P.textContent!="string"||typeof P.removeChild!="function"||!(P.attributes instanceof u)||typeof P.removeAttribute!="function"||typeof P.setAttribute!="function"||typeof P.namespaceURI!="string"||typeof P.insertBefore!="function"||typeof P.hasChildNodes!="function")},Nk=function(P){return typeof l=="function"&&P instanceof l},mo=function(P,bt,ut){N[P]&&pl(N[P],Bt=>{Bt.call(n,bt,ut,uo)})},Rk=function(P){let bt=null;if(mo("beforeSanitizeElements",P,null),Sk(P))return qn(P),!0;const ut=Kt(P.nodeName);if(mo("uponSanitizeElement",P,{tagName:ut,allowedTags:tt}),P.hasChildNodes()&&!Nk(P.firstElementChild)&&Ue(/<[/\w]/g,P.innerHTML)&&Ue(/<[/\w]/g,P.textContent)||P.nodeType===7||qe&&P.nodeType===8&&Ue(/<[/\w]/g,P.data))return qn(P),!0;if(!tt[ut]||q[ut]){if(!q[ut]&&Tk(ut)&&(L.tagNameCheck instanceof RegExp&&Ue(L.tagNameCheck,ut)||L.tagNameCheck instanceof Function&&L.tagNameCheck(ut)))return!1;if(At&&!ue[ut]){const Bt=E(P)||P.parentNode,zt=y(P)||P.childNodes;if(zt&&Bt)for(let St=zt.length-1;St>=0;--St){const fe=g(zt[St],!0);fe.__removalCount=(P.__removalCount||0)+1,Bt.insertBefore(fe,v(P))}}return qn(P),!0}return P instanceof d&&!function(Bt){let zt=E(Bt);zt&&zt.tagName||(zt={namespaceURI:Lo,tagName:"template"});const St=hl(Bt.tagName),fe=hl(zt.tagName);return!!Vn[Bt.namespaceURI]&&(Bt.namespaceURI===$n?zt.namespaceURI===sn?St==="svg":zt.namespaceURI===Do?St==="svg"&&(fe==="annotation-xml"||Ck[fe]):!!Ek[St]:Bt.namespaceURI===Do?zt.namespaceURI===sn?St==="math":zt.namespaceURI===$n?St==="math"&&wk[fe]:!!xk[St]:Bt.namespaceURI===sn?!(zt.namespaceURI===$n&&!wk[fe])&&!(zt.namespaceURI===Do&&!Ck[fe])&&!xk[St]&&(rP[St]||!Ek[St]):!(Pe!=="application/xhtml+xml"||!Vn[Bt.namespaceURI]))}(P)?(qn(P),!0):ut!=="noscript"&&ut!=="noembed"&&ut!=="noframes"||!Ue(/<\/no(script|embed|frames)/i,P.innerHTML)?(It&&P.nodeType===3&&(bt=P.textContent,pl([T,F,j],Bt=>{bt=Ra(bt,Bt," ")}),P.textContent!==bt&&(Na(n.removed,{element:P.cloneNode()}),P.textContent=bt)),mo("afterSanitizeElements",P,null),!1):(qn(P),!0)},Ak=function(P,bt,ut){if(G&&(bt==="id"||bt==="name")&&(ut in o||ut in oP))return!1;if(!(lt&&!V[bt]&&Ue(z,bt))){if(!(at&&Ue(J,bt))){if(!B[bt]||V[bt]){if(!(Tk(P)&&(L.tagNameCheck instanceof RegExp&&Ue(L.tagNameCheck,P)||L.tagNameCheck instanceof Function&&L.tagNameCheck(P))&&(L.attributeNameCheck instanceof RegExp&&Ue(L.attributeNameCheck,bt)||L.attributeNameCheck instanceof Function&&L.attributeNameCheck(bt))||bt==="is"&&L.allowCustomizedBuiltInElements&&(L.tagNameCheck instanceof RegExp&&Ue(L.tagNameCheck,ut)||L.tagNameCheck instanceof Function&&L.tagNameCheck(ut))))return!1}else if(!ee[bt]){if(!Ue(K,Ra(ut,rt,""))){if((bt!=="src"&&bt!=="xlink:href"&&bt!=="href"||P==="script"||JR(ut,"data:")!==0||!we[P])&&!(gt&&!Ue(ot,Ra(ut,rt,"")))){if(ut)return!1}}}}}return!0},Tk=function(P){return P!=="annotation-xml"&&Yy(P,it)},Ok=function(P){mo("beforeSanitizeAttributes",P,null);const{attributes:bt}=P;if(!bt)return;const ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B};let Bt=bt.length;for(;Bt--;){const zt=bt[Bt],{name:St,namespaceURI:fe,value:fo}=zt,Wn=Kt(St);let Ne=St==="value"?fo:tA(fo);const aP=Ne;if(ut.attrName=Wn,ut.attrValue=Ne,ut.keepAttr=!0,ut.forceKeepAttr=void 0,mo("uponSanitizeAttribute",P,ut),Ne=ut.attrValue,ut.forceKeepAttr)continue;if(!ut.keepAttr){Qa(St,P);continue}if(!Mt&&Ue(/\/>/i,Ne)){Qa(St,P);continue}It&&pl([T,F,j],Pk=>{Ne=Ra(Ne,Pk," ")});const Bk=Kt(P.nodeName);if(Ak(Bk,Wn,Ne))if(!dt||Wn!=="id"&&Wn!=="name"||(Qa(St,P),Ne="user-content-"+Ne),qe&&Ue(/((--!?|])>)|<\/(style|title)/i,Ne))Qa(St,P);else{if(w&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!fe)switch(f.getAttributeType(Bk,Wn)){case"TrustedHTML":Ne=w.createHTML(Ne);break;case"TrustedScriptURL":Ne=w.createScriptURL(Ne)}if(Ne!==aP)try{fe?P.setAttributeNS(fe,St,Ne):P.setAttribute(St,Ne),Sk(P)?qn(P):Ky(n.removed)}catch{}}else Qa(St,P)}mo("afterSanitizeAttributes",P,null)},sP=function P(bt){let ut=null;const Bt=_k(bt);for(mo("beforeSanitizeShadowDOM",bt,null);ut=Bt.nextNode();)mo("uponSanitizeShadowNode",ut,null),Rk(ut)||(ut.content instanceof a&&P(ut.content),Ok(ut));mo("afterSanitizeShadowDOM",bt,null)};return n.sanitize=function(P){let bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ut=null,Bt=null,zt=null,St=null;if(co=!P,co&&(P="<!-->"),typeof P!="string"&&!Nk(P)){if(typeof P.toString!="function")throw Aa("toString is not a function");if(typeof(P=P.toString())!="string")throw Aa("dirty is not a string, aborting")}if(!n.isSupported)return P;if(ht||Xf(bt),n.removed=[],typeof P=="string"&&(Tt=!1),Tt){if(P.nodeName){const Wn=Kt(P.nodeName);if(!tt[Wn]||q[Wn])throw Aa("root node is forbidden and cannot be sanitized in-place")}}else if(P instanceof l)ut=kk("<!---->"),Bt=ut.ownerDocument.importNode(P,!0),Bt.nodeType===1&&Bt.nodeName==="BODY"||Bt.nodeName==="HTML"?ut=Bt:ut.appendChild(Bt);else{if(!mt&&!It&&!X&&P.indexOf("<")===-1)return w&&Ot?w.createHTML(P):P;if(ut=kk(P),!ut)return mt?null:Ot?x:""}ut&&yt&&qn(ut.firstChild);const fe=_k(Tt?P:ut);for(;zt=fe.nextNode();)Rk(zt)||(zt.content instanceof a&&sP(zt.content),Ok(zt));if(Tt)return P;if(mt){if(xt)for(St=O.call(ut.ownerDocument);ut.firstChild;)St.appendChild(ut.firstChild);else St=ut;return(B.shadowroot||B.shadowrootmode)&&(St=k.call(r,St,!0)),St}let fo=X?ut.outerHTML:ut.innerHTML;return X&&tt["!doctype"]&&ut.ownerDocument&&ut.ownerDocument.doctype&&ut.ownerDocument.doctype.name&&Ue(eC,ut.ownerDocument.doctype.name)&&(fo="<!DOCTYPE "+ut.ownerDocument.doctype.name+`>
`+fo),It&&pl([T,F,j],Wn=>{fo=Ra(fo,Wn," ")}),w&&Ot?w.createHTML(fo):fo},n.setConfig=function(){Xf(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),ht=!0},n.clearConfig=function(){uo=null,ht=!1},n.isValidAttribute=function(P,bt,ut){uo||Xf({});const Bt=Kt(P),zt=Kt(bt);return Ak(Bt,zt,ut)},n.addHook=function(P,bt){typeof bt=="function"&&(N[P]=N[P]||[],Na(N[P],bt))},n.removeHook=function(P){if(N[P])return Ky(N[P])},n.removeHooks=function(P){N[P]&&(N[P]=[])},n.removeAllHooks=function(){N={}},n}();const oC=$.each,fA=$.trim,gA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],pA={ftp:21,http:80,https:443,mailto:25},hA=["img","video"],rC=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?((r,s)=>W(r)?!r:!W(s)||!_t(hA,s))(t.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class un{static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=Yo.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!rC(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=e.protocol.indexOf("http")!==0&&e.protocol!=="file:"?(n=e.href)!==null&&n!==void 0?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(e,n={}){this.path="",this.directory="",e=fA(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=e.indexOf("//")===0;if(e.indexOf("/")!==0||s||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=o?o.path:new un(document.location.href).directory;if(o?.protocol==="")e="//mce_host"+r.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&oC(gA,(i,l)=>{let d=a[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),r[i]=d}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||r.host!=="mce_host"||(r.port=o.port),r.host&&r.host!=="mce_host"||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if(e==="./")return e;const n=new un(e,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const o=new un(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?pA[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length){for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}}if(i.length<l.length){for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}}if(s===1)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];oC(s,u=>{u&&i.push(u)});const l=[];for(let u=a.length-1;u>=0;u--)a[u].length!==0&&a[u]!=="."&&(a[u]!==".."?o>0?o--:l.push(a[u]):o++);const d=i.length-o;let c;return c=d<=0?ks(l).join("/"):i.slice(0,d).join("/")+"/"+ks(l).join("/"),c.indexOf("/")!==0&&(c="/"+c),r&&c.lastIndexOf("/")!==c.length-1&&(c+=r),c}getURI(e=!1){let n;return this.source&&!e||(n="",e||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const bA=$.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),fm="data-mce-type";let sC=0;const aC=(t,e,n,o,r)=>{var s,a,i,l;const d=e.validate,c=n.getSpecialElements();t.nodeType===8&&!e.allow_conditional_comments&&/^\[if/i.test((s=t.nodeValue)!==null&&s!==void 0?s:"")&&(t.nodeValue=" "+t.nodeValue);const u=(a=r?.tagName)!==null&&a!==void 0?a:t.nodeName.toLowerCase();if(o!=="html"&&n.isValid(o))return void(W(r)&&(r.allowedTags[u]=!0));if(t.nodeType!==1||u==="body")return;const m=R(t),p=Os(m,fm),f=He(m,"data-mce-bogus");if(!p&&st(f))return void(f==="all"?Ut(m):vo(m));const h=n.getElementRule(u);if(!d||h){if(W(r)&&(r.allowedTags[u]=!0),d&&h&&!p){if(U((i=h.attributesForced)!==null&&i!==void 0?i:[],g=>{de(m,g.name,g.value==="{$uid}"?"mce_"+sC++:g.value)}),U((l=h.attributesDefault)!==null&&l!==void 0?l:[],g=>{Os(m,g.name)||de(m,g.name,g.value==="{$uid}"?"mce_"+sC++:g.value)}),h.attributesRequired&&!Ht(h.attributesRequired,g=>Os(m,g))||h.removeEmptyAttrs&&(g=>{const b=g.dom.attributes;return b==null||b.length===0})(m))return void vo(m);h.outputName&&h.outputName!==u&&((g,b)=>{const v=((E,w)=>{const x=ne(w),S=zg(E);return Gn(x,S),x})(g,b);Qn(g,v);const y=he(g);Ho(v,y),Ut(g)})(m,h.outputName)}}else pt(c,u)?Ut(m):vo(m)},iC=(t,e,n,o,r,s)=>n!=="html"&&!qo(o)||!(r in bA&&rC(t,s,o))&&(!t.validate||e.isValid(o,r)||Qt(r,"data-")||Qt(r,"aria-")),lC=(t,e)=>t.hasAttribute(fm)&&(e==="id"||e==="class"||e==="style"),dC=(t,e)=>t in e.getBoolAttrs(),vA=(t,e,n,o)=>{const{attributes:r}=t;for(let s=r.length-1;s>=0;s--){const a=r[s],i=a.name,l=a.value;iC(e,n,o,t.tagName.toLowerCase(),i,l)||lC(t,i)?dC(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},yA=(t,e,n)=>{const o=mm();return o.addHook("uponSanitizeElement",(r,s)=>{aC(r,t,e,n.track(r),s)}),o.addHook("uponSanitizeAttribute",(r,s)=>{((a,i,l,d,c)=>{const u=a.tagName.toLowerCase(),{attrName:m,attrValue:p}=c;c.keepAttr=iC(i,l,d,u,m,p),c.keepAttr?(c.allowedAttributes[m]=!0,dC(m,l)&&(c.attrValue=m),i.allow_svg_data_urls&&Qt(p,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):lC(a,m)&&(c.forceKeepAttr=!0)})(r,t,e,n.current(),s)}),o},CA=t=>e=>{const n=Cp(e);if(n==="svg")(o=>{const r=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(a=>`xlink:${a}`),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:r};mm().sanitize(o,s)})(e);else{if(n!=="math")throw new Error("Not a namespace element");((o,r)=>{const s=mm();s.addHook("uponSanitizeElement",(a,i)=>{var l;const d=(l=i.tagName)!==null&&l!==void 0?l:a.nodeName.toLowerCase(),c=r.allow_mathml_annotation_encodings;if(d==="annotation"&&Vt(c)&&c.length>0){const u=a.getAttribute("encoding");st(u)&&_t(c,u)&&(i.allowedTags[d]=!0)}}),s.sanitize(o,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})})(e,t)}},cC=$.makeMap,uC=$.extend,mC=(t,e,n,o)=>{const r=t.name,s=r in n&&r!=="title"&&r!=="textarea"&&r!=="noscript",a=e.childNodes;for(let i=0,l=a.length;i<l;i++){const d=a[i],c=new _e(d.nodeName.toLowerCase(),d.nodeType);if(nt(d)){const u=d.attributes;for(let m=0,p=u.length;m<p;m++){const f=u[m];c.attr(f.name,f.value)}qo(c.name)&&(o(d),c.value=d.innerHTML)}else H(d)?(c.value=d.data,s&&(c.raw=!0)):(yo(d)||u_(d)||m_(d))&&(c.value=d.data);qo(c.name)||mC(c,d,n,o),t.append(c)}},ns=(t={},e=Co())=>{const n=Iy(),o=Iy(),r={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((h,g)=>{const b=(()=>{const v=eo(),y=()=>v.get().map(Cp).getOr("html");return{track:E=>(qd(E)?v.set(E):v.get().exists(w=>!w.contains(E))&&v.clear(),y()),current:y,reset:()=>{v.clear()}}})();if(h.sanitize){const v=yA(h,g,b);return{sanitizeHtmlElement:(E,w)=>{v.sanitize(E,((x,S)=>{const _={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1};return _.PARSER_MEDIA_TYPE=S,x.allow_script_urls?_.ALLOWED_URI_REGEXP=/.*/:x.allow_html_data_urls&&(_.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),_})(h,w)),v.removed=[],b.reset()},sanitizeNamespaceElement:CA(h)}}return{sanitizeHtmlElement:(v,y)=>{const E=document.createNodeIterator(v,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=E.nextNode();){const x=b.track(w);aC(w,h,g,x),nt(w)&&vA(w,h,g,x)}b.reset()},sanitizeNamespaceElement:vt}})(r,e),i=n.addFilter,l=n.getFilters,d=n.removeFilter,c=o.addFilter,u=o.getFilters,m=o.removeFilter,p=(h,g)=>{const b=st(g.attr(fm)),v=g.type===1&&!pt(h,g.name)&&!Zd(e,g)&&!qo(g.name);return g.type===3||v&&!b},f={schema:e,addAttributeFilter:c,getAttributeFilters:u,removeAttributeFilter:m,addNodeFilter:i,getNodeFilters:l,removeNodeFilter:d,parse:(h,g={})=>{var b;const v=r.validate,y=(b=g.context)!==null&&b!==void 0?b:r.root_name,E=((T,F,j="html")=>{const z=j==="xhtml"?"application/xhtml+xml":"text/html",J=pt(e.getSpecialElements(),F.toLowerCase()),ot=J?`<${F}>${T}</${F}>`:T,rt=s.parseFromString(j==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ot}</body></html>`:/^[\s]*<head/i.test(T)||/^[\s]*<html/i.test(T)||/^[\s]*<!DOCTYPE/i.test(T)?`<html>${ot}</html>`:`<body>${ot}</body>`,z).body;return a.sanitizeHtmlElement(rt,z),J?rt.firstChild:rt})(h,y,g.format);Kd(e,E);const w=new _e(y,11);mC(w,E,e.getSpecialElements(),a.sanitizeNamespaceElement),E.innerHTML="";const[x,S]=((T,F,j,z)=>{const J=j.validate,ot=F.getNonEmptyElements(),rt=F.getWhitespaceElements(),it=uC(cC("script,style,head,html,body,title,meta,param"),F.getBlockElements()),K=zp(F),tt=/[ \t\r\n]+/g,A=/^[ \t\r\n]+/,B=/[ \t\r\n]+$/,M=V=>{let at=V.parent;for(;W(at);){if(at.name in rt)return!0;at=at.parent}return!1},L=V=>V.name in it||Zd(F,V)||qo(V.name)&&V.parent===T,q=(V,at)=>{const lt=at?V.prev:V.next;return!W(lt)&&!Yt(V.parent)&&L(V.parent)&&(V.parent!==T||z.isRootContent===!0)};return[V=>{var at;if(V.type===3&&!M(V)){let lt=(at=V.value)!==null&&at!==void 0?at:"";lt=lt.replace(tt," "),(((gt,Mt)=>W(gt)&&(Mt(gt)||gt.name==="br"))(V.prev,L)||q(V,!0))&&(lt=lt.replace(A,"")),lt.length===0||lt===" "&&V.prev&&V.prev.type===8&&V.next&&V.next.type===8?V.remove():V.value=lt}},V=>{var at;if(V.type===1){const lt=F.getElementRule(V.name);if(J&&lt){const gt=xa(F,ot,rt,V);lt.paddInEmptyBlock&&gt&&(Mt=>{let It=Mt;for(;W(It);){if(It.name in K)return xa(F,ot,rt,It);It=It.parent}return!1})(V)?Iu(j,z,L,V):lt.removeEmpty&&gt?L(V)?V.remove():V.unwrap():lt.paddEmpty&&(gt||(Mt=>{var It;return Kv(Mt,"#text")&&((It=Mt?.firstChild)===null||It===void 0?void 0:It.value)===Jt})(V))&&Iu(j,z,L,V)}}else if(V.type===3&&!M(V)){let lt=(at=V.value)!==null&&at!==void 0?at:"";(V.next&&L(V.next)||q(V,!1))&&(lt=lt.replace(B,"")),lt.length===0?V.remove():V.value=lt}}]})(w,e,r,g),_=[],O=v?T=>((F,j)=>{zu(e,F)&&j.push(F)})(T,_):vt,D={nodes:{},attributes:{}},k=T=>Vv(l(),u(),T,D);if(((T,F,j)=>{const z=[];for(let J=T,ot=J;J;ot=J,J=J.walk()){const rt=J;U(F,it=>it(rt)),Yt(rt.parent)&&rt!==T?J=ot:z.push(rt)}for(let J=z.length-1;J>=0;J--){const ot=z[J];U(j,rt=>rt(ot))}})(w,[x,k],[S,O]),_.reverse(),v&&_.length>0)if(g.context){const{pass:T,fail:F}=Er(_,j=>j.parent===w);Uu(F,e,w,k),g.invalid=T.length>0}else Uu(_,e,w,k);const N=((T,F)=>{var j;const z=(j=F.forced_root_block)!==null&&j!==void 0?j:T.forced_root_block;return z===!1?"":z===!0?"p":z})(r,g);return N&&(w.name==="body"||g.isRootContent)&&((T,F)=>{const j=uC(cC("script,style,head,html,body,title,meta,param"),e.getBlockElements()),z=/^[ \t\r\n]+/,J=/[ \t\r\n]+$/;let ot=T.firstChild,rt=null;const it=K=>{var tt,A;K&&(ot=K.firstChild,ot&&ot.type===3&&(ot.value=(tt=ot.value)===null||tt===void 0?void 0:tt.replace(z,"")),ot=K.lastChild,ot&&ot.type===3&&(ot.value=(A=ot.value)===null||A===void 0?void 0:A.replace(J,"")))};if(e.isValidChild(T.name,F.toLowerCase())){for(;ot;){const K=ot.next;p(j,ot)?(rt||(rt=new _e(F,1),rt.attr(r.forced_root_block_attrs),T.insert(rt,ot)),rt.append(ot)):(it(rt),rt=null),ot=K}it(rt)}})(w,N),g.invalid||qv(D,g),w}};return((h,g)=>{var b,v;const y=h.schema;h.addAttributeFilter("href",S=>{let _=S.length;const O=D=>{const k=D?$.trim(D):"";return/\b(noopener)\b/g.test(k)?k:(N=>N.split(" ").filter(T=>T.length>0).concat(["noopener"]).sort().join(" "))(k)};if(!g.allow_unsafe_link_target)for(;_--;){const D=S[_];D.name==="a"&&D.attr("target")==="_blank"&&D.attr("rel",O(D.attr("rel")))}}),g.allow_html_in_named_anchor||h.addAttributeFilter("id,name",S=>{let _,O,D,k,N=S.length;for(;N--;)if(k=S[N],k.name==="a"&&k.firstChild&&!k.attr("href"))for(D=k.parent,_=k.lastChild;_&&D;)O=_.prev,D.insert(_,k),_=O}),g.fix_list_elements&&h.addNodeFilter("ul,ol",S=>{let _,O,D=S.length;for(;D--;)if(_=S[D],O=_.parent,O&&(O.name==="ul"||O.name==="ol"))if(_.prev&&_.prev.name==="li")_.prev.append(_);else{const k=new _e("li",1);k.attr("style","list-style-type: none"),_.wrap(k)}});const E=y.getValidClasses();g.validate&&E&&h.addAttributeFilter("class",S=>{var _;let O=S.length;for(;O--;){const D=S[O],k=(_=D.attr("class"))!==null&&_!==void 0?_:"",N=$.explode(k," ");let T="";for(let F=0;F<N.length;F++){const j=N[F];let z=!1,J=E["*"];J&&J[j]&&(z=!0),J=E[D.name],!z&&J&&J[j]&&(z=!0),z&&(T&&(T+=" "),T+=j)}T.length||(T=null),D.attr("class",T)}}),((S,_)=>{const{blob_cache:O}=_;if(O){const D=k=>{const N=k.attr("src");(T=>T.attr("src")===Et.transparentSrc||W(T.attr("data-mce-placeholder")))(k)||(T=>W(T.attr("data-mce-bogus")))(k)||Yt(N)||Hy(O,N,!0).each(T=>{k.attr("src",T.blobUri())})};S.addAttributeFilter("src",k=>U(k,D))}})(h,g);const w=(b=g.sandbox_iframes)!==null&&b!==void 0&&b,x=dg((v=g.sandbox_iframes_exclusions)!==null&&v!==void 0?v:[]);g.convert_unsafe_embeds&&h.addNodeFilter("object,embed",S=>U(S,_=>{_.replace((({type:O,src:D,width:k,height:N}={},T,F)=>{const j=(J=>le(J)?"iframe":rm(J,"image")?"img":rm(J,"video")?"video":rm(J,"audio")?"audio":"iframe")(O),z=new _e(j,1);return z.attr(j==="audio"?{src:D}:{src:D,width:k,height:N}),j!=="audio"&&j!=="video"||z.attr("controls",""),j==="iframe"&&T&&$y(z,F),z})({type:_.attr("type"),src:_.name==="object"?_.attr("data"):_.attr("src"),width:_.attr("width"),height:_.attr("height")},w,x))})),w&&h.addNodeFilter("iframe",S=>U(S,_=>$y(_,x)))})(f,r),((h,g,b)=>{g.inline_styles&&WR(h,g,b)})(f,r,e),f},fC=(t,e,n)=>{const o=(s=>ul(s)?No({validate:!1}).serialize(s):s)(t),r=e(o);if(r.isDefaultPrevented())return r;if(ul(t)){if(r.content!==o){const s=ns({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:t.name});return{...r,content:s}}return{...r,content:t}}return r},gC=t=>({sanitize:cb(t),sandbox_iframes:mb(t),sandbox_iframes_exclusions:Bc(t)}),pC=(t,e)=>{if(e.no_events)return Te.value(e);{const n=((o,r)=>o.dispatch("BeforeGetContent",r))(t,e);return n.isDefaultPrevented()?Te.error(qh(t,{content:"",...n}).content):Te.value(n)}},hC=(t,e,n)=>n.no_events?e:fC(e,r=>qh(t,{...n,content:r}),gC(t)).content,gm=(t,e)=>{if(e.no_events)return Te.value(e);{const n=fC(e.content,o=>((r,s)=>r.dispatch("BeforeSetContent",s))(t,{...e,content:o}),gC(t));return n.isDefaultPrevented()?(Vh(t,n),Te.error(void 0)):Te.value(n)}},pm=(t,e,n)=>{n.no_events||Vh(t,{...n,content:e})},hm=(t,e,n)=>({element:t,width:e,rows:n}),bC=(t,e)=>({element:t,cells:e}),wA=(t,e)=>({x:t,y:e}),vC=(t,e)=>Xn(t,e).bind(si).getOr(1),EA=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},yC=t=>De(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),CC=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(kt(r[s],e))return C.some(wA(s,o))}return C.none()},wC=(t,e,n,o,r)=>{const s=[],a=t.rows;for(let i=n;i<=r;i++){const l=a[i].cells,d=e<o?l.slice(e,o+1):l.slice(o,e+1);s.push(bC(a[i].element,d))}return s},xA=t=>((e,n)=>{const o=Zo(e.element),r=ne("tbody");return Ho(r,n),Gt(o,r),o})(t,(e=>Ct(e.rows,n=>{const o=Ct(n.cells,s=>{const a=rh(s);return ce(a,"colspan"),ce(a,"rowspan"),a}),r=Zo(n.element);return Ho(r,o),r}))(t)),kA=(t,e,n)=>{const o=R(e.commonAncestorContainer),r=ro(o,t),s=ft(r,l=>n.isWrapper(wt(l))),a=((l,d)=>Zt(l,c=>wt(c)==="li"&&Vc(c,d)).fold(Y([]),c=>(u=>Zt(u,m=>wt(m)==="ul"||wt(m)==="ol"))(l).map(u=>{const m=ne(wt(u)),p=Ns(Ld(u),(f,h)=>Qt(h,"list-style"));return fi(m,p),[ne("li"),m]}).getOr([])))(r,e),i=s.concat(a.length?a:(l=>Ur(l)?hn(l).filter(fc).fold(Y([]),d=>[l,d]):fc(l)?[l]:[])(o));return Ct(i,Zo)},EC=()=>uu([]),_A=(t,e)=>((n,o)=>Is(o,"table",et(kt,n)))(t,e[0]).bind(n=>{const o=e[0],r=e[e.length-1],s=(a=>{const i=hm(Zo(a),0,[]);return U(be(a,"tr"),(l,d)=>{U(be(l,"td,th"),(c,u)=>{((m,p,f,h,g)=>{const b=vC(g,"rowspan"),v=vC(g,"colspan"),y=m.rows;for(let E=f;E<f+b;E++){y[E]||(y[E]=bC(rh(h),[]));for(let w=p;w<p+v;w++)y[E].cells[w]=E===f&&w===p?g:Zo(g)}})(i,((m,p,f)=>{for(;EA(m,p,f);)p++;return p})(i,u,d),d,l,c)})}),hm(i.element,yC(i.rows),i.rows)})(n);return((a,i,l)=>CC(a,i).bind(d=>CC(a,l).map(c=>((u,m,p)=>{const f=m.x,h=m.y,g=p.x,b=p.y,v=h<b?wC(u,f,h,g,b):wC(u,f,b,g,h);return hm(u.element,yC(v),v)})(a,d,c))))(s,o,r).map(a=>uu([xA(a)]))}).getOrThunk(EC),SA=(t,e,n)=>{const o=jb(e,t);return o.length>0?_A(t,o):((r,s,a)=>s.length>0&&s[0].collapsed?EC():((i,l,d)=>((c,u)=>{const m=De(u,(p,f)=>(Gt(f,p),f),c);return u.length>0?uu([m]):m})(R(l.cloneContents()),kA(i,l,d)))(r,s[0],a))(t,e,n)},vl=(t,e)=>e>=0&&e<t.length&&sr(t.charAt(e)),xC=t=>$e(t.innerText),kC=t=>nt(t)?t.outerHTML:H(t)?Yo.encodeRaw(t.data,!1):yo(t)?"<!--"+t.data+"-->":"",NA=(t,e)=>(((n,o)=>{let r=0;U(n,s=>{s[0]===0?r++:s[0]===1?(((a,i,l)=>{const d=(c=>{let u;const m=document.createElement("div"),p=document.createDocumentFragment();for(c&&(m.innerHTML=c);u=m.firstChild;)p.appendChild(u);return p})(i);if(a.hasChildNodes()&&l<a.childNodes.length){const c=a.childNodes[l];a.insertBefore(d,c)}else a.appendChild(d)})(o,s[1],r),r++):s[0]===2&&((a,i)=>{if(a.hasChildNodes()&&i<a.childNodes.length){const l=a.childNodes[i];a.removeChild(l)}})(o,r)})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(u,m,p,f,h)=>{const g=d(u,m,p,f);if(g===null||g.start===m&&g.diag===m-f||g.end===u&&g.diag===u-p){let b=u,v=p;for(;b<m||v<f;)b<m&&v<f&&n[b]===o[v]?(h.push([0,n[b]]),++b,++v):m-u>f-p?(h.push([2,n[b]]),++b):(h.push([1,o[v]]),++v)}else{i(u,g.start,p,g.start-g.diag,h);for(let b=g.start;b<g.end;++b)h.push([0,n[b]]);i(g.end,m,g.end-g.diag,f,h)}},l=(u,m,p,f)=>{let h=u;for(;h-m<f&&h<p&&n[h]===o[h-m];)++h;return((g,b,v)=>({start:g,end:b,diag:v}))(u,h,m)},d=(u,m,p,f)=>{const h=m-u,g=f-p;if(h===0||g===0)return null;const b=h-g,v=g+h,y=(v%2==0?v:v+1)/2;let E,w,x,S,_;for(s[1+y]=u,a[1+y]=m+1,E=0;E<=y;++E){for(w=-E;w<=E;w+=2){for(x=w+y,w===-E||w!==E&&s[x-1]<s[x+1]?s[x]=s[x+1]:s[x]=s[x-1]+1,S=s[x],_=S-u+p-w;S<m&&_<f&&n[S]===o[_];)s[x]=++S,++_;if(b%2!=0&&b-E<=w&&w<=b+E&&a[x-b]<=s[x])return l(a[x-b],w+u-p,m,f)}for(w=b-E;w<=b+E;w+=2){for(x=w+y-b,w===b-E||w!==b+E&&a[x+1]<=a[x-1]?a[x]=a[x+1]-1:a[x]=a[x-1],S=a[x]-1,_=S-u+p-w;S>=u&&_>=p&&n[S]===o[_];)a[x]=S--,_--;if(b%2==0&&-E<=w&&w<=E&&a[x]<=s[x+b])return l(a[x],w+u-p,m,f)}}return null},c=[];return i(0,n.length,0,o.length,c),c})(Ct(ze(e.childNodes),kC),t),e),e),RA=Sn(()=>document.implementation.createHTMLDocument("undo")),yl=t=>{const e=t.serializer.getTempAttrs(),n=q0(t.getBody(),e);return(o=>o.querySelector("iframe")!==null)(n)?{type:"fragmented",fragments:ft(Ct(ze(n.childNodes),fn($e,kC)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:$e(n.innerHTML),bookmark:null,beforeBookmark:null}},bm=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;e.type==="fragmented"?NA(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!W(o)||!Lb(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},vm=t=>t.type==="fragmented"?t.fragments.join(""):t.content,_C=t=>{const e=ne("body",RA());return pi(e,vm(t)),U(be(e,"*[data-mce-bogus]"),vo),rp(e)},ym=(t,e)=>!(!t||!e)&&(!!((n,o)=>vm(n)===vm(o))(t,e)||((n,o)=>_C(n)===_C(o))(t,e)),Cm=t=>t.get()===0,Cl=(t,e,n)=>{Cm(n)&&(t.typing=e)},SC=(t,e)=>{t.typing&&(Cl(t,!1,e),t.add())},NC=t=>({init:{bindEvents:vt},undoManager:{beforeChange:(e,n)=>((o,r,s)=>{Cm(r)&&s.set(_c(o.selection))})(t,e,n),add:(e,n,o,r,s,a)=>((i,l,d,c,u,m,p)=>{const f=yl(i),h=$.extend(m||{},f);if(!Cm(c)||i.removed)return null;const g=l.data[d.get()];if(i.dispatch("BeforeAddUndo",{level:h,lastLevel:g,originalEvent:p}).isDefaultPrevented()||g&&ym(g,h))return null;l.data[d.get()]&&u.get().each(y=>{l.data[d.get()].beforeBookmark=y});const b=FS(i);if(b&&l.data.length>b){for(let y=0;y<l.data.length-1;y++)l.data[y]=l.data[y+1];l.data.length--,d.set(l.data.length)}h.bookmark=_c(i.selection),d.get()<l.data.length-1&&(l.data.length=d.get()+1),l.data.push(h),d.set(l.data.length-1);const v={level:h,lastLevel:g,originalEvent:p};return d.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",v),i.dispatch("change",v)):i.dispatch("AddUndo",v),h})(t,e,n,o,r,s,a),undo:(e,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,Cl(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],bm(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],bm(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>((o,r,s)=>{r.data=[],s.set(0),r.typing=!1,o.dispatch("ClearUndos")})(t,e,n),reset:e=>(n=>{n.clear(),n.add()})(e),hasUndo:(e,n)=>((o,r,s)=>s.get()>0||r.typing&&r.data[0]&&!ym(yl(o),r.data[0]))(t,e,n),hasRedo:(e,n)=>((o,r)=>r.get()<o.data.length-1&&!o.typing)(e,n),transact:(e,n,o)=>((r,s,a)=>(SC(r,s),r.beforeChange(),r.ignore(a),r.add()))(e,n,o),ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((s,a,i,l,d)=>{if(a.transact(l)){const c=a.data[i.get()].bookmark,u=a.data[i.get()-1];bm(s,u,!0),a.transact(d)&&(a.data[i.get()-1].beforeBookmark=c)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>Yu(t,e,n,o,r),matchAll:(e,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,d=>{for(let c=0;c<r.length;c++){const u=r[c];!i[u]&&Un(o,d,u,s)&&(i[u]=!0,a.push(u))}},o.dom.getRoot()),a})(t,e,n),matchNode:(e,n,o,r)=>Un(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const a=n.selection.getStart(),i=Wi(s,a);for(let l=r.length-1;l>=0;l--){const d=r[l];if(!Ze(d))return!0;for(let c=i.length-1;c>=0;c--)if(s.is(i[c],d.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=s=>kt(s,R(n.getBody()));return C.from(n.selection.getStart(!0)).bind(s=>qu(R(s),a=>xr(o,i=>((l,d)=>Un(n,l.dom,d)?C.some(d):C.none())(a,i)),r)).getOrNull()})(t,e),apply:(e,n,o)=>Ty(t,e,n,o),remove:(e,n,o,r)=>Ny(t,e,n,o,r),toggle:(e,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!Yu(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?Ty(r,s,a,i):Ny(r,s,a,i))})(t,e,n,o),formatChanged:(e,n,o,r,s)=>((a,i,l,d,c,u)=>(((m,p,f,h,g,b)=>{const v=p.get();U(f.split(","),y=>{const E=Ft(v,y).getOrThunk(()=>{const x={withSimilar:{state:re(!1),similar:!0,callbacks:[]},withoutSimilar:{state:re(!1),similar:!1,callbacks:[]},withVars:[]};return v[y]=x,x}),w=()=>{const x=Dy(m);return Py(m,x,y,g,b).isSome()};if(le(b)){const x=g?E.withSimilar:E.withoutSimilar;x.callbacks.push(h),x.callbacks.length===1&&x.state.set(w())}else E.withVars.push({state:re(w()),similar:g,vars:b,callback:h})}),p.set(v)})(a,i,l,d,c,u),{unbind:()=>((m,p,f)=>{const h=m.get();U(p.split(","),g=>Ft(h,g).each(b=>{h[g]={withSimilar:{...b.withSimilar,callbacks:ft(b.withSimilar.callbacks,v=>v!==f)},withoutSimilar:{...b.withoutSimilar,callbacks:ft(b.withoutSimilar.callbacks,v=>v!==f)},withVars:ft(b.withVars,v=>v.callback!==f)}})),m.set(h)})(i,l,d)}))(t,e,n,o,r,s)},editor:{getContent:e=>((n,o)=>C.from(n.getBody()).fold(Y(o.format==="tree"?new _e("body",11):""),r=>hR(n,o,r)))(t,e),setContent:(e,n)=>((o,r,s)=>C.from(o.getBody()).map(a=>ul(r)?((i,l,d,c)=>{Wv(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),d);const u=No({validate:!1},i.schema).serialize(d),m=$e(Si(R(l))?u:$.trim(u));return Vu(i,m,c.no_selection),{content:d,html:m}})(o,a,r,s):((i,l,d,c)=>{if((d=$e(d)).length===0||/^\s+$/.test(d)){const u='<br data-mce-bogus="1">';l.nodeName==="TABLE"?d="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(d="<li>"+u+"</li>");const m=ye(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(d=u,d=i.dom.createHTML(m,ra(i),d)):d||(d=u),Vu(i,d,c.no_selection),{content:d,html:d}}{c.format!=="raw"&&(d=No({validate:!1},i.schema).serialize(i.parser.parse(d,{isRootContent:!0,insert:!0})));const u=Si(R(l))?d:$.trim(d);return Vu(i,u,c.no_selection),{content:u,html:u}}})(o,a,r,s)).getOr({content:r,html:ul(s.content)?"":s.content}))(t,e,n),insertContent:(e,n)=>jR(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,s=W(o)?o:n.getBody();U(r.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=VS(n),l=r.getAttrib(a,"border");l&&l!=="0"||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const d=r.getAttrib(a,"name")||a.id,c=ib(n);d&&n.hasVisual?r.addClass(a,c):r.removeClass(a,c)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,s={})=>{const a=((i,l)=>({...i,format:l,get:!0,selection:!0,getInner:!0}))(s,r);return pC(o,a).fold(xe,i=>{const l=((d,c)=>{if(c.format==="text")return(u=>C.from(u.selection.getRng()).map(m=>{var p;const f=C.from(u.dom.getParent(m.commonAncestorContainer,u.dom.isBlock)),h=u.getBody(),g=(w=>w.map(x=>x.nodeName).getOr("div").toLowerCase())(f),b=R(m.cloneContents());W0(b),K0(b);const v=u.dom.add(h,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},b.dom),y=xC(v),E=$e((p=v.textContent)!==null&&p!==void 0?p:"");if(u.dom.remove(v),vl(E,0)||vl(E,E.length-1)){const w=f.getOr(h),x=xC(w),S=x.indexOf(y);return S===-1?y:(vl(x,S-1)?" ":"")+y+(vl(x,S+y.length)?" ":"")}return y}).getOr(""))(d);{const u=((m,p)=>{const f=m.selection.getRng(),h=m.dom.create("body"),g=m.selection.getSel(),b=hu(m,Hc(g)),v=p.contextual?SA(R(m.getBody()),b,m.schema).dom:f.cloneContents();return v&&h.appendChild(v),m.selection.serializer.serialize(h,p)})(d,c);return c.format==="tree"?u:d.selection.isCollapsed()?"":u}})(o,i);return hC(o,l,i)})})(t,e,n)},autocompleter:{addDecoration:vt,removeDecoration:vt},raw:{getModel:()=>C.none()}}),zn=t=>pt(t.plugins,"rtc"),wm=t=>t.rtcInstance?t.rtcInstance:NC(t),Xt=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},RC=t=>Xt(t).init.bindEvents(),AC=t=>t.dom.length===0?(Ut(t),C.none()):C.some(t),TC=(t,e,n,o,r)=>{t.bind(s=>((o?_u:al)(s.dom,o?s.dom.length:0,r),e.filter(Ae).map(a=>((i,l,d,c,u)=>{const m=i.dom,p=l.dom,f=c?m.length:p.length;c?(Su(m,p,u,!1,!c),d.setStart(p,f)):(Su(p,m,u,!1,!c),d.setEnd(p,f))})(s,a,n,o,r)))).orThunk(()=>((a,i)=>a.filter(l=>pa.isBookmarkNode(l.dom)).bind(i?Ms:ho))(e,o).or(e).filter(Ae).map(a=>((i,l,d)=>{hn(i).each(c=>{const u=i.dom;l&&Ca(c,I(u,0),d)?al(u,0,d):!l&&wa(c,I(u,u.length),d)&&_u(u,u.length,d)})})(a,o,r)))},OC=(t,e,n)=>{if(pt(t,e)){const o=ft(t[e],r=>r!==n);o.length===0?delete t[e]:t[e]=o}},BC=t=>!(!t||!t.ownerDocument)&&pn(R(t.ownerDocument),R(t)),PC=(t,e,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((g,b)=>{let v,y;const E=(x,S)=>Zt(S,_=>g.is(_,x)),w=x=>g.getParents(x,void 0,g.getRoot());return{selectorChangedWithUnbind:(x,S)=>(v||(v={},y={},b.on("NodeChange",_=>{const O=_.element,D=w(O),k={};Dt(v,(N,T)=>{E(T,D).each(F=>{y[T]||(U(N,j=>{j(!0,{node:F,selector:T,parents:D})}),y[T]=N),k[T]=N})}),Dt(y,(N,T)=>{k[T]||(delete y[T],U(N,F=>{F(!1,{node:O,selector:T,parents:D})}))})})),v[x]||(v[x]=[]),v[x].push(S),E(x,w(b.selection.getStart())).each(()=>{y[x]=v[x]}),{unbind:()=>{OC(v,x,S),OC(y,x,S)}})}})(t,o),i=(g,b)=>((v,y,E={})=>{const w=((x,S)=>({format:"html",...x,set:!0,selection:!0,content:S}))(E,y);gm(v,w).each(x=>{const S=((O,D)=>{if(D.format!=="raw"){const k=O.selection.getRng(),N=O.dom.getParent(k.commonAncestorContainer,O.dom.isBlock),T=N?{context:N.nodeName.toLowerCase()}:{},F=O.parser.parse(D.content,{forced_root_block:!1,...T,...D});return No({validate:!1},O.schema).serialize(F)}return D.content})(v,x),_=v.selection.getRng();((O,D,k)=>{const N=C.from(D.firstChild).map(R),T=C.from(D.lastChild).map(R);O.deleteContents(),O.insertNode(D);const F=N.bind(ho).filter(Ae).bind(AC),j=T.bind(Ms).filter(Ae).bind(AC);TC(F,N,O,!0,k),TC(j,T,O,!1,k),O.collapse(!1)})(_,_.createContextualFragment(S),v.schema),v.selection.setRng(_),ba(v,_),pm(v,S,x)})})(o,g,b),l=g=>{const b=c();b.collapse(!!g),u(b)},d=()=>e.getSelection?e.getSelection():e.document.selection,c=()=>{let g;const b=(y,E,w)=>{try{return E.compareBoundaryPoints(y,w)}catch{return-1}},v=e.document;if(W(o.bookmark)&&!ts(o)){const y=ou(o);if(y.isSome())return y.map(E=>hu(o,[E])[0]).getOr(v.createRange())}try{const y=d();y&&!bi(y.anchorNode)&&(g=y.rangeCount>0?y.getRangeAt(0):v.createRange(),g=hu(o,[g])[0])}catch{}if(g||(g=v.createRange()),js(g.startContainer)&&g.collapsed){const y=t.getRoot();g.setStart(y,0),g.setEnd(y,0)}return r&&s&&(b(g.START_TO_START,g,r)===0&&b(g.END_TO_END,g,r)===0?g=s:(r=null,s=null)),g},u=(g,b)=>{if(!(y=>!!y&&BC(y.startContainer)&&BC(y.endContainer))(g))return;const v=d();if(g=o.dispatch("SetSelectionRange",{range:g,forward:b}).range,v){s=g;try{v.removeAllRanges(),v.addRange(g)}catch{}b===!1&&v.extend&&(v.collapse(g.endContainer,g.endOffset),v.extend(g.startContainer,g.startOffset)),r=v.rangeCount>0?v.getRangeAt(0):null}if(!g.collapsed&&g.startContainer===g.endContainer&&v?.setBaseAndExtent&&g.endOffset-g.startOffset<2&&g.startContainer.hasChildNodes()){const y=g.startContainer.childNodes[g.startOffset];y&&y.nodeName==="IMG"&&(v.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),v.anchorNode===g.startContainer&&v.focusNode===g.endContainer||v.setBaseAndExtent(y,0,y,1))}o.dispatch("AfterSetSelectionRange",{range:g,forward:b})},m=()=>{const g=d(),b=g?.anchorNode,v=g?.focusNode;if(!g||!b||!v||bi(b)||bi(v))return!0;const y=t.createRng(),E=t.createRng();try{y.setStart(b,g.anchorOffset),y.collapse(!0),E.setStart(v,g.focusOffset),E.collapse(!0)}catch{return!0}return y.compareBoundaryPoints(y.START_TO_START,E)<=0},p={dom:t,win:e,serializer:n,editor:o,expand:(g={type:"word"})=>u(lr(t).expand(c(),g)),collapse:l,setCursorLocation:(g,b)=>{const v=t.createRng();W(g)&&W(b)?(v.setStart(g,b),v.setEnd(g,b),u(v),l(!1)):(qc(t,v,o.getBody(),!0),u(v))},getContent:g=>((b,v={})=>((y,E,w)=>Xt(y).selection.getContent(E,w))(b,v.format?v.format:"html",v))(o,g),setContent:i,getBookmark:(g,b)=>f.getBookmark(g,b),moveToBookmark:g=>f.moveToBookmark(g),select:(g,b)=>(((v,y,E)=>C.from(y).bind(w=>C.from(w.parentNode).map(x=>{const S=v.nodeIndex(w),_=v.createRng();return _.setStart(x,S),_.setEnd(x,S+1),E&&(qc(v,_,w,!0),qc(v,_,w,!1)),_})))(t,g,b).each(u),g),isCollapsed:()=>{const g=c(),b=d();return!(!g||g.item)&&(g.compareEndPoints?g.compareEndPoints("StartToEnd",g)===0:!b||g.collapsed)},isEditable:()=>{if(o.mode.isReadOnly())return!1;const g=c(),b=o.getBody().querySelectorAll('[data-mce-selected="1"]');return b.length>0?Kn(b,v=>t.isEditable(v.parentElement)):D0(t,g)},isForward:m,setNode:g=>(i(t.getOuterHTML(g)),g),getNode:()=>((g,b)=>{if(!b)return g;let v=b.startContainer,y=b.endContainer;const E=b.startOffset,w=b.endOffset;let x=b.commonAncestorContainer;b.collapsed||(v===y&&w-E<2&&v.hasChildNodes()&&(x=v.childNodes[E]),H(v)&&H(y)&&(v=v.length===E?F0(v.nextSibling,!0):v.parentNode,y=w===0?F0(y.previousSibling,!1):y.parentNode,v&&v===y&&(x=v)));const S=H(x)?x.parentNode:x;return Jn(S)?S:g})(o.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:g=>M0(o.getBody(),c(),g),getEnd:g=>I0(o.getBody(),c(),g),getSelectedBlocks:(g,b)=>((v,y,E,w)=>{const x=[],S=v.getRoot(),_=v.getParent(E||M0(S,y,y.collapsed),v.isBlock),O=v.getParent(w||I0(S,y,y.collapsed),v.isBlock);if(_&&_!==S&&x.push(_),_&&O&&_!==O){let D;const k=new oe(_,S);for(;(D=k.next())&&D!==O;)v.isBlock(D)&&x.push(D)}return O&&_!==O&&O!==S&&x.push(O),x})(t,c(),g,b),normalize:()=>{const g=c(),b=d();if(!(Hc(b).length>1)&&Vi(o)){const v=tl(t,g);return v.each(y=>{u(y,m())}),v.getOr(g)}return g},selectorChanged:(g,b)=>(a(g,b),p),selectorChangedWithUnbind:a,getScrollContainer:()=>{let g,b=t.getRoot();for(;b&&b.nodeName!=="BODY";){if(b.scrollHeight>b.clientHeight){g=b;break}b=b.parentNode}return g},scrollIntoView:(g,b)=>{W(g)?((v,y,E)=>{(v.inline?rR:aR)(v,y,E)})(o,g,b):ba(o,c(),b)},placeCaretAt:(g,b)=>u(E0(g,b,o.getDoc())),getBoundingClientRect:()=>{const g=c();return g.collapsed?I.fromRangeStart(g).getClientRects()[0]:g.getBoundingClientRect()},destroy:()=>{e=r=s=null,h.destroy()}},f=pa(p),h=v0(p,o);return p.bookmarkManager=f,p.controlSelection=h,p},AA=(t,e,n)=>{$.inArray(e,n)===-1&&(t.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),e.push(n))},TA=(t,e)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},r=e&&e.dom?e.dom:Pt.DOM,s=e&&e.schema?e.schema:Co(o),a=ns(o,s);return((i,l,d)=>{i.addAttributeFilter("data-mce-tabindex",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];p.attr("tabindex",p.attr("data-mce-tabindex")),p.attr(u,null)}}),i.addAttributeFilter("src,href,style",(c,u)=>{const m="data-mce-"+u,p=l.url_converter,f=l.url_converter_scope;let h=c.length;for(;h--;){const g=c[h];let b=g.attr(m);b!==void 0?(g.attr(u,b.length>0?b:null),g.attr(m,null)):(b=g.attr(u),u==="style"?b=d.serializeStyle(d.parseStyle(b),g.name):p&&(b=p.call(f,b,u,g.name)),g.attr(u,b.length>0?b:null))}}),i.addAttributeFilter("class",c=>{let u=c.length;for(;u--;){const m=c[u];let p=m.attr("class");p&&(p=p.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",p.length>0?p:null))}}),i.addAttributeFilter("data-mce-type",(c,u,m)=>{let p=c.length;for(;p--;){const f=c[p];f.attr("data-mce-type")==="bookmark"&&!m.cleanup&&(C.from(f.firstChild).exists(g=>{var b;return!Ni((b=g.value)!==null&&b!==void 0?b:"")})?f.unwrap():f.remove())}}),i.addNodeFilter("script,style",(c,u)=>{var m;const p=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=c.length;for(;f--;){const h=c[f],g=h.firstChild,b=(m=g?.value)!==null&&m!==void 0?m:"";if(u==="script"){const v=h.attr("type");v&&h.attr("type",v==="mce-no/type"?null:v.replace(/^mce\-/,"")),l.element_format==="xhtml"&&g&&b.length>0&&(g.value=`// <![CDATA[
`+p(b)+`
// ]]>`)}else l.element_format==="xhtml"&&g&&b.length>0&&(g.value=`<!--
`+p(b)+`
-->`)}}),i.addNodeFilter("#comment",c=>{let u=c.length;for(;u--;){const m=c[u],p=m.value;l.preserve_cdata&&p?.indexOf("[CDATA[")===0?(m.name="#cdata",m.type=4,m.value=d.decode(p.replace(/^\[CDATA\[|\]\]$/g,""))):p?.indexOf("mce:protected ")===0&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(p).substr(14))}}),i.addNodeFilter("xml:namespace,input",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];p.type===7?p.remove():p.type===1&&(u!=="input"||p.attr("type")||p.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",c=>{U(c,u=>{u.attr("data-mce-type")==="format-caret"&&(u.isEmpty(i.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(c,u)=>{let m=c.length;for(;m--;)c[m].attr(u,null)}),l.remove_trailing_brs&&((c,u,m)=>{u.addNodeFilter("br",(p,f,h)=>{const g=$.extend({},m.getBlockElements()),b=m.getNonEmptyElements(),v=m.getWhitespaceElements();g.body=1;const y=E=>E.name in g||Zd(m,E);for(let E=0,w=p.length;E<w;E++){let x=p[E],S=x.parent;if(S&&y(S)&&x===S.lastChild){let _=x.prev;for(;_;){const O=_.name;if(O!=="span"||_.attr("data-mce-type")!=="bookmark"){O==="br"&&(x=null);break}_=_.prev}if(x&&(x.remove(),xa(m,b,v,S))){const O=m.getElementRule(S.name);O&&(O.removeEmpty?S.remove():O.paddEmpty&&Iu(c,h,y,S))}}else{let _=x;for(;S&&S.firstChild===_&&S.lastChild===_&&(_=S,!g[S.name]);)S=S.parent;if(_===S){const O=new _e("#text",3);O.value=Jt,x.replace(O)}}}})})(l,i,i.schema)})(a,o,r),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const d={format:"html",...l},c=((p,f,h)=>((g,b)=>W(g)&&g.hasEventListeners("PreProcess")&&!b.no_events)(p,h)?((g,b,v)=>{let y;const E=g.dom;let w=b.cloneNode(!0);const x=document.implementation;if(x.createHTMLDocument){const S=x.createHTMLDocument("");$.each(w.nodeName==="BODY"?w.childNodes:[w],_=>{S.body.appendChild(S.importNode(_,!0))}),w=w.nodeName!=="BODY"?S.body.firstChild:S.body,y=E.doc,E.doc=S}return((S,_)=>{S.dispatch("PreProcess",_)})(g,{...v,node:w}),y&&(E.doc=y),w})(p,f,h):f)(e,i,d),u=((p,f,h)=>{const g=$e(h.getInner?f.innerHTML:p.getOuterHTML(f));return h.selection||Si(R(f))?g:$.trim(g)})(r,c,d),m=((p,f,h)=>{const g=h.selection?{forced_root_block:!1,...h}:h,b=p.parse(f,g);return(v=>{const y=w=>w?.name==="br",E=v.lastChild;if(y(E)){const w=E.prev;y(w)&&(E.remove(),w.remove())}})(b),b})(a,u,d);return d.format==="tree"?m:((p,f,h,g,b)=>{const v=((y,E,w)=>No(y,E).serialize(w))(f,h,g);return((y,E,w)=>!E.no_events&&y?((S,_)=>S.dispatch("PostProcess",_))(y,{...E,content:w}).content:w)(p,b,v)})(e,o,s,m,d)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:et(AA,a,n),getTempAttrs:Y(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},DC=(t,e)=>{const n=TA(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Em=(t,e,n={})=>{const o=((r,s)=>({format:"html",...r,set:!0,content:s}))(n,e);return gm(t,o).map(r=>{const s=((a,i,l)=>wm(a).editor.setContent(i,l))(t,r.content,r);return pm(t,s.html,r),s.content}).getOr(e)},OA="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),BA=[],PA="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),LC=[],MC=(t,e)=>{const n=ft(e,o=>pt(t,o));return Io(n)},DA=t=>{const e=MC(t,OA),n=t.forced_root_block;return n!==!1&&n!==""||e.push("forced_root_block (false only)"),Io(e)},LA=t=>MC(t,BA),IC=(t,e)=>{const n=$.makeMap(t.plugins," "),o=ft(e,r=>pt(n,r));return Io(o)},MA=t=>IC(t,PA),IA=t=>IC(t,LC.map(e=>e.name)),FA=t=>Zt(LC,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),wl=Pt.DOM,El=t=>C.from(t).each(e=>e.destroy()),xl=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>pt(t,e)}})(),os=ke.ModelManager,FC=(t,e)=>e.dom[t],UC=(t,e)=>parseInt(On(e,t),10),UA=et(FC,"clientWidth"),zA=et(FC,"clientHeight"),jA=et(UC,"margin-top"),HA=et(UC,"margin-left"),zC=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},o=()=>C.from(e[0]),r=()=>{o().each(l=>{l.reposition()})},s=l=>{xs(e,d=>d===l).each(d=>{e.splice(d,1)})},a=(l,d=!0)=>t.removed||!(c=>{return(u=c.inline?c.getBody():c.getContentAreaContainer(),C.from(u).map(R)).map(Or).getOr(!1);var u})(t)?{}:(d&&t.dispatch("BeforeOpenNotification",{notification:l}),Zt(e,c=>{return u=n().getArgs(c),m=l,!(u.type!==m.type||u.text!==m.text||u.progressBar||u.timeout||m.progressBar||m.timeout);var u,m}).getOrThunk(()=>{t.editorManager.setActive(t);const c=n().open(l,()=>{s(c)},()=>iu(t));return(u=>{e.push(u)})(c),r(),t.dispatch("OpenNotification",{notification:{...c}}),c})),i=Y(e);return(l=>{l.on("SkinLoaded",()=>{const d=SS(l);d&&a({text:d,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{U(e.slice(),d=>{n().close(d)})}),l.on("keydown",d=>{var c;const u=((c=d.key)===null||c===void 0?void 0:c.toLowerCase())==="f12"||d.keyCode===123;d.altKey&&u&&(d.preventDefault(),o().map(m=>R(m.getEl())).each(m=>d0(m)))})})(t),{open:a,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:i}},rs=ke.PluginManager,gr=ke.ThemeManager,jC=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(a,i)=>(...l)=>i?i.apply(a,l):void 0,r=a=>{(i=>{t.dispatch("CloseWindow",{dialog:i})})(a),e=ft(e,i=>i!==a),e.length===0&&t.focus()},s=a=>{t.editorManager.setActive(t),Gi(t),t.ui.show();const i=a();return(l=>{e.push(l),(d=>{t.dispatch("OpenWindow",{dialog:d})})(l)})(i),i};return t.on("remove",()=>{U(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,r)),openUrl:a=>s(()=>n().openUrl(a,r)),alert:(a,i,l)=>{const d=n();d.alert(a,o(l||d,i))},confirm:(a,i,l)=>{const d=n();d.confirm(a,o(l||d,i))},close:()=>{C.from(e[e.length-1]).each(a=>{n().close(a),r(a)})}}},HC=(t,e)=>{t.notificationManager.open({type:"error",text:e})},kl=(t,e)=>{t._skinLoaded?HC(t,e):t.on("SkinLoaded",()=>{HC(t,e)})},Oa=(t,e,n)=>{jh(t,e,{message:n}),console.error(n)},Ba=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,_l=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},xm=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},$C=(t,e,n)=>{Rd(t,e)&&!n?Ps(t,e):n&&Rr(t,e)},VC=t=>{const e=R(t.getBody());$C(e,"mce-content-readonly",!0),t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(n=>{C.from(n.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})})(t)},qC=t=>{const e=R(t.getBody());$C(e,"mce-content-readonly",!1),t.hasEditableRoot()&&mi(e,!0),((n,o)=>{xm(n,"StyleWithCSS",o),xm(n,"enableInlineTableEditing",o),xm(n,"enableObjectResizing",o)})(t,!1),iu(t)&&t.focus(),(n=>{n.selection.setRng(n.selection.getRng())})(t),t.nodeChanged()},so=t=>Ii(t),pr="data-mce-contenteditable",WC=(t,e)=>{const n=R(t.getBody());e?(VC(t),mi(n,!1),U(be(n,'*[contenteditable="true"]'),o=>{de(o,pr,"true"),mi(o,!1)})):(U(be(n,`*[${pr}="true"]`),o=>{ce(o,pr),mi(o,!0)}),qC(t))},KC=t=>{t.parser.addAttributeFilter("contenteditable",e=>{so(t)&&U(e,n=>{n.attr(pr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(pr,e=>{so(t)&&U(e,n=>{n.attr("contenteditable",n.attr(pr))})}),t.serializer.addTempAttr(pr)},$A=["copy"],km=t=>"content/"+t+"/content.css",YC=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return Ct(e,r=>(s=>tinymce.Resource.has(km(s)))(r)?r:(s=>/^[a-z0-9\-]+$/i.test(s))(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},VA=(t,e)=>{const n={};return{findAll:(o,r=Wt)=>{const s=ft((i=>i?ze(i.getElementsByTagName("img")):[])(o),i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===Et.transparentSrc)&&(Qt(l,"blob:")?!t.isUploaded(l)&&r(i):!!Qt(l,"data:")&&r(i))}),a=Ct(s,i=>{const l=i.src;if(pt(n,l))return n[l].then(d=>st(d)?d:{image:i,blobInfo:d.blobInfo});{const d=((c,u)=>{const m=()=>Promise.reject("Invalid data URI");if(Qt(u,"blob:")){const h=c.getByUri(u);return W(h)?Promise.resolve(h):(p=u,Qt(p,"blob:")?(g=>fetch(g).then(b=>b.ok?b.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${g} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})))(p):Qt(p,"data:")?(f=p,new Promise((g,b)=>{om(f).bind(({type:v,data:y,base64Encoded:E})=>Fy(v,y,E)).fold(()=>b("Invalid data URI"),g)})):Promise.reject("Unknown URI format")).then(g=>Uy(g).then(b=>zy(b,!1,v=>C.some(jy(c,g,v))).getOrThunk(m)))}var p,f;return Qt(u,"data:")?Hy(c,u).fold(m,h=>Promise.resolve(h)):Promise.reject("Unknown image data format")})(e,l).then(c=>(delete n[l],{image:i,blobInfo:c})).catch(c=>(delete n[l],c));return n[l]=d,d}});return Promise.all(a)}}},GC=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&t[o].status===1,isUploaded:o=>!!n(o)&&t[o].status===2,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let qA=0;const WA=(t,e)=>{const n={},o=(l,d)=>new Promise((c,u)=>{const m=new XMLHttpRequest;m.open("POST",e.url),m.withCredentials=e.credentials,m.upload.onprogress=f=>{d(f.loaded/f.total*100)},m.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void u("HTTP Error: "+m.status);const f=JSON.parse(m.responseText);var h,g;f&&st(f.location)?c((h=e.basePath,g=f.location,h?h.replace(/\/$/,"")+"/"+g.replace(/^\//,""):g)):u("Invalid JSON: "+m.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),m.send(p)}),r=Nt(e.handler)?e.handler:o,s=(l,d)=>({url:d,blobInfo:l,status:!0}),a=(l,d)=>({url:"",blobInfo:l,status:!1,error:d}),i=(l,d)=>{$.each(n[l],c=>{c(d)}),delete n[l]};return{upload:(l,d)=>e.url||r!==o?((c,u)=>(c=$.grep(c,m=>!t.isUploaded(m.blobUri())),Promise.all($.map(c,m=>t.isPending(m.blobUri())?(p=>{const f=p.blobUri();return new Promise(h=>{n[f]=n[f]||[],n[f].push(h)})})(m):((p,f,h)=>(t.markPending(p.blobUri()),new Promise(g=>{let b,v;try{const y=()=>{b&&(b.close(),v=vt)},E=x=>{y(),t.markUploaded(p.blobUri(),x),i(p.blobUri(),s(p,x)),g(s(p,x))},w=x=>{y(),t.removeFailed(p.blobUri()),i(p.blobUri(),a(p,x)),g(a(p,x))};v=x=>{x<0||x>100||C.from(b).orThunk(()=>C.from(h).map(pd)).each(S=>{b=S,S.progressBar.value(x)})},f(p,v).then(E,x=>{w(st(x)?{message:x}:x)})}catch(y){g(a(p,y))}})))(m,r,u)))))(l,d):new Promise(c=>{c([])})}},XC=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),ZC=(t,e)=>WA(e,{url:fS(t),basePath:gS(t),credentials:pS(t),handler:hS(t)}),KA=t=>{const e=(()=>{let h=[];const g=y=>{if(!y.blob||!y.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const E=y.id||"blobid"+qA+++(()=>{const _=()=>Math.round(4294967295*eh()).toString(36);return"s"+new Date().getTime().toString(36)+_()+_()+_()})(),w=y.name||E,x=y.blob;var S;return{id:Y(E),name:Y(w),filename:Y(y.filename||w+"."+(S=x.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[S.toLowerCase()]||"dat")),blob:Y(x),base64:Y(y.base64),blobUri:Y(y.blobUri||URL.createObjectURL(x)),uri:Y(y.uri)}},b=y=>Zt(h,y).getOrUndefined(),v=y=>b(E=>E.id()===y);return{create:(y,E,w,x,S)=>{if(st(y))return g({id:y,name:x,filename:S,blob:E,base64:w});if(ie(y))return g(y);throw new Error("Unknown input type")},add:y=>{v(y.id())||h.push(y)},get:v,getByUri:y=>b(E=>E.blobUri()===y),getByData:(y,E)=>b(w=>w.base64()===y&&w.blob().type===E),findFirst:b,removeByUri:y=>{h=ft(h,E=>E.blobUri()!==y||(URL.revokeObjectURL(E.blobUri()),!1))},destroy:()=>{U(h,y=>{URL.revokeObjectURL(y.blobUri())}),h=[]}}})();let n,o;const r=GC(),s=[],a=h=>g=>t.selection?h(g):[],i=(h,g,b)=>{let v=0;do v=h.indexOf(g,v),v!==-1&&(h=h.substring(0,v)+b+h.substr(v+g.length),v+=b.length-g.length+1);while(v!==-1);return h},l=(h,g,b)=>{const v=`src="${b}"${b===Et.transparentSrc?' data-mce-placeholder="1"':""}`;return h=i(h,`src="${g}"`,v),i(h,'data-mce-src="'+g+'"','data-mce-src="'+b+'"')},d=(h,g)=>{U(t.undoManager.data,b=>{b.type==="fragmented"?b.fragments=Ct(b.fragments,v=>l(v,h,g)):b.content=l(b.content,h,g)})},c=()=>(n||(n=ZC(t,r)),p().then(a(h=>{const g=Ct(h,b=>b.blobInfo);return n.upload(g,XC(t)).then(a(b=>{const v=[];let y=!1;const E=Ct(b,(w,x)=>{const{blobInfo:S,image:_}=h[x];let O=!1;return w.status&&uS(t)?(w.url&&!ge(_.src,w.url)&&(y=!0),e.removeByUri(_.src),zn(t)||((D,k)=>{const N=t.convertURL(k,"src");var T;d(D.src,k),Gn(R(D),{src:Qh(t)?(T=k,T+(T.indexOf("?")===-1?"?":"&")+new Date().getTime()):k,"data-mce-src":N})})(_,w.url)):w.error&&(w.error.remove&&(d(_.src,Et.transparentSrc),v.push(_),O=!0),((D,k)=>{kl(D,yn.translate(["Failed to upload image: {0}",k]))})(t,w.error.message)),{element:_,status:w.status,uploadUri:w.url,blobInfo:S,removed:O}});return v.length>0&&!zn(t)?t.undoManager.transact(()=>{U(Id(v),w=>{const x=hn(w);Ut(w),x.each((S=>_=>{((O,D)=>O.dom.isEmpty(D.dom)&&W(O.schema.getTextBlockElements()[wt(D)]))(S,_)&&Gt(_,di('<br data-mce-bogus="1" />'))})(t)),e.removeByUri(w.dom.src)})}):y&&t.undoManager.dispatchChange(),E}))}))),u=()=>Zh(t)?c():Promise.resolve([]),m=h=>Kn(s,g=>g(h)),p=()=>(o||(o=VA(r,e)),o.findAll(t.getBody(),m).then(a(h=>{const g=ft(h,b=>st(b)?(kl(t,b),!1):b.uriType!=="blob");return zn(t)||U(g,b=>{d(b.image.src,b.blobInfo.blobUri()),b.image.src=b.blobInfo.blobUri(),b.image.removeAttribute("data-mce-src")}),g}))),f=h=>h.replace(/src="(blob:[^"]+)"/g,(g,b)=>{const v=r.getResultUri(b);if(v)return'src="'+v+'"';let y=e.getByUri(b);return y||(y=De(t.editorManager.get(),(E,w)=>E||w.editorUpload&&w.editorUpload.blobCache.getByUri(b),void 0)),y?'src="data:'+y.blob().type+";base64,"+y.base64()+'"':g});return t.on("SetContent",()=>{Zh(t)?u():p()}),t.on("RawSaveContent",h=>{h.content=f(h.content)}),t.on("GetContent",h=>{h.source_view||h.format==="raw"||h.format==="tree"||(h.content=f(h.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",h=>{U(h,g=>{const b=g.attr("src");if(!b||e.getByUri(b))return;const v=r.getResultUri(b);v&&g.attr("src",v)})})}),{blobCache:e,addFilter:h=>{s.push(h)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}},QC={remove_similar:!0,inherit:!1},ss={selector:"td,th",...QC},YA={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ss},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ss},tablecellbordercolor:{styles:{borderColor:"%value"},...ss},tablecellclass:{classes:["%value"],...ss},tableclass:{selector:"table",classes:["%value"],...QC},tablecellborderstyle:{styles:{borderStyle:"%value"},...ss},tablecellborderwidth:{styles:{borderWidth:"%value"},...ss}},GA=Y(YA),Sl=$.each,en=Pt.DOM,_m=t=>W(t)&&ie(t),JC=(t,e)=>{const n=e&&e.schema||Co({}),o=a=>{const i=st(a)?{name:a,classes:[],attrs:{}}:a,l=en.create(i.name);return((d,c)=>{c.classes.length>0&&en.addClass(d,c.classes.join(" ")),en.setAttribs(d,c.attrs)})(l,i),l},r=(a,i,l)=>{let d;const c=i[0],u=_m(c)?c.name:void 0,m=((h,g)=>{const b=n.getElementRule(h.nodeName.toLowerCase()),v=b?.parentsRequired;return!(!v||!v.length)&&(g&&_t(v,g)?g:v[0])})(a,u);if(m)u===m?(d=c,i=i.slice(1)):d=m;else if(c)d=c,i=i.slice(1);else if(!l)return a;const p=d?o(d):en.create("div");p.appendChild(a),l&&$.each(l,h=>{const g=o(h);p.insertBefore(g,a)});const f=_m(d)?d.siblings:void 0;return r(p,i,f)},s=en.create("div");if(t.length>0){const a=t[0],i=o(a),l=_m(a)?a.siblings:void 0;s.appendChild(r(i,t.slice(1),l))}return s},XA=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=$.trim(t)};return t!=="*"&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":$.inArray("checked disabled enabled read-only required".split(" "),s)!==-1&&(n.attrs[s]=s)}if(a==="["){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},ZA=(t,e)=>{let n="",o=TS(t);if(o==="")return"";const r=p=>st(p)?p.replace(/%(\w+)/g,""):"",s=(p,f)=>en.getStyle(f??t.getBody(),p,!0);if(st(e)){const p=t.formatter.get(e);if(!p)return"";e=p[0]}if("preview"in e){const p=e.preview;if(p===!1)return"";o=p||o}let a,i=e.block||e.inline||"span";const l=(d=e.selector,st(d)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),$.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const f=$.map(p.split(/(?:~\+|~|\+)/),XA),h=f.pop();return f.length&&(h.siblings=f),h}).reverse()):[]);var d;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=JC(l,t)):a=JC([i],t);const c=en.select(i,a)[0]||a.firstChild;Sl(e.styles,(p,f)=>{const h=r(p);h&&en.setStyle(c,f,h)}),Sl(e.attributes,(p,f)=>{const h=r(p);h&&en.setAttrib(c,f,h)}),Sl(e.classes,p=>{const f=r(p);en.hasClass(c,f)||en.addClass(c,f)}),t.dispatch("PreviewFormats"),en.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const u=s("fontSize"),m=/px$/.test(u)?parseInt(u,10):0;return Sl(o.split(" "),p=>{let f=s(p,c);if(!(p==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(f)&&(f=s(p),$s(f).toLowerCase()==="#ffffff")||p==="color"&&$s(f).toLowerCase()==="#000000")){if(p==="font-size"&&/em|%$/.test(f)){if(m===0)return;f=parseFloat(f)/(/%$/.test(f)?100:1)*m+"px"}p==="border"&&f&&(n+="padding:0 2px;"),n+=p+":"+f+";"}}),t.dispatch("AfterPreviewFormats"),en.remove(a),n},t1=t=>{const e=(o=>{const r={},s=(a,i)=>{a&&(st(a)?(Vt(i)||(i=[i]),U(i,l=>{le(l.deep)&&(l.deep=!Ze(l)),le(l.split)&&(l.split=!Ze(l)||te(l)),le(l.remove)&&Ze(l)&&!te(l)&&(l.remove="none"),Ze(l)&&te(l)&&(l.mixed=!0,l.block_expand=!0),st(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[a]=i):Dt(a,(l,d)=>{s(d,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return l!=="html4"?[m,c,u]:[c,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,m)=>nt(c)&&c.hasAttribute("href"),onformat:(c,u,m)=>{$.each(m,(p,f)=>{i.setAttrib(c,f,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c?.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return $.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{d[c]={block:c,remove:"all"}}),d})(o)),s(GA()),s(AS(o)),{get:a=>W(a)?r[a]:r,has:a=>pt(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(t),n=re({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=>{o.on("mouseup keydown",r=>{var s;((a,i,l)=>{const d=a.selection,c=a.getBody();Zu(a,null,l),i!==8&&i!==46||!d.isCollapsed()||d.getStart().innerHTML!==ka||Zu(a,rr(c,d.getStart()),!0),i!==37&&i!==39||Zu(a,rr(c,d.getStart()),!0)})(o,r.keyCode,(s=o.selection.getRng().endContainer,H(s)&&xd(s.data,Jt)))})})(t),zn(t)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{Ly(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const a=C.from(s.node).map(i=>fa(i)?i:i.startContainer).bind(i=>nt(i)?C.some(i):C.from(i.parentElement)).getOrThunk(()=>By(r));Ly(r,a,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,s)=>{((a,i,l,d)=>{Xt(a).formatter.apply(i,l,d)})(t,o,r,s)},remove:(o,r,s,a)=>{((i,l,d,c,u)=>{Xt(i).formatter.remove(l,d,c,u)})(t,o,r,s,a)},toggle:(o,r,s)=>{((a,i,l,d)=>{Xt(a).formatter.toggle(i,l,d)})(t,o,r,s)},match:(o,r,s,a)=>((i,l,d,c,u)=>Xt(i).formatter.match(l,d,c,u))(t,o,r,s,a),closest:o=>((r,s)=>Xt(r).formatter.closest(s))(t,o),matchAll:(o,r)=>((s,a,i)=>Xt(s).formatter.matchAll(a,i))(t,o,r),matchNode:(o,r,s,a)=>((i,l,d,c,u)=>Xt(i).formatter.matchNode(l,d,c,u))(t,o,r,s,a),canApply:o=>((r,s)=>Xt(r).formatter.canApply(s))(t,o),formatChanged:(o,r,s,a)=>((i,l,d,c,u,m)=>Xt(i).formatter.formatChanged(l,d,c,u,m))(t,n,o,r,s,a),getCssText:et(ZA,t)}},e1=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},n1=t=>{const e=eo(),n=re(0),o=re(0),r={data:[],typing:!1,beforeChange:()=>{((s,a,i)=>{Xt(s).undoManager.beforeChange(a,i)})(t,n,e)},add:(s,a)=>((i,l,d,c,u,m,p)=>Xt(i).undoManager.add(l,d,c,u,m,p))(t,r,o,n,e,s,a),dispatchChange:()=>{t.setDirty(!0);const s=yl(t);s.bookmark=_c(t.selection),t.dispatch("change",{level:s,lastLevel:_s(r.data,o.get()).getOrUndefined()})},undo:()=>((s,a,i,l)=>Xt(s).undoManager.undo(a,i,l))(t,r,n,o),redo:()=>((s,a,i)=>Xt(s).undoManager.redo(a,i))(t,o,r.data),clear:()=>{((s,a,i)=>{Xt(s).undoManager.clear(a,i)})(t,r,o)},reset:()=>{((s,a)=>{Xt(s).undoManager.reset(a)})(t,r)},hasUndo:()=>((s,a,i)=>Xt(s).undoManager.hasUndo(a,i))(t,r,o),hasRedo:()=>((s,a,i)=>Xt(s).undoManager.hasRedo(a,i))(t,r,o),transact:s=>((a,i,l,d)=>Xt(a).undoManager.transact(i,l,d))(t,r,n,s),ignore:s=>{((a,i,l)=>{Xt(a).undoManager.ignore(i,l)})(t,n,s)},extra:(s,a)=>{((i,l,d,c,u)=>{Xt(i).undoManager.extra(l,d,c,u)})(t,r,o,s,a)}};return zn(t)||((s,a,i)=>{const l=re(!1),d=c=>{Cl(a,!1,i),a.add({},c)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",c=>{const u=c.command;e1(u)||(SC(a,i),a.beforeChange())}),s.on("ExecCommand",c=>{const u=c.command;e1(u)||d(c)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",d),s.on("dragend",d),s.on("keyup",c=>{const u=c.keyCode;if(c.isDefaultPrevented())return;const m=Et.os.isMacOS()&&c.key==="Meta";(u>=33&&u<=36||u>=37&&u<=40||u===45||c.ctrlKey||m)&&(d(),s.nodeChanged()),u!==46&&u!==8||s.nodeChanged(),l.get()&&a.typing&&!ym(yl(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",c=>{const u=c.keyCode;if(c.isDefaultPrevented())return;if(u>=33&&u<=36||u>=37&&u<=40||u===45)return void(a.typing&&d(c));const m=c.ctrlKey&&!c.altKey||c.metaKey;if((u<16||u>20)&&u!==224&&u!==91&&!a.typing&&!m)return a.beforeChange(),Cl(a,!0,i),a.add({},c),void l.set(!0);(Et.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&a.beforeChange()}),s.on("mousedown",c=>{a.typing&&d(c)}),s.on("input",c=>{var u;c.inputType&&(c.inputType==="insertReplacementText"||(u=c).inputType==="insertText"&&u.data===null||(m=>m.inputType==="insertFromPaste"||m.inputType==="insertFromDrop")(c))&&d(c)}),s.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||s.nodeChanged()})})(t,r,n),(s=>{s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo")})(t),r},QA=[9,27,Q.HOME,Q.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Q.DOWN,Q.UP,Q.LEFT,Q.RIGHT].concat(Et.browser.isFirefox()?[224]:[]),o1="data-mce-placeholder",r1=t=>t.type==="keydown"||t.type==="keyup",s1=t=>{const e=t.keyCode;return e===Q.BACKSPACE||e===Q.DELETE},JA=(t,e)=>({from:t,to:e}),Sm=(t,e)=>{const n=R(t),o=R(e.container());return ll(n,o).map(r=>((s,a)=>({block:s,position:a}))(r,e))},a1=(t,e)=>zo(e,n=>Js(n)||ln(n.dom),n=>kt(n,t)).filter(je).getOr(t),i1=(t,e)=>{const n=((o,r)=>{const s=he(o);return xs(s,a=>r.isBlock(wt(a))).fold(Y(s),a=>s.slice(0,a))})(t,e);return U(n,Ut),n},l1=(t,e,n)=>{const o=ro(n,e);return Zt(o.reverse(),r=>ve(t,r)).each(Ut)},tT=(t,e,n,o,r)=>{if(ve(o,n))return wo(n),Ce(n.dom);((a,i)=>ft(Gg(i),l=>!ve(a,l)).length===0)(o,r)&&ve(o,e)&&Me(r,ne("br"));const s=Ie(n.dom,I.before(r.dom));return U(i1(e,o),a=>{Me(r,a)}),l1(o,t,e),s},eT=(t,e,n,o)=>{if(ve(o,n)){if(ve(o,e)){const s=i=>{const l=(d,c)=>Ad(d).fold(()=>c,u=>((m,p)=>m.isInline(wt(p)))(o,u)?l(u,c.concat(Zo(u))):c);return l(i,[])},a=Es(s(n),(i,l)=>(op(i,l),l),zr());Pr(e),Gt(e,a)}return Ut(n),Ce(e.dom)}const r=dn(n.dom);return U(i1(e,o),s=>{Gt(n,s)}),l1(o,t,e),r},d1=(t,e)=>{Yr(t,e.dom).bind(n=>C.from(n.getNode())).map(R).filter(Jo).each(Ut)},c1=(t,e,n,o)=>(d1(!0,e),d1(!1,n),((r,s)=>pn(s,r)?((a,i)=>{const l=ro(i,a);return C.from(l[l.length-1])})(s,r):C.none())(e,n).fold(et(eT,t,e,n,o),et(tT,t,e,n,o))),u1=(t,e,n,o,r)=>e?c1(t,o,n,r):c1(t,n,o,r),Nm=(t,e)=>{const n=R(t.getBody());return((r,s,a,i)=>i.collapsed?((l,d,c,u)=>{const m=Sm(d,I.fromRangeStart(u)),p=m.bind(f=>Ye(c,d,f.position).bind(h=>Sm(d,h).map(g=>((b,v,y,E)=>$t(E.position.getNode())&&!ve(b,E.block)?Yr(!1,E.block.dom).bind(w=>w.isEqual(E.position)?Ye(y,v,w).bind(x=>Sm(v,x)):C.some(E)).getOr(E):E)(l,d,c,g))));return pe(m,p,JA).filter(f=>(h=>!kt(h.from.block,h.to.block))(f)&&((h,g)=>{const b=R(h);return kt(a1(b,g.from.block),a1(b,g.to.block))})(d,f)&&(h=>Lt(h.from.block.dom)===!1&&Lt(h.to.block.dom)===!1)(f)&&(h=>{const g=b=>ih(b)||Yd(b.dom)||Ur(b);return g(h.from.block)&&g(h.to.block)})(f)&&(h=>!(pn(h.to.block,h.from.block)||pn(h.from.block,h.to.block)))(f))})(r,s,a,i):C.none())(t.schema,n.dom,e,t.selection.getRng()).map(r=>()=>{u1(n,e,r.from.block,r.to.block,t.schema).each(s=>{t.selection.setRng(s.toRange())})})},m1=(t,e)=>{const n=R(e),o=et(kt,t);return Zn(n,Js,o).isSome()},nT=t=>{const e=R(t.getBody());return((n,o)=>{const r=Ie(n.dom,I.fromRangeStart(o)).isNone(),s=Oe(n.dom,I.fromRangeEnd(o)).isNone();return!((a,i)=>m1(a,i.startContainer)||m1(a,i.endContainer))(n,o)&&r&&s})(e,t.selection.getRng())?(n=>C.some(()=>{n.setContent(""),n.selection.setCursorLocation()}))(t):((n,o,r)=>{const s=o.getRng();return pe(ll(n,R(s.startContainer)),ll(n,R(s.endContainer)),(a,i)=>kt(a,i)?C.none():C.some(()=>{s.deleteContents(),u1(n,!0,a,i,r).each(l=>{o.setRng(l.toRange())})})).getOr(C.none())})(e,t.selection,t.schema)},Rm=(t,e)=>t.selection.isCollapsed()?C.none():nT(t),ao=(t,e,n,o,r)=>C.from(e._selectionOverrides.showCaret(t,n,o,r)),Pa=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),Am=(t,e,n)=>e.collapsed?((o,r,s)=>{const a=Lc(1,o.getBody(),r),i=I.fromRangeStart(a),l=i.getNode();if(aa(l))return ao(1,o,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(aa(d))return ao(1,o,d,!1,!1);const c=ur(o.dom.getRoot(),i.getNode());return aa(c)?ao(1,o,c,!1,s):C.none()})(t,e,n).getOr(e):e,oT=t=>Ao(t)||va(t),rT=t=>To(t)||ya(t),f1=(t,e,n,o,r,s)=>{ao(o,t,s.getNode(!r),r,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),((a,i)=>{H(i)&&i.data.length===0&&a.remove(i)})(t.dom,n)},Tm=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!H(r.commonAncestorContainer))return C.none();const s=o?ae.Forwards:ae.Backwards,a=In(n.getBody()),i=et(Mc,o?a.next:a.prev),l=o?oT:rT,d=ua(s,n.getBody(),r),c=i(d),u=c&&Je(o,c);if(!u||!zi(d,u))return C.none();if(l(u))return C.some(()=>f1(n,r,d.getNode(),s,o,u));const m=i(u);return m&&l(m)&&zi(u,m)?C.some(()=>f1(n,r,d.getNode(),s,o,m)):C.none()})(t,e),Om=(t,e)=>{const n=t.getBody();return e?Ce(n).filter(Ao):dn(n).filter(To)},Bm=t=>{const e=t.selection.getRng();return!e.collapsed&&(Om(t,!0).exists(n=>n.isEqual(I.fromRangeStart(e)))||Om(t,!1).exists(n=>n.isEqual(I.fromRangeEnd(e))))},nn=Dn([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),g1=(t,e,n,o)=>Ye(e,t,n).bind(r=>{return s=r.getNode(),W(s)&&(Js(R(s))||Ur(R(s)))||((a,i,l,d,c)=>{const u=m=>c.isInline(m.nodeName.toLowerCase())&&!Ln(l,d,a);return _b(!i,l).fold(()=>_b(i,d).fold(jt,u),u)})(t,e,n,r,o)?C.none():e&&Lt(r.getNode())||!e&&Lt(r.getNode(!0))?((a,i,l,d,c)=>{const u=c.getNode(!l);return ll(R(i),R(d.getNode())).map(m=>ve(a,m)?nn.remove(m.dom):nn.moveToElement(u)).orThunk(()=>C.some(nn.moveToElement(u)))})(o,t,e,n,r):e&&To(n)||!e&&Ao(n)?C.some(nn.moveToPosition(r)):C.none();var s}),p1=(t,e)=>C.from(ur(t.getBody(),e)),sT=(t,e)=>{const n=t.selection.getNode();return p1(t,n).filter(Lt).fold(()=>((o,r,s,a)=>{const i=Lc(r?1:-1,o,s),l=I.fromRangeStart(i),d=R(o);return!r&&To(l)?C.some(nn.remove(l.getNode(!0))):r&&Ao(l)?C.some(nn.remove(l.getNode())):!r&&Ao(l)&&sl(d,l,a)?dv(d,l,a).map(c=>nn.remove(c.getNode())):r&&To(l)&&Eu(d,l,a)?xR(d,l,a).map(c=>nn.remove(c.getNode())):((c,u,m,p)=>((f,h)=>{const g=h.getNode(!f),b=f?"after":"before";return nt(g)&&g.getAttribute("data-mce-caret")===b})(u,m)?((f,h)=>Yt(h)?C.none():f&&Lt(h.nextSibling)?C.some(nn.moveToElement(h.nextSibling)):!f&&Lt(h.previousSibling)?C.some(nn.moveToElement(h.previousSibling)):C.none())(u,m.getNode(!u)).orThunk(()=>g1(c,u,m,p)):g1(c,u,m,p).bind(f=>((h,g,b)=>b.fold(v=>C.some(nn.remove(v)),v=>C.some(nn.moveToElement(v)),v=>Ln(g,v,h)?C.none():C.some(nn.moveToPosition(v))))(c,m,f)))(o,r,l,a)})(t.getBody(),e,t.selection.getRng(),t.schema).map(o=>()=>o.fold(((r,s)=>a=>(r._selectionOverrides.hideFakeCaret(),dr(r,s,R(a)),!0))(t,e),((r,s)=>a=>{const i=s?I.before(a):I.after(a);return r.selection.setRng(i.toRange()),!0})(t,e),(r=>s=>(r.selection.setRng(s.toRange()),!0))(t))),()=>C.some(vt))},h1=t=>{const e=t.dom,n=t.selection,o=ur(t.getBody(),n.getNode());if(ln(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(I.before(r).toRange())}return!0},Pm=(t,e)=>t.selection.isCollapsed()?sT(t,e):((n,o)=>{const r=n.selection.getNode();return Lt(r)&&!yi(r)?p1(n,r.parentNode).filter(Lt).fold(()=>C.some(()=>{var s;s=R(n.getBody()),U(be(s,".mce-offscreen-selection"),Ut),dr(n,o,R(n.selection.getNode())),Nu(n)}),()=>C.some(vt)):Bm(n)?C.some(()=>{Ov(n,n.selection.getRng(),R(n.getBody()))}):C.none()})(t,e),b1=t=>t.hasOwnProperty("text"),v1=t=>t.hasOwnProperty("marker"),y1=(t,e)=>{const n=(r,s)=>{if(H(r))return{text:r,offset:s};{const a=e(),i=r.childNodes;return s<i.length?(r.insertBefore(a,i[s]),{marker:a,before:!0}):(r.appendChild(a),{marker:a,before:!1})}},o=n(t.endContainer,t.endOffset);return{start:n(t.startContainer,t.startOffset),end:o}},C1=t=>{var e,n;const{start:o,end:r}=t,s=new window.Range;return b1(o)?s.setStart(o.text,o.offset):v1(o)&&(o.before?s.setStartBefore(o.marker):s.setStartAfter(o.marker),(e=o.marker.parentNode)===null||e===void 0||e.removeChild(o.marker)),b1(r)?s.setEnd(r.text,r.offset):v1(r)&&(r.before?s.setEndBefore(r.marker):s.setEndAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),s},Dm=(t,e)=>{var n;const o=t.dom,r=o.getParent(t.selection.getStart(),o.isBlock),s=o.getParent(t.selection.getEnd(),o.isBlock),a=t.getBody();if(((n=r?.nodeName)===null||n===void 0?void 0:n.toLowerCase())==="div"&&r&&s&&r===a.firstChild&&s===a.lastChild&&!o.isEmpty(a)){const i=r.cloneNode(!1),l=()=>{if(e?Rv(t):il(t),a.firstChild!==r){const d=y1(t.selection.getRng(),()=>document.createElement("span"));Array.from(a.childNodes).forEach(c=>i.appendChild(c)),a.appendChild(i),t.selection.setRng(C1(d))}};return C.some(l)}return C.none()},Lm=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=I.fromRangeStart(n.selection.getRng());return Ye(o,n.getBody(),r).filter(s=>o?vR(s):yR(s)).bind(s=>Dc(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):C.none(),as=H,w1=t=>as(t)&&t.data[0]===se,E1=t=>as(t)&&t.data[t.data.length-1]===se,x1=t=>{var e;return((e=t.ownerDocument)!==null&&e!==void 0?e:document).createTextNode(se)},Nl=(t,e)=>t?(n=>{var o;if(as(n.previousSibling))return E1(n.previousSibling)||n.previousSibling.appendData(se),n.previousSibling;if(as(n))return w1(n)||n.insertData(0,se),n;{const r=x1(n);return(o=n.parentNode)===null||o===void 0||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(as(n.nextSibling))return w1(n.nextSibling)||n.nextSibling.insertData(0,se),n.nextSibling;if(as(n))return E1(n)||n.appendData(se),n;{const s=x1(n);return n.nextSibling?(o=n.parentNode)===null||o===void 0||o.insertBefore(s,n.nextSibling):(r=n.parentNode)===null||r===void 0||r.appendChild(s),s}})(e),aT=et(Nl,!0),iT=et(Nl,!1),k1=(t,e)=>H(t.container())?Nl(e,t.container()):Nl(e,t.getNode()),_1=(t,e)=>{const n=e.get();return n&&t.container()===n&&Eo(n)},Mm=(t,e)=>e.fold(n=>{nr(t.get());const o=aT(n);return t.set(o),C.some(I(o,o.length-1))},n=>Ce(n).map(o=>{if(_1(o,t)){const r=t.get();return I(r,1)}{nr(t.get());const r=k1(o,!0);return t.set(r),I(r,1)}}),n=>dn(n).map(o=>{if(_1(o,t)){const r=t.get();return I(r,r.length-1)}{nr(t.get());const r=k1(o,!1);return t.set(r),I(r,r.length-1)}}),n=>{nr(t.get());const o=iT(n);return t.set(o),C.some(I(o,1))}),S1=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return C.none()},Se=Dn([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),N1=(t,e)=>_o(e,t)||t,lT=(t,e,n)=>{const o=_v(n),r=N1(e,o.container());return Oo(t,r,o).fold(()=>Oe(r,o).bind(et(Oo,t,r)).map(s=>Se.before(s)),C.none)},dT=(t,e)=>rr(t,e)===null,R1=(t,e,n)=>Oo(t,e,n).filter(et(dT,e)),cT=(t,e,n)=>{const o=Sv(n);return R1(t,e,o).bind(r=>Ie(r,o).isNone()?C.some(Se.start(r)):C.none())},uT=(t,e,n)=>{const o=_v(n);return R1(t,e,o).bind(r=>Oe(r,o).isNone()?C.some(Se.end(r)):C.none())},mT=(t,e,n)=>{const o=Sv(n),r=N1(e,o.container());return Oo(t,r,o).fold(()=>Ie(r,o).bind(et(Oo,t,r)).map(s=>Se.after(s)),C.none)},A1=t=>!kv(Im(t)),jn=(t,e,n)=>S1([lT,cT,uT,mT],[t,e,n]).filter(A1),Im=t=>t.fold(xe,xe,xe,xe),T1=t=>t.fold(Y("before"),Y("start"),Y("end"),Y("after")),Rl=t=>t.fold(Se.before,Se.before,Se.after,Se.after),Fm=t=>t.fold(Se.start,Se.start,Se.end,Se.end),fT=(t,e,n,o,r,s)=>pe(Oo(e,n,o),Oo(e,n,r),(a,i)=>a!==i&&((l,d,c)=>{const u=_o(d,l),m=_o(c,l);return W(u)&&u===m})(n,a,i)?Se.after(t?a:i):s).getOr(s),gT=(t,e)=>t.fold(Wt,n=>{return r=e,!(T1(o=n)===T1(r)&&Im(o)===Im(r));var o,r}),pT=(t,e)=>t?e.fold(fn(C.some,Se.start),C.none,fn(C.some,Se.after),C.none):e.fold(C.none,fn(C.some,Se.before),C.none,fn(C.some,Se.end)),O1=(t,e,n)=>{const o=t?1:-1;return e.setRng(I(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Hn;(function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"})(Hn||(Hn={}));const Al=(t,e)=>t===ae.Backwards?ks(e):e,hT=(t,e,n)=>t===ae.Forwards?e.next(n):e.prev(n),bT=(t,e,n,o)=>$t(o.getNode(e===ae.Forwards))?Hn.Br:Ln(n,o)===!1?Hn.Block:Hn.Wrap,B1=(t,e,n,o)=>{const r=In(n);let s=o;const a=[];for(;s;){const i=hT(e,r,s);if(!i)break;if($t(i.getNode(!1)))return e===ae.Forwards?{positions:Al(e,a).concat([i]),breakType:Hn.Br,breakAt:C.some(i)}:{positions:Al(e,a),breakType:Hn.Br,breakAt:C.some(i)};if(i.isVisible()){if(t(s,i)){const l=bT(0,e,s,i);return{positions:Al(e,a),breakType:l,breakAt:C.some(i)}}a.push(i),s=i}else s=i}return{positions:Al(e,a),breakType:Hn.Eol,breakAt:C.none()}},P1=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const s=e(n,r).positions;return t===ae.Backwards?s.concat(r):[r].concat(s)}).getOr([]),Um=(t,e)=>De(t,(n,o)=>n.fold(()=>C.some(o),r=>pe(Re(r.getClientRects()),Re(o.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?o:r}).or(n)),C.none()),Tl=(t,e)=>Re(e.getClientRects()).bind(n=>Um(t,n.left)),Da=et(B1,I.isAbove,-1),La=et(B1,I.isBelow,1),D1=et(P1,-1,Da),L1=et(P1,1,La),M1=(t,e)=>Da(t,e).breakAt.isNone(),I1=(t,e)=>La(t,e).breakAt.isNone(),vT=(t,e)=>Tl(D1(t,e),e),yT=(t,e)=>Tl(L1(t,e),e),CT=Lt,F1=(t,e)=>Math.abs(t.left-e),U1=(t,e)=>Math.abs(t.right-e),z1=(t,e)=>ri(t,(n,o)=>{const r=Math.min(F1(n,e),U1(n,e)),s=Math.min(F1(o,e),U1(o,e));return s===r&&kr(o,"node")&&CT(o.node)||s<r?o:n}),wT=t=>{const e=n=>Ct(n,o=>{const r=tr(o);return r.node=t,r});if(nt(t))return e(t.getClientRects());if(H(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},j1=t=>We(t,wT);var Ma;(function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"})(Ma||(Ma={}));const H1=(t,e,n,o,r,s)=>{let a=0;const i=[],l=u=>{let m=j1([u]);t===-1&&(m=m.reverse());for(let p=0;p<m.length;p++){const f=m[p];if(!n(f,d)){if(i.length>0&&e(f,Fo(i))&&a++,f.line=a,r(f))return!0;i.push(f)}}return!1},d=Fo(s.getClientRects());if(!d)return i;const c=s.getNode();return c&&(l(c),((u,m,p,f)=>{let h=f;for(;h=la(h,u,hh,m);)if(p(h))return})(t,o,l,c)),i},ET=et(H1,Ma.Up,ta,ea),xT=et(H1,Ma.Down,ea,ta),$1=t=>Fo(t.getClientRects()),V1=t=>e=>((n,o)=>o.line>n)(t,e),zm=t=>e=>((n,o)=>o.line===n)(t,e),io=(t,e)=>{t.selection.setRng(e),ba(t,t.selection.getRng())},jm=(t,e,n)=>C.some(Am(t,e,n)),q1=(t,e,n,o,r,s)=>{const a=e===ae.Forwards,i=In(t.getBody()),l=et(Mc,a?i.next:i.prev),d=a?o:r;if(!n.collapsed){const f=Ti(n);if(s(f))return ao(e,t,f,e===ae.Backwards,!1);if(Bm(t)){const h=n.cloneRange();return h.collapse(e===ae.Backwards),C.from(h)}}const c=ua(e,t.getBody(),n);if(d(c))return Pa(t,c.getNode(!a));let u=l(c);const m=dh(n);if(!u)return m?C.some(n):C.none();if(u=Je(a,u),d(u))return ao(e,t,u.getNode(!a),a,!1);const p=l(u);return p&&d(p)&&zi(u,p)?ao(e,t,p.getNode(!a),a,!1):m?jm(t,u.toRange(),!1):C.none()},W1=(t,e,n,o,r,s)=>{const a=ua(e,t.getBody(),n),i=Fo(a.getClientRects()),l=e===Ma.Down,d=t.getBody();if(!i)return C.none();if(Bm(t)){const h=l?I.fromRangeEnd(n):I.fromRangeStart(n);return(l?yT:vT)(d,h).orThunk(()=>C.from(h)).map(g=>g.toRange())}const c=(l?xT:ET)(d,V1(1),a),u=ft(c,zm(1)),m=i.left,p=z1(u,m);if(p&&s(p.node)){const h=Math.abs(m-p.left),g=Math.abs(m-p.right);return ao(e,t,p.node,h<g,!1)}let f;if(f=o(a)?a.getNode():r(a)?a.getNode(!0):Ti(n),f){const h=((b,v,y,E)=>{const w=In(v);let x,S,_,O;const D=[];let k=0;b===1?(x=w.next,S=ea,_=ta,O=I.after(E)):(x=w.prev,S=ta,_=ea,O=I.before(E));const N=$1(O);do{if(!O.isVisible())continue;const T=$1(O);if(_(T,N))continue;D.length>0&&S(T,Fo(D))&&k++;const F=tr(T);if(F.position=O,F.line=k,y(F))return D;D.push(F)}while(O=x(O));return D})(e,d,V1(1),f);let g=z1(ft(h,zm(1)),m);if(g||(g=Fo(ft(h,zm(0))),g))return jm(t,g.position.toRange(),!1)}return u.length===0?Hm(t,l).filter(l?r:o).map(h=>Am(t,h.toRange(),!1)):C.none()},Hm=(t,e)=>{const n=t.selection.getRng(),o=e?I.fromRangeEnd(n):I.fromRangeStart(n),r=(s=o.container(),a=t.getBody(),Zn(R(s),i=>NN(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=La(r,o);return go(i.positions)}{const i=Da(r,o);return Re(i.positions)}},K1=(t,e,n)=>Hm(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),Ol=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},Y1=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},G1=(t,e,n)=>Mm(e,n).map(o=>(Ol(t,o),n)),kT=(t,e,n)=>{const o=t.getBody(),r=((s,a,i)=>{const l=I.fromRangeStart(s);if(s.collapsed)return l;{const d=I.fromRangeEnd(s);return i?Ie(a,d).getOr(d):Oe(a,l).getOr(l)}})(t.selection.getRng(),o,n);return((s,a,i,l)=>{const d=Je(s,l),c=jn(a,i,d);return jn(a,i,d).bind(et(pT,s)).orThunk(()=>((u,m,p,f,h)=>{const g=Je(u,h);return Ye(u,p,g).map(et(Je,u)).fold(()=>f.map(Rl),b=>jn(m,p,b).map(et(fT,u,m,p,g,b)).filter(et(gT,f))).filter(A1)})(s,a,i,c,l))})(n,et(cr,t),o,r).bind(s=>G1(t,e,s))},X1=(t,e,n)=>!!sa(t)&&kT(t,e,n).isSome(),Z1=(t,e,n)=>!!sa(e)&&((o,r)=>{const s=r.selection.getRng(),a=o?I.fromRangeEnd(s):I.fromRangeStart(s);return!!(i=>Nt(i.selection.getSel().modify))(r)&&(o&&gc(a)?O1(!0,r.selection,a):!(o||!pc(a))&&O1(!1,r.selection,a))})(t,e),_T=t=>{const e=re(null),n=et(cr,t);return t.on("NodeChange",o=>{sa(t)&&(((r,s,a)=>{const i=Ct(be(R(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),c=>c.dom),l=ft(i,r),d=ft(a,r);U(ei(l,d),et(Y1,!1)),U(ei(d,l),et(Y1,!0))})(n,t.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=I.fromRangeStart(r.selection.getRng());I.isTextPosition(i)&&!(l=>gc(l)||pc(l))(i)&&(Ol(r,EN(a,i)),s.set(null))}})(t,e),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=ft(i,r);U(l,d=>{const c=I.fromRangeStart(s.selection.getRng());jn(r,s.getBody(),c).bind(u=>G1(s,a,u))})}})(n,t,e,o.parents))}),e},ST=et(Z1,!0),NT=et(Z1,!1),Bl=(t,e,n)=>{if(sa(t)){const o=Hm(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?I.fromRangeEnd(r):I.fromRangeStart(r)});return jn(et(cr,t),t.getBody(),o).exists(r=>{const s=Rl(r);return Mm(n,s).exists(a=>(Ol(t,a),!0))})}return!1},Q1=(t,e)=>n=>Mm(e,n).map(o=>()=>Ol(t,o)),J1=(t,e,n,o)=>{const r=t.getBody(),s=et(cr,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),il(t),jn(s,r,I.fromRangeStart(t.selection.getRng())).map(Fm).bind(Q1(t,e)).each(ws)}),t.nodeChanged()},$m=(t,e,n)=>{if(t.selection.isCollapsed()&&sa(t)){const o=I.fromRangeStart(t.selection.getRng());return((r,s,a,i)=>{const l=((u,m)=>_o(m,u)||u)(r.getBody(),i.container()),d=et(cr,r),c=jn(d,l,i);return c.bind(u=>a?u.fold(Y(C.some(Fm(u))),C.none,Y(C.some(Rl(u))),C.none):u.fold(C.none,Y(C.some(Rl(u))),C.none,Y(C.some(Fm(u))))).map(Q1(r,s)).getOrThunk(()=>{const u=Kr(a,l,i),m=u.bind(p=>jn(d,l,p));return pe(c,m,()=>Oo(d,l,i).bind(p=>(f=>pe(Ce(f),dn(f),(h,g)=>{const b=Je(!0,h),v=Je(!1,g);return Oe(f,b).forall(y=>y.isEqual(v))}).getOr(!0))(p)?C.some(()=>{dr(r,a,R(p))}):C.none())).getOrThunk(()=>m.bind(()=>u.map(p=>()=>{a?J1(r,s,i,p):J1(r,s,p,i)})))})})(t,e,n,o)}return C.none()},tw=(t,e)=>{const n=R(t.getBody()),o=R(t.selection.getStart()),r=ro(o,n);return xs(r,e).fold(Y(r),s=>r.slice(0,s))},RT=t=>Od(t)===1,ew=(t,e)=>{const n=et(sy,t);return We(e,o=>n(o)?[o.dom]:[])},nw=t=>{const e=(n=>tw(n,o=>n.schema.isBlock(wt(o))))(t);return ew(t,e)},AT=(t,e)=>{const n=ft((o=>tw(o,r=>o.schema.isBlock(wt(r))||(s=>Od(s)>1)(r)))(t),RT);return go(n).bind(o=>{const r=I.fromRangeStart(t.selection.getRng());return Av(e,r,o.dom)&&!tu(o)?C.some(()=>((s,a,i,l)=>{const d=ew(a,l);if(d.length===0)dr(a,s,i);else{const c=ry(i.dom,d);a.selection.setRng(c.toRange())}})(e,t,o,n)):C.none()})},ow=(t,e)=>{const n=t.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return $t(s)&&!Ee(a)&&r.dom.isEmpty(a)})(t,n)||tu(R(n))?ry(n,e):((r,s)=>{const{caretContainer:a,caretPosition:i}=oy(s);return r.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(o.toRange())},rw=t=>H(t.startContainer),TT=t=>{const e=t.selection.getRng();return(n=>n.startOffset===0&&rw(n))(e)&&((n,o)=>{const r=o.startContainer.parentElement;return!Ee(r)&&sy(n,R(r))})(t,e)&&(n=>(o=>(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!Ee(s)&&!Ee(a)&&s.isEqualNode(a)})(o)&&(r=>{const s=r.endContainer;return r.endOffset===(H(s)?s.length:s.childNodes.length)})(o))(n)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n))(e)},Vm=(t,e)=>t.selection.isCollapsed()?AT(t,e):(n=>{if(TT(n)){const o=nw(n);return C.some(()=>{il(n),((r,s)=>{const a=ei(s,nw(r));a.length>0&&ow(r,a)})(n,o)})}return C.none()})(t),Ia=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(rw(n)||e.dom.isEmpty(n.startContainer))&&!(o=>{return r=R(o.selection.getStart()),s=o.schema,up(r,a=>Ge(a.dom),a=>s.isBlock(wt(a)));var r,s})(e)})(t)&&ow(t,[]),!0),qm=(t,e,n)=>W(n)?C.some(()=>{t._selectionOverrides.hideFakeCaret(),dr(t,e,R(n))}):C.none(),Wm=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?va:ya,s=o?ae.Forwards:ae.Backwards,a=ua(s,n.getBody(),n.selection.getRng());return r(a)?qm(n,o,a.getNode(!o)):C.from(Je(o,a)).filter(i=>r(i)&&zi(a,i)).bind(i=>qm(n,o,i.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return Pn(r)?qm(n,o,r):C.none()})(t,e),Km=t=>si(t??"").getOr(0),sw=(t,e)=>(t||wt(e)==="table"?"margin":"padding")+(On(e,"direction")==="rtl"?"-right":"-left"),aw=t=>{const e=lw(t);return!t.mode.isReadOnly()&&(e.length>1||((n,o)=>Kn(o,r=>{const s=sw(eb(n),r),a=gi(r,s).map(Km).getOr(0);return n.dom.getContentEditable(r.dom)!=="false"&&a>0}))(t,e))},iw=t=>fc(t)||Ur(t),lw=t=>ft(Id(t.selection.getSelectedBlocks()),e=>!iw(e)&&!(n=>hn(n).exists(iw))(e)&&zo(e,n=>ln(n.dom)||Lt(n.dom)).exists(n=>ln(n.dom))),dw=(t,e)=>{var n,o;if(t.mode.isReadOnly())return;const{dom:r}=t,s=yS(t),a=(o=(n=/[a-z%]+$/i.exec(s))===null||n===void 0?void 0:n[0])!==null&&o!==void 0?o:"px",i=Km(s),l=eb(t);U(lw(t),d=>{((c,u,m,p,f,h)=>{const g=sw(m,R(h)),b=Km(c.getStyle(h,g));if(u==="outdent"){const v=Math.max(0,b-p);c.setStyle(h,g,v?v+f:"")}else{const v=b+p+f;c.setStyle(h,g,v)}})(r,e,l,i,a,d.dom)})},cw=t=>dw(t,"outdent"),uw=t=>{if(t.selection.isCollapsed()&&aw(t)){const e=t.dom,n=t.selection.getRng(),o=I.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(r!==null&&wu(R(r),o,t.schema))return C.some(()=>cw(t))}return C.none()},mw=(t,e,n)=>xr([uw,Pm,Tm,(o,r)=>$m(o,e,r),Nm,Lu,Lm,Wm,Rm,Vm,Dm],o=>o(t,n)).filter(o=>t.selection.isEditable()),fw=t=>t.touches===void 0||t.touches.length!==1?C.none():C.some(t.touches[0]),Ym=(t,e)=>pt(t,e.nodeName),OT=(t,e)=>!!H(e)||!!nt(e)&&!(Ym(t.getBlockElements(),e)||Xe(e)||Wo(t,e)||qd(e)),BT=(t,e)=>{if(H(e)){if(e.data.length===0)return!0;if(/^\s+$/.test(e.data))return!e.nextSibling||Ym(t,e.nextSibling)||qd(e.nextSibling)}return!1},Gm=t=>t.dom.create(ye(t),ra(t)),gw=(t,e,n)=>{const o=R(Gm(t)),r=zr();Gt(o,r),n(e,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},pw=t=>e=>(" "+e.attr("class")+" ").indexOf(t)!==-1,PT=(t,e,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?e.charAt(s-1):"";if(a==='"')return o;if(a===">"){const i=e.lastIndexOf("<",s);if(i!==-1&&e.substring(i,s).indexOf('contenteditable="false"')!==-1)return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode(typeof r[1]=="string"?r[1]:r[0])+"</span>"},DT=(t,e)=>Kn(t,n=>{const o=e.match(n);return o!==null&&o[0].length===e.length}),hw=(t,e)=>{e.hasAttribute("data-mce-caret")&&(hc(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},LT=(t,e)=>{const n=(o=>ui(R(o.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull())(t);if(n)return e.type==="compositionstart"?(e.preventDefault(),e.stopPropagation(),void hw(t,n)):void(lh(n)&&(hw(t,n),t.undoManager.add()))},bw=Lt,vw=(t,e,n)=>{const o=In(t.getBody()),r=et(Mc,e===1?o.next:o.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(I.fromRangeStart(n))){const a=R((i=>{const l=i.dom.create(ye(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));e===1?Qn(R(s),a):Me(R(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},yw=(t,e)=>((n,o)=>{const r=o?ae.Forwards:ae.Backwards,s=n.selection.getRng();return((a,i,l)=>q1(i,a,l,Ao,To,bw))(r,n,s).orThunk(()=>(vw(n,r,s),C.none()))})(t,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return kv(r)?!o:o})(t.selection,e)).exists(n=>(io(t,n),!0)),Cw=(t,e)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>W1(i,a,l,d=>Ao(d)||ov(d),d=>To(d)||yu(d),bw))(r,n,s).orThunk(()=>(vw(n,r,s),C.none()))})(t,e).exists(n=>(io(t,n),!0)),ww=(t,e)=>K1(t,e,e?To:Ao),Pl=(t,e)=>Om(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(io(t,n),!0)),MT=t=>_t(["figcaption"],wt(t)),Ew=(t,e)=>!!t.selection.isCollapsed()&&((n,o)=>{const r=R(n.getBody()),s=I.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const d=et(kt,i);return zo(R(a.container()),c=>l.isBlock(wt(c)),d).filter(MT)})(s,r,n.schema).exists(()=>{if(((a,i,l)=>i?I1(a.dom,l):M1(a.dom,l))(r,o,s)){const a=gw(n,r,o?Gt:Md);return n.selection.setRng(a),!0}return!1})})(t,e),xw=(t,e)=>((n,o)=>o?C.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((s,a)=>{const i=s.selection.getRng(),l=I.fromRangeStart(i);return!(s.getBody().lastChild!==a||!I1(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):C.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>C.from(n.dom.getParent(r,"details")).map(s=>((a,i,l)=>{const d=a.selection.getRng(),c=I.fromRangeStart(d);return!(a.getBody().firstChild!==i||!M1(l,c)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,r))).getOr(!1))(t,e),kw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},_w=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,ct=(t,...e)=>()=>t.apply(null,e),Fa=(t,e)=>Zt(((n,o)=>We((r=>Ct(r,s=>({...kw,...s})))(n),r=>_w(r,o)?[r]:[]))(t,e),n=>n.action()),Sw=(t,e)=>xr(((n,o)=>We((r=>Ct(r,s=>({...kw,...s})))(n),r=>_w(r,o)?[r]:[]))(t,e),n=>n.action()),Nw=(t,e)=>{const n=e?ae.Forwards:ae.Backwards,o=t.selection.getRng();return q1(t,n,o,va,ya,Pn).exists(r=>(io(t,r),!0))},Rw=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return W1(t,n,o,va,ya,Pn).exists(r=>(io(t,r),!0))},Aw=(t,e)=>K1(t,e,e?ya:va),Tw=Dn([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ua={...Tw,none:t=>Tw.none(t)},Ow=(t,e,n)=>We(he(t),o=>gn(o,e)?n(o)?[o]:[]:Ow(o,e,n)),Bw=(t,e)=>Br(t,"table",e),Xm=(t,e,n,o,r=Wt)=>{const s=o===1;if(!s&&n<=0)return Ua.first(t[0]);if(s&&n>=t.length-1)return Ua.last(t[t.length-1]);{const a=n+o,i=t[a];return r(i)?Ua.middle(e,i):Xm(t,e,a,o,r)}},Pw=(t,e)=>Bw(t,e).bind(n=>{const o=Ow(n,"th,td",Wt);return xs(o,r=>kt(t,r)).map(r=>({index:r,all:o}))}),IT=["img","br"],FT=t=>{return(e=t,mc.getOption(e)).filter(n=>n.trim().length!==0||n.indexOf(Jt)>-1).isSome()||_t(IT,wt(t))||(n=>ii(n)&&He(n,"contenteditable")==="false")(t);var e},Dw=(t,e,n,o,r)=>{const s=be(R(n),"td,th,caption").map(i=>i.dom),a=ft(((i,l)=>We(l,d=>{const c=((u,m)=>({left:u.left-m,top:u.top-m,right:u.right+-2,bottom:u.bottom+-2,width:u.width+m,height:u.height+m}))(tr(d.getBoundingClientRect()),-1);return[{x:c.left,y:i(c),cell:d},{x:c.right,y:i(c),cell:d}]}))(t,s),i=>e(i,r));return((i,l,d)=>De(i,(c,u)=>c.fold(()=>C.some(u),m=>{const p=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-d)),f=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-d));return C.some(f<p?u:m)}),C.none()))(a,o,r).map(i=>i.cell)},UT=et(Dw,t=>t.bottom,(t,e)=>t.y<e),zT=et(Dw,t=>t.top,(t,e)=>t.y>e),Lw=(t,e,n)=>{const o=t(e,n);return(r=>r.breakType===Hn.Wrap&&r.positions.length===0)(o)||!$t(n.getNode())&&(r=>r.breakType===Hn.Br&&r.positions.length===1)(o)?!((r,s,a)=>a.breakAt.exists(i=>r(s,i).breakAt.isSome()))(t,e,o):o.breakAt.isNone()},jT=et(Lw,Da),HT=et(Lw,La),$T=(t,e,n,o)=>{const r=t.selection.getRng(),s=e?1:-1;return!(!yb()||!((a,i,l)=>{const d=I.fromRangeStart(i);return Yr(!a,l).exists(c=>c.isEqual(d))})(e,r,n)||(ao(s,t,n,!e,!1).each(a=>{io(t,a)}),0))},Mw=(t,e,n)=>{const o=((s,a)=>{const i=a.getNode(s);return Bn(i)?C.some(i):C.none()})(!!e,n),r=e===!1;o.fold(()=>io(t,n.toRange()),s=>Yr(r,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>io(t,n.toRange()),a=>((i,l,d)=>{l.undoManager.transact(()=>{const c=i?Qn:Me,u=gw(l,R(d),c);io(l,u)})})(e,t,s)))},VT=(t,e,n,o)=>{const r=t.selection.getRng(),s=I.fromRangeStart(r),a=t.getBody();if(!e&&jT(o,s)){const i=((l,d,c)=>((u,m)=>Re(m.getClientRects()).bind(p=>UT(u,p.left,p.top)).bind(p=>{return Tl(dn(f=p).map(h=>Da(f,h).positions.concat(h)).getOr([]),m);var f}))(d,c).orThunk(()=>Re(c.getClientRects()).bind(u=>Um(D1(l,I.before(d)),u.left))).getOr(I.before(d)))(a,n,s);return Mw(t,e,i),!0}if(e&&HT(o,s)){const i=((l,d,c)=>((u,m)=>go(m.getClientRects()).bind(p=>zT(u,p.left,p.top)).bind(p=>{return Tl(Ce(f=p).map(h=>[h].concat(La(f,h).positions)).getOr([]),m);var f}))(d,c).orThunk(()=>Re(c.getClientRects()).bind(u=>Um(L1(l,I.after(d)),u.left))).getOr(I.after(d)))(a,n,s);return Mw(t,e,i),!0}return!1},Iw=(t,e,n)=>C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>C.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),Fw=(t,e)=>Iw(t,e,$T),Zm=(t,e)=>Iw(t,e,VT),Uw=(t,e,n)=>n.fold(C.none,C.none,(o,r)=>{return(s=r,Dd(s,FT)).map(a=>(i=>{const l=Qr.exact(i,0,i,0);return GN(l)})(a));var s},o=>t.mode.isReadOnly()?C.none():(t.execCommand("mceTableInsertRowAfter"),zw(t,e,o))),zw=(t,e,n)=>{return Uw(t,e,(r=jo,Pw(o=n,void 0).fold(()=>Ua.none(o),s=>Xm(s.all,o,s.index,1,r))));var o,r},qT=(t,e,n)=>{return Uw(t,e,(r=jo,Pw(o=n,void 0).fold(()=>Ua.none(),s=>Xm(s.all,o,s.index,-1,r))));var o,r},jw=(t,e)=>{const n=["table","li","dl"],o=R(t.getBody()),r=a=>{const i=wt(a);return kt(a,o)||_t(n,i)},s=t.selection.getRng();return((a,i)=>((l,d,c=jt)=>c(d)?C.none():_t(l,wt(d))?C.some(d):Is(d,l.join(","),u=>gn(u,"table")||c(u)))(["td","th"],a,i))(R(e?s.endContainer:s.startContainer),r).map(a=>(Bw(a,r).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?zw:qT)(t,r,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1)},xn=(t,e)=>({container:t,offset:e}),Dl=Pt.DOM,Ll=t=>e=>t===e?-1:0,Qm=(t,e,n)=>{if(H(t)&&e>=0)return C.some(xn(t,e));{const o=Qo(Dl);return C.from(o.backwards(t,e,Ll(t),n)).map(r=>xn(r.container,r.container.data.length))}},Jm=(t,e,n)=>{if(!H(t))return C.none();const o=t.data;if(e>=0&&e<=o.length)return C.some(xn(t,e));{const r=Qo(Dl);return C.from(r.backwards(t,e,Ll(t),n)).bind(s=>{const a=s.container.data;return Jm(s.container,e+a.length,n)})}},Hw=(t,e,n)=>{if(!H(t))return C.none();const o=t.data;if(e<=o.length)return C.some(xn(t,e));{const r=Qo(Dl);return C.from(r.forwards(t,e,Ll(t),n)).bind(s=>Hw(s.container,e-o.length,n))}},tf=(t,e,n,o,r)=>{const s=Qo(t,(a=>i=>a.isBlock(i)||_t(["BR","IMG","HR","INPUT"],i.nodeName)||a.getContentEditable(i)==="false")(t));return C.from(s.backwards(e,n,o,r))},$w=t=>t!==""&&` \xA0\uFEFF\f
\r	\v`.indexOf(t)!==-1,WT=(t,e)=>t.substring(e.length),ef=(t,e,n,o=!1)=>{if(!(r=e).collapsed||!H(r.startContainer))return C.none();var r;const s={text:"",offset:0},a=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return tf(t,e.startContainer,e.startOffset,(i,l,d)=>(s.text=d+s.text,s.offset+=l,((c,u,m,p=!1)=>{let f;const h=m.charAt(0);for(f=u-1;f>=0;f--){const g=c.charAt(f);if(!p&&$w(g))return C.none();if(h===g&&ge(c,m,f,u))break}return C.some(f)})(s.text,s.offset,n,o).getOr(l)),a).bind(i=>{const l=e.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(e.endContainer,e.endOffset),l.collapsed)return C.none();const d=(c=>$e(c.toString().replace(/\u00A0/g," ")))(l);return d.lastIndexOf(n)!==0?C.none():C.some({text:WT(d,n),range:l,trigger:n})})},Vw=t=>{if((e=>e.nodeType===3)(t))return xn(t,t.data.length);{const e=t.childNodes;return e.length>0?Vw(e[e.length-1]):xn(t,e.length)}},qw=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?qw(n[e],0):n.length>0&&(o=>o.nodeType===1)(t)&&n.length===e?Vw(n[n.length-1]):xn(t,e)},Ww=(t,e,n,o={})=>{var r;const s=e(),a=(r=t.selection.getRng().startContainer.nodeValue)!==null&&r!==void 0?r:"",i=ft(s.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>(c=>u=>{const m=qw(u.startContainer,u.startOffset);return!((p,f)=>{var h;const g=(h=p.getParent(f.container,p.isBlock))!==null&&h!==void 0?h:p.getRoot();return tf(p,f.container,f.offset,(b,v)=>v===0?-1:v,g).filter(b=>{const v=b.container.data.charAt(b.offset-1);return!$w(v)}).isSome()})(c,m)})(t.dom))(n.range,a,n.text));if(i.length===0)return C.none();const l=Promise.all(Ct(i,d=>d.fetch(n.text,d.maxResults,o).then(c=>({matchText:n.text,items:c,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return C.some({lookupData:l,context:n})};var mn;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(mn||(mn={}));const nf=(t,e,n)=>t.stype===mn.Error?e(t.serror):n(t.svalue),is=t=>({stype:mn.Value,svalue:t}),za=t=>({stype:mn.Error,serror:t}),KT=nf,of=t=>ie(t)&&Le(t).length>100?" removed due to size":JSON.stringify(t,null,2),Ml=(t,e)=>za([{path:t,getErrorInfo:e}]),YT=(t,e)=>({extract:(n,o)=>Ft(o,t).fold(()=>((r,s)=>Ml(r,()=>'Choice schema did not contain choice key: "'+s+'"'))(n,t),r=>((s,a,i,l)=>Ft(i,l).fold(()=>((d,c,u)=>Ml(d,()=>'The chosen schema: "'+u+'" did not exist in branches: '+of(c)))(s,i,l),d=>d.extract(s.concat(["branch: "+l]),a)))(n,o,e,r)),toString:()=>"chooseOn("+t+"). Possible values: "+Le(e)}),Kw=t=>(...e)=>{if(e.length===0)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const s in r)pt(r,s)&&(n[s]=t(n[s],r[s]))}return n},rf=Kw((t,e)=>ti(t)&&ti(e)?rf(t,e):e),GT=Kw((t,e)=>e),Yw=t=>({tag:"defaultedThunk",process:Y(t)}),Gw=t=>{const e=(o=>{const r=[],s=[];return U(o,a=>{nf(a,i=>s.push(i),i=>r.push(i))}),{values:r,errors:s}})(t);return e.errors.length>0?(n=e.errors,fn(za,lg)(n)):is(e.values);var n},Xw=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},sf=t=>({extract:(e,n)=>{return o=t(n),r=s=>((a,i)=>Ml(a,Y(i)))(e,s),o.stype===mn.Error?r(o.serror):o;var o,r},toString:Y("val")}),XT=sf(is),Zw=(t,e,n,o)=>o(Ft(t,e).getOrThunk(()=>n(t))),ZT=(t,e,n,o,r)=>{const s=i=>r.extract(e.concat([o]),i),a=i=>i.fold(()=>is(C.none()),l=>{return c=r.extract(e.concat([o]),l),u=C.some,c.stype===mn.Value?{stype:mn.Value,svalue:u(c.svalue)}:c;var c,u});switch(t.tag){case"required":return((i,l,d,c)=>Ft(l,d).fold(()=>((u,m,p)=>Ml(u,()=>'Could not find valid *required* value for "'+m+'" in '+of(p)))(i,d,l),c))(e,n,o,s);case"defaultedThunk":return Zw(n,o,t.process,s);case"option":return((i,l,d)=>d(Ft(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,d,c)=>c(Ft(i,l).map(u=>u===!0?d(i):u)))(n,o,t.process,a);case"mergeWithThunk":return Zw(n,o,Y({}),i=>{const l=rf(t.process(n),i);return s(l)})}},Il=t=>({extract:(e,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)Xw(l,(d,c,u,m)=>{const p=ZT(u,o,r,d,m);KT(p,f=>{i.push(...f)},f=>{a[c]=f})},(d,c)=>{a[d]=c(r)});return i.length>0?za(i):is(a)})(e,n,t),toString:()=>`obj{
`+Ct(t,n=>Xw(n,(o,r,s,a)=>o+" -> "+a.toString(),(o,r)=>"state("+o+")")).join(`
`)+"}"}),af=t=>({extract:(e,n)=>{const o=Ct(n,(r,s)=>t.extract(e.concat(["["+s+"]"]),r));return Gw(o)},toString:()=>"array("+t.toString()+")"}),QT=fn(af,Il),JT=(t,e,n)=>{return o=((r,s,a)=>((i,l)=>i.stype===mn.Error?{stype:mn.Error,serror:l(i.serror)}:i)(s.extract([r],a),i=>({input:a,errors:i})))(t,e,n),nf(o,Te.error,Te.value);var o},lf=(t,e)=>YT(t,Ss(e,Il)),tO=Y(XT),Fl=(t,e)=>sf(n=>{const o=typeof n;return t(n)?is(n):za(`Expected type: ${e} but got: ${o}`)}),eO=Fl(an,"number"),ls=Fl(st,"string"),nO=Fl(_n,"boolean"),df=Fl(Nt,"function"),ds=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),Qw=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),Jw=t=>{return e=n=>_t(t,n)?Te.value(n):Te.error(`Unsupported value: "${n}", choose one of "${t.join(", ")}".`),sf(n=>e(n).fold(za,is));var e},cf=(t,e)=>ds(t,t,{tag:"required",process:{}},e),tE=t=>cf(t,ls),uf=(t,e)=>ds(t,t,{tag:"required",process:{}},Jw(e)),eE=t=>cf(t,df),nE=(t,e)=>ds(t,t,{tag:"required",process:{}},af(e)),mf=(t,e)=>ds(t,t,{tag:"option",process:{}},e),hr=t=>mf(t,ls),cs=(t,e,n)=>ds(t,t,Yw(e),n),oE=(t,e)=>cs(t,e,eO),Ul=(t,e)=>cs(t,e,ls),rE=(t,e,n)=>cs(t,e,Jw(n)),ff=(t,e)=>cs(t,e,nO),lo=(t,e)=>cs(t,e,df),oO=tE("type"),rO=eE("fetch"),gf=eE("onAction"),sO=lo("onSetup",()=>vt),aO=hr("text"),iO=hr("icon"),lO=hr("tooltip"),dO=hr("label"),cO=ff("active",!1),uO=ff("enabled",!0),sE=ff("primary",!1),ja=t=>Ul("type",t),mO=Il([oO,tE("trigger"),oE("minChars",1),((t,e)=>ds(t,t,Yw(1),tO()))("columns"),oE("maxResults",10),mf("matches",df),rO,gf,(aE=ls,cs("highlightOn",[],af(aE)))]);var aE;const pf=[uO,lO,iO,aO,sO,Ul("context","mode:design")],iE=[cO].concat(pf),zl=[lo("predicate",jt),rE("scope","node",["node","editor"]),rE("position","selection",["node","selection","line"])],fO=pf.concat([ja("contextformbutton"),Ul("align","end"),sE,gf,Qw("original",xe)]),gO=iE.concat([ja("contextformbutton"),Ul("align","end"),sE,gf,Qw("original",xe)]),pO=pf.concat([ja("contextformbutton")]),hO=iE.concat([ja("contextformtogglebutton")]),hf=[dO,nE("commands",lf("type",{contextformbutton:fO,contextformtogglebutton:gO})),mf("launch",lf("type",{contextformbutton:pO,contextformtogglebutton:hO})),lo("onInput",vt),lo("onSetup",vt)];lf("type",{contextform:[...zl,...hf,uf("type",["contextform"]),lo("initValue",Y("")),hr("placeholder")],contextsliderform:[...zl,...hf,uf("type",["contextsliderform"]),lo("initValue",Y(0)),lo("min",Y(0)),lo("max",Y(100))],contextsizeinputform:[...zl,...hf,uf("type",["contextsizeinputform"]),lo("initValue",Y({width:"",height:""}))]}),Il([ja("contexttoolbar"),cf("items",((t,e)=>{const n=xe;return{extract:(o,r)=>{const s=[];for(const a of t){const i=a.extract(o,r);if(i.stype===mn.Value)return{stype:mn.Value,svalue:n(i.svalue)};s.push(i)}return Gw(s)},toString:()=>"oneOf("+Ct(t,o=>o.toString()).join(", ")+")"}})([ls,QT([hr("name"),hr("label"),nE("items",ls)])]))].concat(zl));const bO=t=>{const e=t.ui.registry.getAll().popups,n=Ss(e,s=>{return(a=s,JT("Autocompleter",mO,a)).fold(i=>{throw new Error(`Errors: 
`+(d=>{const c=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:Y("... (only showing first ten failures)")}]):d;return Ct(c,u=>"Failed path: ("+u.path.join(" > ")+`)
`+u.getErrorInfo())})((l=i).errors).join(`
`)+`

Input object: `+of(l.input));var l},xe);var a}),o=ug(ni(n,s=>s.trigger)),r=yd(n);return{dataset:n,triggers:o,lookupByTrigger:s=>ft(r,a=>a.trigger===s)}},vO=t=>{const e=eo(),n=re(!1),o=e.isSet,r=()=>{o()&&((l=>{l.dispatch("AutocompleterEnd")})(t),n.set(!1),e.clear())},s=Sn(()=>bO(t)),a=l=>{(d=>e.get().map(c=>ef(t.dom,t.selection.getRng(),c.trigger,!0).bind(u=>Ww(t,s,u,d))).getOrThunk(()=>((c,u)=>{const m=u(),p=c.selection.getRng();return((f,h,g)=>xr(g.triggers,b=>ef(f,h,b)))(c.dom,p,m).bind(f=>Ww(c,u,f))})(t,s)))(l).fold(r,d=>{(c=>{o()||e.set({trigger:c.trigger,matchLength:c.text.length})})(d.context),d.lookupData.then(c=>{e.get().map(u=>{const m=d.context;u.trigger===m.trigger&&(e.set({...u,matchLength:m.text.length}),n.get()?(Nc(t,{range:m.range}),((p,f)=>{p.dispatch("AutocompleterUpdate",f)})(t,{lookupData:c})):(n.set(!0),Nc(t,{range:m.range}),((p,f)=>{p.dispatch("AutocompleterStart",f)})(t,{lookupData:c})))})})})},i=()=>e.get().bind(({trigger:l})=>{const d=t.selection.getRng();return ef(t.dom,d,l,n.get()).filter(({range:c})=>((u,m)=>{const p=u.compareBoundaryPoints(window.Range.START_TO_START,m),f=u.compareBoundaryPoints(window.Range.END_TO_END,m);return p>=0&&f<=0})(d,c)).map(({range:c})=>c)});t.addCommand("mceAutocompleterReload",(l,d)=>{const c=ie(d)?d.fetchOptions:{};a(c)}),t.addCommand("mceAutocompleterClose",r),t.addCommand("mceAutocompleterRefreshActiveRange",()=>{i().each(l=>{Nc(t,{range:l})})}),t.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>i().isSome()),((l,d)=>{const c=uc(d.load,50);l.on("input",u=>{(u.inputType!=="insertCompositionText"||l.composing)&&c.throttle()}),l.on("keydown",u=>{const m=u.which;m===8?c.throttle():m===27?(c.cancel(),d.cancelIfNecessary()):m!==38&&m!==40||c.cancel()},!0),l.on("remove",c.cancel)})(t,{cancelIfNecessary:r,load:a})},yO=Rn().browser.isSafari(),lE=t=>wo(R(t)),dE=(t,e)=>{var n;return t.startOffset===0&&t.endOffset===((n=e.textContent)===null||n===void 0?void 0:n.length)},jl=(t,e)=>C.from(t.getParent(e.container(),"details")),cE=(t,e)=>jl(t,e).isSome(),uE=(t,e)=>{const n=e.getNode();le(n)||t.selection.setCursorLocation(n,e.offset())},mE=(t,e,n)=>{const o=t.dom.getParent(e.container(),"details");if(o&&!o.open){const r=t.dom.select("summary",o)[0];r&&(n?Ce(r):dn(r)).each(s=>uE(t,s))}else uE(t,e)},fE=(t,e,n)=>{const{dom:o,selection:r}=t,s=t.getBody();if(n==="character"){const a=I.fromRangeStart(r.getRng()),i=o.getParent(a.container(),o.isBlock),l=jl(o,a),d=i&&o.isEmpty(i),c=Ee(i?.previousSibling),u=Ee(i?.nextSibling);return!!(d&&(e?u:c)&&Kr(!e,s,a).exists(m=>cE(o,m)&&!Mg(l,jl(o,m))))||Kr(e,s,a).fold(jt,m=>{const p=jl(o,m);if(cE(o,m)&&!Mg(l,p)){if(e||mE(t,m,!1),i&&d){if(e&&c||!e&&u)return!0;mE(t,m,e),t.dom.remove(i)}return!0}return!1})}return!1},CO=(t,e,n,o)=>{const r=t.selection.getRng(),s=I.fromRangeStart(r),a=t.getBody();return o==="selection"?((i,l)=>{const d=l.startSummary.exists(m=>m.contains(i.startContainer)),c=l.startSummary.exists(m=>m.contains(i.endContainer)),u=l.startDetails.forall(m=>l.endDetails.forall(p=>m!==p));return(d||c)&&!(d&&c)||u})(r,e):n?((i,l)=>l.startSummary.exists(d=>((c,u)=>dn(u).exists(m=>$t(m.getNode())&&Ie(u,m).exists(p=>p.isEqual(c))||m.isEqual(c)))(i,d)))(s,e)||((i,l,d)=>d.startDetails.exists(c=>Oe(i,l).forall(u=>!c.contains(u.container()))))(a,s,e):((i,l)=>l.startSummary.exists(d=>((c,u)=>Ce(u).exists(m=>m.isEqual(c)))(i,d)))(s,e)||((i,l)=>l.startDetails.exists(d=>Ie(d,i).forall(c=>l.startSummary.exists(u=>!u.contains(i.container())&&u.contains(c.container())))))(s,e)},br=(t,e,n)=>((o,r,s)=>((a,i)=>{const l=C.from(a.getParent(i.startContainer,"details")),d=C.from(a.getParent(i.endContainer,"details"));if(l.isSome()||d.isSome()){const c=l.bind(u=>C.from(a.select("summary",u)[0]));return C.some({startSummary:c,startDetails:l,endDetails:d})}return C.none()})(o.dom,o.selection.getRng()).fold(()=>fE(o,r,s),a=>CO(o,a,r,s)||fE(o,r,s)))(t,e,n)||yO&&((o,r,s)=>{const a=o.selection,i=a.getNode(),l=a.getRng(),d=I.fromRangeStart(l);return!!p_(i)&&(s==="selection"&&dE(l,i)||Av(r,d,i)?lE(i):o.undoManager.transact(()=>{const c=a.getSel();let{anchorNode:u,anchorOffset:m,focusNode:p,focusOffset:f}=c??{};const h=()=>{W(u)&&W(m)&&W(p)&&W(f)&&c?.setBaseAndExtent(u,m,p,f)},g=(v,y)=>{U(v.childNodes,E=>{fa(E)&&y.appendChild(E)})},b=o.dom.create("span",{"data-mce-bogus":"1"});g(i,b),i.appendChild(b),h(),s!=="word"&&s!=="line"||c==null||c.modify("extend",r?"right":"left",s),!a.isCollapsed()&&dE(a.getRng(),b)?lE(i):(o.execCommand(r?"ForwardDelete":"Delete"),u=c?.anchorNode,m=c?.anchorOffset,p=c?.focusNode,f=c?.focusOffset,g(b,i),h()),o.dom.remove(b)}),!0)})(t,e,n)?C.some(vt):C.none(),gE=t=>(e,n,o={})=>{const r=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:vt,inputType:n},a=qp(new InputEvent(t));return e.dispatch(t,{...a,...s,...o})},Ha=gE("input"),Hl=gE("beforeinput"),pE=Rn(),hE=pE.os,bE=hE.isMacOS()||hE.isiOS(),wO=pE.browser.isFirefox(),us=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(nt(a)||H(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(Jt),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new oe(e,e);let a,i=e;for(;a=s.current();){if(H(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else $t(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),ba(t,r)},$a=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&t.getContentEditable(r)!=="false";){if(t.getContentEditable(r)==="true"){o=r;break}r=r.parentNode}return r!==n?o:n},bf=t=>C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),vf=t=>{t.innerHTML='<br data-mce-bogus="1">'},Va=(t,e)=>{ye(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;C.from(r.style).map(s.parseStyle).each(c=>{const u={...Ld(R(o)),...c};s.setStyles(o,u)});const a=C.from(r.class).map(c=>c.split(/\s+/)),i=C.from(o.className).map(c=>ft(c.split(/\s+/),u=>u!==""));pe(a,i,(c,u)=>{const m=ft(u,f=>!_t(c,f)),p=[...c,...m];s.setAttrib(o,"class",p.join(" "))});const l=["style","class"],d=Ns(r,(c,u)=>!_t(l,u));s.setAttribs(o,d)})(t,e,ra(t))},vE=(t,e,n,o,r=!0,s,a)=>{const i=t.dom,l=t.schema,d=ye(t),c=n?n.nodeName.toUpperCase():"";let u=e;const m=l.getTextInlineElements();let p;p=s||c==="TABLE"||c==="HR"?i.create(s||d,a||{}):n.cloneNode(!1);let f=p;if(r)do if(m[u.nodeName]){if(Ge(u)||Xe(u))continue;const h=u.cloneNode(!1);i.setAttrib(h,"id",""),p.hasChildNodes()?(h.appendChild(p.firstChild),p.appendChild(h)):(f=h,p.appendChild(h))}while((u=u.parentNode)&&u!==o);else i.setAttrib(p,"style",null),i.setAttrib(p,"class",null);return Va(t,p),vf(f),p},yE=(t,e)=>{const n=t?.parentNode;return W(n)&&n.nodeName===e},CE=t=>W(t)&&/^(OL|UL|LI)$/.test(t.nodeName),yf=t=>W(t)&&/^(LI|DT|DD)$/.test(t.nodeName),$l=t=>{const e=t.parentNode;return yf(e)?e:t},Vl=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!nt(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},wE=t=>De(ni(Ld(R(t)),(e,n)=>`${n}: ${e};`),(e,n)=>e+n,""),EO=(t,e)=>e&&e.nodeName==="A"&&t.isEmpty(e),Cf=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,wf=(t,e)=>W(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&t.getContentEditable(e)!=="false",Ef=(t,e,n)=>H(e)?t?n===1&&e.data.charAt(n-1)===se?0:n:n===e.data.length-1&&e.data.charAt(n)===se?e.data.length:n:n,EE={insert:(t,e)=>{let n,o,r,s,a=!1;const i=t.dom,l=t.schema.getNonEmptyElements(),d=t.selection.getRng(),c=ye(t),u=R(d.startContainer),m=Tr(u,d.startOffset),p=m.exists(O=>ii(O)&&!jo(O)),f=d.collapsed&&p,h=(O,D)=>vE(t,n,w,E,dS(t),O,D),g=O=>{const D=Ef(O,n,o);if(H(n)&&(O?D>0:D<n.data.length))return!1;if((n.parentNode===w||n===w)&&a&&!O||O&&nt(n)&&n===w.firstChild)return!0;if(Cf(n,"TABLE")||Cf(n,"HR"))return((T,F)=>T.nodeName==="BR"||T.nextSibling&&T.nextSibling.nodeName==="BR")(n)?!O:a&&!O||!a&&O;const k=new oe(n,w);let N;for(H(n)&&(O&&D===0?k.prev():O||D!==n.data.length||k.next());N=k.current();){if(nt(N)){if(!N.getAttribute("data-mce-bogus")){const T=N.nodeName.toLowerCase();if(l[T]&&T!=="br")return!1}}else if(H(N)&&!Lr(N.data))return!1;O?k.prev():k.next()}return!0},b=()=>{let O;return O=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&x!=="HGROUP"?h(c):h(),((D,k)=>{const N=cS(D);return!Yt(k)&&(st(N)?_t($.explode(N),k.nodeName.toLowerCase()):N)})(t,s)&&wf(i,s)&&i.isEmpty(w,void 0,{includeZwsp:!0})?O=i.split(s,w):i.insertAfter(O,w),us(t,O),O};tl(i,d).each(O=>{d.setStart(O.startContainer,O.startOffset),d.setEnd(O.endContainer,O.endOffset)}),n=d.startContainer,o=d.startOffset;const v=!(!e||!e.shiftKey),y=!(!e||!e.ctrlKey);nt(n)&&n.hasChildNodes()&&!f&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&H(n)?n.data.length:0);const E=$a(i,n);if(!E||((O,D)=>{const k=O.dom.getParent(D,"ol,ul,dl");return k!==null&&O.dom.getContentEditableParent(k)==="false"})(t,n))return;v||(n=((O,D,k,N,T)=>{var F,j;const z=O.dom,J=(F=$a(z,N))!==null&&F!==void 0?F:z.getRoot();let ot=z.getParent(N,z.isBlock);if(!ot||!wf(z,ot)){if(ot=ot||J,!ot.hasChildNodes()){const tt=z.create(D);return Va(O,tt),ot.appendChild(tt),k.setStart(tt,0),k.setEnd(tt,0),tt}let rt,it=N;for(;it&&it.parentNode!==ot;)it=it.parentNode;for(;it&&!z.isBlock(it);)rt=it,it=it.previousSibling;const K=(j=rt?.parentElement)===null||j===void 0?void 0:j.nodeName;if(rt&&K&&O.schema.isValidChild(K,D.toLowerCase())){const tt=rt.parentNode,A=z.create(D);for(Va(O,A),tt.insertBefore(A,rt),it=rt;it&&!z.isBlock(it);){const B=it.nextSibling;A.appendChild(it),it=B}k.setStart(N,T),k.setEnd(N,T)}}return N})(t,c,d,n,o));let w=i.getParent(n,i.isBlock)||i.getRoot();s=W(w?.parentNode)?i.getParent(w.parentNode,i.isBlock):null,r=w?w.nodeName.toUpperCase():"";const x=s?s.nodeName.toUpperCase():"";if(x!=="LI"||y||(w=s,s=s.parentNode,r=x),nt(s)&&((O,D,k)=>!D&&k.nodeName.toLowerCase()===ye(O)&&O.dom.isEmpty(k)&&((N,T,F)=>{let j=T;for(;j&&j!==N&&Ee(j.nextSibling);){const J=j.parentElement;if(!J||(z=J,!pt(O.schema.getTextBlockElements(),z.nodeName.toLowerCase())))return $d(J);j=J}var z;return!1})(O.getBody(),k))(t,v,w))return((O,D,k)=>{var N,T,F;const j=D(ye(O)),z=((J,ot)=>J.dom.getParent(ot,$d))(O,k);z&&(O.dom.insertAfter(j,z),us(O,j),((F=(T=(N=k.parentElement)===null||N===void 0?void 0:N.childNodes)===null||T===void 0?void 0:T.length)!==null&&F!==void 0?F:0)>1&&O.dom.remove(k))})(t,h,w);if(/^(LI|DT|DD)$/.test(r)&&nt(s)&&i.isEmpty(w))return void((O,D,k,N,T)=>{const F=O.dom,j=O.selection.getRng(),z=k.parentNode;if(k===O.getBody()||!z)return;var J;CE(J=k)&&CE(J.parentNode)&&(T="LI");const ot=yf(N)?wE(N):void 0;let rt=yf(N)&&ot?D(T,{style:wE(N)}):D(T);if(Vl(k,N,!0)&&Vl(k,N,!1))if(yE(k,"LI")){const it=$l(k);F.insertAfter(rt,it),(K=>{var tt;return((tt=K.parentNode)===null||tt===void 0?void 0:tt.firstChild)===K})(k)?F.remove(it):F.remove(k)}else F.replace(rt,k);else if(Vl(k,N,!0))yE(k,"LI")?(F.insertAfter(rt,$l(k)),rt.appendChild(F.doc.createTextNode(" ")),rt.appendChild(k)):z.insertBefore(rt,k),F.remove(N);else if(Vl(k,N,!1))F.insertAfter(rt,$l(k)),F.remove(N);else{k=$l(k);const it=j.cloneRange();it.setStartAfter(N),it.setEndAfter(k);const K=it.extractContents();if(T==="LI"&&((tt,A)=>tt.firstChild&&tt.firstChild.nodeName==="LI")(K)){const tt=ft(Ct(rt.children,R),Cs(li("br")));rt=K.firstChild,F.insertAfter(K,k),U(tt,A=>Md(R(rt),A)),ot&&rt.setAttribute("style",ot)}else F.insertAfter(K,k),F.insertAfter(rt,k);F.remove(N)}us(O,rt)})(t,h,s,w,c);if(!(f||w!==t.getBody()&&wf(i,w)))return;const S=w.parentNode;let _;if(f)_=h(c),m.fold(()=>{Gt(u,R(_))},O=>{Me(O,R(_))}),t.selection.setCursorLocation(_,0);else if(Hr(w))_=hc(w),i.isEmpty(w)&&vf(w),Va(t,_),us(t,_);else if(g(!1))_=b();else if(g(!0)&&S){const O=I.fromRangeStart(d),D=yu(O),k=R(w),N=sl(k,O,t.schema)?dv(k,O,t.schema).bind(F=>C.from(F.getNode())):C.none();_=S.insertBefore(h(),w);const T=Cf(w,"HR")||D?_:N.getOr(w);us(t,T)}else{const O=(k=>{const N=k.cloneRange();return N.setStart(k.startContainer,Ef(!0,k.startContainer,k.startOffset)),N.setEnd(k.endContainer,Ef(!1,k.endContainer,k.endOffset)),N})(d).cloneRange();O.setEndAfter(w);const D=O.extractContents();(k=>{U(cp(R(k),Ae),N=>{const T=N.dom;T.nodeValue=$e(T.data)})})(D),(k=>{let N=k;do H(N)&&(N.data=N.data.replace(/^[\r\n]+/,"")),N=N.firstChild;while(N)})(D),_=D.firstChild,i.insertAfter(D,w),((k,N,T)=>{var F;const j=[];if(!T)return;let z=T;for(;z=z.firstChild;){if(k.isBlock(z))return;nt(z)&&!N[z.nodeName.toLowerCase()]&&j.push(z)}let J=j.length;for(;J--;)z=j[J],(!z.hasChildNodes()||z.firstChild===z.lastChild&&((F=z.firstChild)===null||F===void 0?void 0:F.nodeValue)===""||EO(k,z))&&k.remove(z)})(i,l,_),((k,N)=>{N.normalize();const T=N.lastChild;(!T||nt(T)&&/^(left|right)$/gi.test(k.getStyle(T,"float",!0)))&&k.add(N,"br")})(i,w),i.isEmpty(w)&&vf(w),_.normalize(),i.isEmpty(_)?(i.remove(_),b()):(Va(t,_),us(t,_))}i.setAttrib(_,"id",""),t.dispatch("NewBlock",{newBlock:_})},fakeEventName:"insertParagraph"},xE=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),ba(t,o)},xO=(t,e)=>{const n=ne("br");Me(R(e),n),t.undoManager.add()},kO=(t,e)=>{_O(t.getBody(),e)||Qn(R(e),ne("br"));const n=ne("br");Qn(R(e),n),xE(t,n.dom,!1),t.undoManager.add()},_O=(t,e)=>{return n=I.after(e),!!$t(n.getNode())||Oe(t,I.after(e)).map(o=>$t(o.getNode())).getOr(!1);var n},kE=t=>t&&t.nodeName==="A"&&"href"in t,SO=t=>t.fold(jt,kE,kE,jt),NO=(t,e)=>{e.fold(vt,et(xO,t),et(kO,t),vt)},_E={insert:(t,e)=>{const n=(o=>{const r=et(cr,o),s=I.fromRangeStart(o.selection.getRng());return jn(r,o.getBody(),s).filter(SO)})(t);n.isSome()?n.each(et(NO,t)):((o,r)=>{const s=o.selection,a=o.dom,i=s.getRng();let l,d=!1;tl(a,i).each(g=>{i.setStart(g.startContainer,g.startOffset),i.setEnd(g.endContainer,g.endOffset)});let c=i.startOffset,u=i.startContainer;if(nt(u)&&u.hasChildNodes()){const g=c>u.childNodes.length-1;u=u.childNodes[Math.min(c,u.childNodes.length-1)]||u,c=g&&H(u)?u.data.length:0}let m=a.getParent(u,a.isBlock);const p=m&&m.parentNode?a.getParent(m.parentNode,a.isBlock):null,f=p?p.nodeName.toUpperCase():"",h=!(!r||!r.ctrlKey);f!=="LI"||h||(m=p),H(u)&&c>=u.data.length&&(((g,b,v)=>{const y=new oe(b,v);let E;const w=g.getNonEmptyElements();for(;E=y.next();)if(w[E.nodeName.toLowerCase()]||H(E)&&E.length>0)return!0;return!1})(o.schema,u,m||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=a.create("br"),Ec(a,i,l),xE(o,l,d),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},SE=(t,e)=>bf(t).filter(n=>e.length>0&&gn(R(n),e)).isSome(),Ve=Dn([{br:[]},{block:[]},{none:[]}]),RO=(t,e)=>(n=>SE(n,lS(n)))(t),NE=t=>(e,n)=>(o=>bf(o).filter(r=>Ur(R(r))).isSome())(e)===t,RE=(t,e)=>(n,o)=>(s=>bf(s).fold(Y(""),a=>a.nodeName.toUpperCase()))(n)===t.toUpperCase()===e,AO=t=>{const e=$a(t.dom,t.selection.getStart());return Yt(e)},qa=t=>RE("pre",t),ql=t=>(e,n)=>sS(e)===t,TO=(t,e)=>(n=>SE(n,iS(n)))(t),Wl=(t,e)=>e,OO=t=>{const e=ye(t),n=$a(t.dom,t.selection.getStart());return W(n)&&t.schema.isValidChild(n.nodeName,e)},BO=t=>{const e=t.selection.getRng(),n=R(e.startContainer),o=Tr(n,e.startOffset).map(r=>ii(r)&&!jo(r));return e.collapsed&&o.getOr(!0)},on=(t,e)=>(n,o)=>De(t,(r,s)=>r&&s(n,o),!0)?C.some(e):C.none(),Kl=(t,e,n)=>{if(!e.mode.isReadOnly()){if(e.selection.isCollapsed()||(o=>{o.execCommand("delete")})(e),W(n)&&Hl(e,t.fakeEventName).isDefaultPrevented())return;t.insert(e,n),W(n)&&Ha(e,t.fakeEventName)}},AE=(t,e)=>{if(t.mode.isReadOnly())return;const n=()=>Kl(_E,t,e),o=()=>Kl(EE,t,e),r=((s,a)=>S1([on([RO],Ve.none()),on([qa(!0),AO],Ve.none()),on([RE("summary",!0)],Ve.br()),on([qa(!0),ql(!1),Wl],Ve.br()),on([qa(!0),ql(!1)],Ve.block()),on([qa(!0),ql(!0),Wl],Ve.block()),on([qa(!0),ql(!0)],Ve.br()),on([NE(!0),Wl],Ve.br()),on([NE(!0)],Ve.block()),on([TO],Ve.br()),on([Wl],Ve.br()),on([OO],Ve.block()),on([BO],Ve.block())],[s,!(!a||!a.shiftKey)]).getOr(Ve.none()))(t,e);switch(aS(t)){case"linebreak":r.fold(n,n,vt);break;case"block":r.fold(o,o,vt);break;case"invert":r.fold(o,n,vt);break;default:r.fold(n,o,vt)}},TE=Rn(),PO=TE.os.isiOS()&&TE.browser.isSafari(),OE=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{AE(t,e)}))},DO=Rn(),BE=t=>t.stopImmediatePropagation(),PE=t=>t.keyCode===Q.PAGE_UP||t.keyCode===Q.PAGE_DOWN,DE=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",BE,!0):!n&&t.get()&&e.off("NodeChange",BE),t.set(n)},LE=(t,e)=>t===e||t.contains(e),ME=(t,e)=>{const n=e.container(),o=e.offset();return H(n)?(n.insertData(o,t),C.some(I(n,o+t.length))):Ui(e).map(r=>{const s=Ar(t);return e.isAtEnd()?Qn(r,s):Me(r,s),I(s.dom,t.length)})},IE=et(ME,Jt),FE=et(ME," "),UE=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},LO=t=>{const e=I.fromRangeStart(t.selection.getRng()),n=R(t.getBody());if(t.selection.isCollapsed()){const o=et(cr,t),r=I.fromRangeStart(t.selection.getRng());return jn(o,t.getBody(),r).bind((s=>a=>a.fold(i=>Ie(s.dom,I.before(i)),i=>Ce(i),i=>dn(i),i=>Oe(s.dom,I.after(i))))(n)).map(s=>()=>((a,i,l)=>d=>pv(a,d,l)?IE(i):FE(i))(n,e,t.schema)(s).each(UE(t)))}return C.none()},MO=t=>{return Nr(Et.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const o=R(t.getBody());t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),((r,s,a)=>pv(r,s,a)?IE(s):FE(s))(o,I.fromRangeStart(t.selection.getRng()),t.schema).each(UE(t))});var e,n},IO=t=>pN(t)?[{keyCode:Q.TAB,action:ct(jw,t,!0)},{keyCode:Q.TAB,shiftKey:!0,action:ct(jw,t,!1)}]:[],FO=t=>{if(t.addShortcut("Meta+P","","mcePrint"),vO(t),zn(t))return re(null);{const e=_T(t);return(n=>{n.on("beforeinput",o=>{n.selection.isEditable()&&!Ht(o.getTargetRanges(),r=>!((s,a)=>!LE(s.getBody(),a.startContainer)||!LE(s.getBody(),a.endContainer)||D0(s.dom,a))(n,r))||o.preventDefault()})})(t),(n=>{n.on("keyup compositionstart",et(LT,n))})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=Et.os.isMacOS()||Et.os.isiOS();Fa([{keyCode:Q.RIGHT,action:ct(yw,s,!0)},{keyCode:Q.LEFT,action:ct(yw,s,!1)},{keyCode:Q.UP,action:ct(Cw,s,!1)},{keyCode:Q.DOWN,action:ct(Cw,s,!0)},...l?[{keyCode:Q.UP,action:ct(Pl,s,!1),metaKey:!0,shiftKey:!0},{keyCode:Q.DOWN,action:ct(Pl,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Q.RIGHT,action:ct(Fw,s,!0)},{keyCode:Q.LEFT,action:ct(Fw,s,!1)},{keyCode:Q.UP,action:ct(Zm,s,!1)},{keyCode:Q.DOWN,action:ct(Zm,s,!0)},{keyCode:Q.UP,action:ct(Zm,s,!1)},{keyCode:Q.UP,action:ct(xw,s,!1)},{keyCode:Q.DOWN,action:ct(xw,s,!0)},{keyCode:Q.RIGHT,action:ct(Nw,s,!0)},{keyCode:Q.LEFT,action:ct(Nw,s,!1)},{keyCode:Q.UP,action:ct(Rw,s,!1)},{keyCode:Q.DOWN,action:ct(Rw,s,!0)},{keyCode:Q.RIGHT,action:ct(X1,s,a,!0)},{keyCode:Q.LEFT,action:ct(X1,s,a,!1)},{keyCode:Q.RIGHT,ctrlKey:!l,altKey:l,action:ct(ST,s,a)},{keyCode:Q.LEFT,ctrlKey:!l,altKey:l,action:ct(NT,s,a)},{keyCode:Q.UP,action:ct(Ew,s,!1)},{keyCode:Q.DOWN,action:ct(Ew,s,!0)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===Q.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const d=l.keyCode===Q.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=a.selection.isCollapsed(),u=c?"character":"selection",m=p=>c?p?"word":"line":"selection";Sw([{keyCode:Q.BACKSPACE,action:ct(uw,a)},{keyCode:Q.BACKSPACE,action:ct(Pm,a,!1)},{keyCode:Q.DELETE,action:ct(Pm,a,!0)},{keyCode:Q.BACKSPACE,action:ct(Tm,a,!1)},{keyCode:Q.DELETE,action:ct(Tm,a,!0)},{keyCode:Q.BACKSPACE,action:ct($m,a,i,!1)},{keyCode:Q.DELETE,action:ct($m,a,i,!0)},{keyCode:Q.BACKSPACE,action:ct(Lu,a,!1)},{keyCode:Q.DELETE,action:ct(Lu,a,!0)},{keyCode:Q.BACKSPACE,action:ct(br,a,!1,u)},{keyCode:Q.DELETE,action:ct(br,a,!0,u)},...bE?[{keyCode:Q.BACKSPACE,altKey:!0,action:ct(br,a,!1,m(!0))},{keyCode:Q.DELETE,altKey:!0,action:ct(br,a,!0,m(!0))},{keyCode:Q.BACKSPACE,metaKey:!0,action:ct(br,a,!1,m(!1))}]:[{keyCode:Q.BACKSPACE,ctrlKey:!0,action:ct(br,a,!1,m(!0))},{keyCode:Q.DELETE,ctrlKey:!0,action:ct(br,a,!0,m(!0))}],{keyCode:Q.BACKSPACE,action:ct(Lm,a,!1)},{keyCode:Q.DELETE,action:ct(Lm,a,!0)},{keyCode:Q.BACKSPACE,action:ct(Wm,a,!1)},{keyCode:Q.DELETE,action:ct(Wm,a,!0)},{keyCode:Q.BACKSPACE,action:ct(Rm,a,!1)},{keyCode:Q.DELETE,action:ct(Rm,a,!0)},{keyCode:Q.BACKSPACE,action:ct(Nm,a,!1)},{keyCode:Q.DELETE,action:ct(Nm,a,!0)},{keyCode:Q.BACKSPACE,action:ct(Vm,a,!1)},{keyCode:Q.DELETE,action:ct(Vm,a,!0)},{keyCode:Q.BACKSPACE,action:ct(Dm,a,!1)},{keyCode:Q.DELETE,action:ct(Dm,a,!0)}],l).filter(p=>a.selection.isEditable()).each(p=>{l.preventDefault(),Hl(a,d).isDefaultPrevented()||(p(),Ha(a,d))})})(n,o,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{Fa([{keyCode:Q.BACKSPACE,action:ct(h1,a)},{keyCode:Q.DELETE,action:ct(h1,a)},...bE?[{keyCode:Q.BACKSPACE,altKey:!0,action:ct(Ia,a)},{keyCode:Q.DELETE,altKey:!0,action:ct(Ia,a)},...l?[{keyCode:wO?224:91,action:ct(Ia,a)}]:[]]:[{keyCode:Q.BACKSPACE,ctrlKey:!0,action:ct(Ia,a)},{keyCode:Q.DELETE,ctrlKey:!0,action:ct(Ia,a)}]],i)})(n,s,r),r=!1})})(t,e),(n=>{let o=C.none();n.on("keydown",r=>{r.keyCode===Q.ENTER&&(PO&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(H(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(s=>{o=C.some(s.selection.getBookmark()),s.undoManager.add()})(n):OE(n,r))}),n.on("keyup",r=>{r.keyCode===Q.ENTER&&o.each(()=>((s,a)=>{s.undoManager.undo(),o.fold(vt,i=>s.selection.moveToBookmark(i)),OE(s,a),o=C.none()})(n,r))})})(t),(n=>{n.on("keydown",o=>{o.isDefaultPrevented()||((r,s)=>{Sw([{keyCode:Q.SPACEBAR,action:ct(LO,r)},{keyCode:Q.SPACEBAR,action:ct(MO,r)}],s).each(a=>{s.preventDefault(),Hl(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),Ha(r,"insertText",{data:" "}))})})(n,o)})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=R(r.getBody());r.selection.isCollapsed()&&kR(s,I.fromRangeStart(r.selection.getRng()),r.schema).each(a=>{r.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{o.isDefaultPrevented()||((r,s)=>{Fa([...IO(r)],s).each(a=>{s.preventDefault()})})(n,o)})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=Et.os.isMacOS()||Et.os.isiOS();Fa([{keyCode:Q.END,action:ct(ww,s,!0)},{keyCode:Q.HOME,action:ct(ww,s,!1)},...l?[]:[{keyCode:Q.HOME,action:ct(Pl,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Q.END,action:ct(Pl,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Q.END,action:ct(Aw,s,!0)},{keyCode:Q.HOME,action:ct(Aw,s,!1)},{keyCode:Q.END,action:ct(Bl,s,!0,a)},{keyCode:Q.HOME,action:ct(Bl,s,!1,a)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if(DO.os.isMacOS())return;const r=re(!1);n.on("keydown",s=>{PE(s)&&DE(r,n,!0)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{Fa([{keyCode:Q.PAGE_UP,action:ct(Bl,a,!1,i)},{keyCode:Q.PAGE_DOWN,action:ct(Bl,a,!0,i)}],l)})(n,o,s),PE(s)&&r.get()&&(DE(r,n,!1),n.nodeChanged())})})(t,e),e}};class UO{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};r.type!=="nodechange"&&mu(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{Gi(e),e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&Vi(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&Vi(e)&&(e.selection.getNode().nodeName==="IMG"?Qe.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor,o=n.selection;let r;if(n.initialized&&o&&!US(n)&&!Ii(n)){const s=n.getBody();r=o.getStart(!0)||s,r.ownerDocument===n.getDoc()&&n.dom.isChildOf(r,s)||(r=s);const a=[];n.dom.getParent(r,i=>i===s||(a.push(i),!1)),n.dispatch("NodeChange",{...e,element:r,parents:a})}}isSameElementPath(e){let n;const o=this.editor,r=ks(o.dom.getParents(e,Wt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=r,!0}return this.lastPath=r,!1}}const zE=Zs("image"),xf=Zs("event"),Yl=t=>e=>{e[xf]=t},jE=Yl(0),zO=Yl(2),jO=Yl(1),HO=t=>{const e=t;return C.from(e[xf]).exists(n=>n===0)},kf=Zs("mode"),Gl=t=>e=>{e[kf]=t},HE=(t,e)=>Gl(e)(t),$E=Gl(0),_f=Gl(2),$O=Gl(1),VE=t=>e=>{const n=e;return C.from(n[kf]).exists(o=>o===t)},ms=VE(0),qE=VE(1),VO=["none","copy","link","move"],qO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Sf=()=>{const t=new window.DataTransfer;let e="move",n="all";const o={get dropEffect(){return e},set dropEffect(r){_t(VO,r)&&(e=r)},get effectAllowed(){return n},set effectAllowed(r){HO(o)&&_t(qO,r)&&(n=r)},get items(){return((r,s)=>({...s,get length(){return s.length},add:(a,i)=>{if(ms(r)){if(!st(a))return s.add(a);if(!le(i))return s.add(a,i)}return null},remove:a=>{ms(r)&&s.remove(a)},clear:()=>{ms(r)&&s.clear()}}))(o,t.items)},get files(){return qE(o)?Object.freeze({length:0,item:r=>null}):t.files},get types(){return t.types},setDragImage:(r,s,a)=>{var i;ms(o)&&(i={image:r,x:s,y:a},o[zE]=i,t.setDragImage(r,s,a))},getData:r=>qE(o)?"":t.getData(r),setData:(r,s)=>{ms(o)&&t.setData(r,s)},clearData:r=>{ms(o)&&t.clearData(r)}};return $E(o),o},WE=(t,e)=>t.setData("text/html",e),KE="x-tinymce/html",Xl=Y(KE),Nf="<!-- "+KE+" -->",WO=t=>Nf+t,YE=t=>t.indexOf(Nf)!==-1,GE="%MCEPASTEBIN%",Rf=t=>t.dom.get("mcepastebin"),KO=t=>W(t)&&t.id==="mcepastebin",XE=t=>t===GE,ZE=(t,e)=>($.each(e,n=>{t=Ja(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),QE=t=>ZE(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?Jt:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),JE=(t,e)=>({content:t,cancelled:e}),Af=(t,e)=>(t.insertContent(e,{merge:oN(t),paste:!0}),!0),Tf=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),YO=(t,e,n)=>!(t.selection.isCollapsed()||!Tf(e))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),!0))(t,e,n),GO=(t,e,n)=>!!((o,r)=>Tf(r)&&Ht(ub(o),s=>xd(r.toLowerCase(),`.${s.toLowerCase()}`)))(t,e)&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n),XO=(t=>{let e=0;return()=>"mceclip"+e++})(),ZO=t=>{const e=Sf();return WE(e,t),_f(e),e},tx=(t,e,n,o,r)=>{const s=((a,i,l)=>((d,c,u)=>{const m=((f,h,g)=>f.dispatch("PastePreProcess",{content:h,internal:g}))(d,c,u),p=((f,h)=>{const g=ns({sanitize:cb(f),sandbox_iframes:mb(f),sandbox_iframes_exclusions:Bc(f),convert_unsafe_embeds:vN(f)},f.schema);g.addNodeFilter("meta",v=>{$.each(v,y=>{y.remove()})});const b=g.parse(h,{forced_root_block:!1,isRootContent:!0});return No({validate:!0},f.schema).serialize(b)})(d,m.content);return d.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((f,h,g)=>{const b=f.dom.create("div",{style:"display:none"},h),v=((y,E,w)=>y.dispatch("PastePostProcess",{node:E,internal:w}))(f,b,g);return JE(v.node.innerHTML,v.isDefaultPrevented())})(d,p,u):JE(p,m.isDefaultPrevented())})(a,i,l))(t,e,n);if(!s.cancelled){const a=s.content,i=()=>((l,d,c)=>{c||!rN(l)?Af(l,d):((u,m)=>{$.each([YO,GO,Af],p=>!p(u,m,Af))})(l,d)})(t,a,o);r?Hl(t,"insertFromPaste",{dataTransfer:ZO(a)}).isDefaultPrevented()||(i(),Ha(t,"insertFromPaste")):i()}},Zl=(t,e,n,o)=>{const r=n||YE(e);tx(t,(s=>s.replace(Nf,""))(e),r,!1,o)},Of=(t,e,n)=>{const o=t.dom.encode(e).replace(/\r\n/g,`
`),r=((s,a,i)=>{const l=s.split(/\n\n/),d=((m,p)=>{let f="<"+m;const h=ni(p,(g,b)=>b+'="'+Yo.encodeAllRaw(g)+'"');return h.length&&(f+=" "+h.join(" ")),f+">"})(a,i),c="</"+a+">",u=Ct(l,m=>m.split(/\n/).join("<br />"));return u.length===1?u[0]:Ct(u,m=>d+m+c).join("")})(gp(o,aN(t)),ye(t),ra(t));tx(t,r,!1,!0,n)},ex=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch{e[o]=""}}return e},Bo=(t,e)=>e in t&&t[e].length>0,nx=t=>Bo(t,"text/html")||Bo(t,"text/plain"),ox=(t,e,n)=>{const o=e.type==="paste"?e.clipboardData:e.dataTransfer;var r;if(Mi(t)&&o){const s=((a,i)=>{const l=i.items?We(ze(i.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],d=i.files?ze(i.files):[];return ft(l.length>0?l:d,(c=>{const u=ub(c);return m=>Qt(m.type,"image/")&&Ht(u,p=>(f=>{const h=f.toLowerCase(),g={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return $.hasOwn(g,h)?"image/"+g[h]:"image/"+h})(p)===m.type)})(a))})(t,o);if(s.length>0)return e.preventDefault(),(r=s,Promise.all(Ct(r,a=>Uy(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),U(a,i=>{((l,d)=>{om(d.uri).each(({data:c,type:u,base64Encoded:m})=>{const p=m?c:btoa(c),f=d.file,h=l.editorUpload.blobCache,g=h.getByData(p,u),b=g??((v,y,E,w)=>{const x=XO(),S=Qh(v)&&W(E.name),_=S?((k,N)=>{const T=N.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return W(T)?k.dom.encode(T[1]):void 0})(v,E.name):x,O=S?E.name:void 0,D=y.create(x,E,w,_,O);return y.add(D),D})(l,h,f,p);Zl(l,`<img src="${b.blobUri()}">`,!1,!0)})})(t,i)})}),!0}return!1},Bf=(t,e,n,o,r)=>{let s=QE(n);const a=Bo(e,Xl())||YE(n),i=!a&&(d=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(d))(s),l=Tf(s);(XE(s)||!s.length||i&&!l)&&(o=!0),(o||l)&&(s=Bo(e,"text/plain")&&i?e["text/plain"]:(d=>{const c=Co(),u=ns({},c);let m="";const p=c.getVoidElements(),f=$.makeMap("script noscript style textarea video audio iframe object"," "),h=c.getBlockElements(),g=b=>{const v=b.name,y=b;if(v!=="br"){if(v!=="wbr")if(p[v]&&(m+=" "),f[v])m+=" ";else{if(b.type===3&&(m+=b.value),!(b.name in c.getVoidElements())){let E=b.firstChild;if(E)do g(E);while(E=E.next)}h[v]&&y.next&&(m+=`
`,v==="p"&&(m+=`
`))}}else m+=`
`};return d=ZE(d,[/<!\[[^\]]+\]>/g]),g(u.parse(d)),m})(s)),XE(s)||(o?Of(t,s,r):Zl(t,s,a,r))},QO=(t,e,n)=>{((o,r,s)=>{let a;o.on("keydown",i=>{(l=>Q.metaKeyPressed(l)&&l.keyCode===86||l.shiftKey&&l.keyCode===45)(i)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&i.keyCode===86)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(c=>{var u,m;return Et.os.isAndroid()&&((m=(u=c.clipboardData)===null||u===void 0?void 0:u.items)===null||m===void 0?void 0:m.length)===0})(i))return;const l=s.get()==="text"||a;a=!1;const d=ex(i.clipboardData);!nx(d)&&ox(o,i,r.getLastRng()||o.selection.getRng())||(Bo(d,"text/html")?(i.preventDefault(),Bf(o,d,d["text/html"],l,!0)):Bo(d,"text/plain")&&Bo(d,"text/uri-list")?(i.preventDefault(),Bf(o,d,d["text/plain"],l,!0)):(r.create(),Qe.setEditorTimeout(o,()=>{const c=r.getHtml();r.remove(),Bf(o,d,c,l,!1)},0)))})})(t,e,n),(o=>{const r=a=>Qt(a,"webkit-fake-url"),s=a=>Qt(a,"data:");o.parser.addNodeFilter("img",(a,i,l)=>{if(!Mi(o)&&(d=>{var c;return((c=d.data)===null||c===void 0?void 0:c.paste)===!0})(l))for(const d of a){const c=d.attr("src");st(c)&&!d.attr("data-mce-object")&&c!==Et.transparentSrc&&(r(c)||!iN(o)&&s(c))&&d.remove()}})})(t)},rx=(t,e,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(Xl(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},sx=t=>(e,n)=>{const{dom:o,selection:r}=t,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},e);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(t.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),Qe.setEditorTimeout(t,()=>{r.setRng(i),o.remove(s),n()},0)},ax=t=>({html:WO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),ix=t=>!t.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(t),lx=(t,e)=>{var n,o;return lr.getCaretRangeFromPoint((n=e.clientX)!==null&&n!==void 0?n:0,(o=e.clientY)!==null&&o!==void 0?o:0,t.getDoc())},dx=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},JO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,cx=t=>$.trim(t).replace(JO,$s).toLowerCase(),tB=(t,e,n)=>{const o=eN(t);if(n||o==="all"||!nN(t))return e;const r=o?o.split(/[, ]/):[];if(r&&o!=="none"){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,d,c)=>{const u=s.parseStyle(s.decode(d)),m={};for(let f=0;f<r.length;f++){const h=u[r[f]];let g=h,b=s.getStyle(a,r[f],!0);/color/.test(r[f])&&(g=cx(g),b=cx(b)),b!==g&&(m[r[f]]=h)}const p=s.serializeStyle(m,"span");return p?l+' style="'+p+'"'+c:l+c})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l),e},eB=t=>{const e=re(!1),n=re(sN(t)?"text":"html"),o=(r=>{const s=re(null);return{create:()=>((a,i)=>{const{dom:l,selection:d}=a,c=a.getBody();i.set(d.getRng());const u=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},GE);Et.browser.isFirefox()&&l.setStyle(u,"left",l.getStyle(c,"direction",!0)==="rtl"?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),d.select(u,!0)})(r,s),remove:()=>((a,i)=>{const l=a.dom;if(Rf(a)){let d;const c=i.get();for(;d=Rf(a);)l.remove(d),l.unbind(d);c&&a.selection.setRng(c)}i.set(null)})(r,s),getEl:()=>Rf(r),getHtml:()=>(a=>{const i=a.dom,l=(m,p)=>{m.appendChild(p),i.remove(p,!0)},[d,...c]=ft(a.getBody().childNodes,KO);U(c,m=>{l(d,m)});const u=i.select("div[id=mcepastebin]",d);for(let m=u.length-1;m>=0;m--){const p=i.create("div");d.insertBefore(p,u[m]),l(p,u[m])}return d?d.innerHTML:""})(r),getLastRng:s.get}})(t);(r=>{(Et.browser.isChromium()||Et.browser.isSafari())&&((s,a)=>{s.on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})})(r,tB)})(t),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{i.get()==="text"?(i.set("html"),Wh(a,!1)):(i.set("text"),Wh(a,!0)),a.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Zl(r,i.html,i.internal,!1),i.text&&Of(r,i.text,!1)})})(t,n),(r=>{const s=l=>d=>{l(r,d)},a=QS(r);Nt(a)&&r.on("PastePreProcess",s(a));const i=JS(r);Nt(i)&&r.on("PastePostProcess",s(i))})(t),t.addQueryStateHandler("mceTogglePlainTextPaste",()=>n.get()==="text"),t.on("PreInit",()=>{(r=>{r.on("cut",(s=>a=>{!a.isDefaultPrevented()&&ix(s)&&s.selection.isEditable()&&rx(a,ax(s),sx(s),()=>{if(Et.browser.isChromium()||Et.browser.isFirefox()){const i=s.selection.getRng();Qe.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>a=>{!a.isDefaultPrevented()&&ix(s)&&rx(a,ax(s),sx(s),vt)})(r))})(t),((r,s)=>{ZS(r)&&r.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Mi(r)||r.on("drop",a=>{const i=a.dataTransfer;i&&(l=>Ht(l.files,d=>/^image\//.test(d.type)))(i)&&a.preventDefault()}),r.on("drop",a=>{if(a.isDefaultPrevented())return;const i=lx(r,a);if(Yt(i))return;const l=ex(a.dataTransfer),d=Bo(l,Xl());if((!nx(l)||(f=>{const h=f["text/plain"];return!!h&&h.indexOf("file://")===0})(l))&&ox(r,a,i))return;const c=l[Xl()],u=c||l["text/html"]||l["text/plain"],m=((f,h,g,b)=>{const v=f.getParent(g,y=>Wo(h,y));if(!Ee(f.getParent(g,"summary")))return!0;if(v&&pt(b,"text/html")){const y=new DOMParser().parseFromString(b["text/html"],"text/html").body;return!Ee(y.querySelector(v.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,i.startContainer,l),p=s.get();p&&!m||u&&(a.preventDefault(),Qe.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(c||p&&m)&&r.execCommand("Delete"),dx(r,i);const f=QE(u);l["text/html"]?Zl(r,f,d,!0):Of(r,f,!0)})}))}),r.on("dragstart",a=>{s.set(!0)}),r.on("dragover dragend",a=>{Mi(r)&&!s.get()&&(a.preventDefault(),dx(r,lx(r,a))),a.type==="dragend"&&s.set(!1)}),(a=>{a.on("input",i=>{const l=d=>Ee(d.querySelector("summary"));if(i.inputType==="deleteByDrag"){const d=ft(a.dom.select("details"),l);U(d,c=>{$t(c.firstChild)&&c.firstChild.remove();const u=a.dom.create("summary");u.appendChild(zr().dom),c.prepend(u)})}})})(r)})(t,e),QO(t,o,n)})},nB=$t,ux=H,oB=t=>Lt(t.dom),mx=t=>e=>kt(R(t),e),fx=(t,e)=>zo(R(t),oB,mx(e)),gx=(t,e,n)=>{const o=new oe(t,e),r=n?o.next.bind(o):o.prev.bind(o);let s=t;for(let a=n?t:r();a&&!nB(a);a=r())Cn(a)&&(s=a);return s},rB=t=>{const e=((n,o,r)=>{const s=I.fromRangeStart(n).getNode(),a=((c,u,m)=>zo(R(c),p=>(f=>ln(f.dom))(p)||m.isBlock(wt(p)),mx(u)).getOr(R(u)).dom)(s,o,r),i=gx(s,a,!1),l=gx(s,a,!0),d=document.createRange();return fx(i,a).fold(()=>{ux(i)?d.setStart(i,0):d.setStartBefore(i)},c=>d.setStartBefore(c.dom)),fx(l,a).fold(()=>{ux(l)?d.setEnd(l,l.data.length):d.setEndAfter(l)},c=>d.setEndAfter(c.dom)),d})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(ju(e))};var fs;(function(t){t.Before="before",t.After="after"})(fs||(fs={}));const sB=(t,e)=>Math.abs(t.left-e),aB=(t,e)=>Math.abs(t.right-e),iB=(t,e)=>(n=>De(n,(o,r)=>o.fold(()=>C.some(r),s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),d=Math.max(r.bottom,s.bottom);return C.some({top:i,right:l,bottom:d,left:a,width:l-a,height:d-i})}),C.none()))(ft(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r})).fold(()=>[[],t],n=>{const{pass:o,fail:r}=Er(t,s=>((a,i)=>{const l=((d,c)=>Math.max(0,Math.min(d.bottom,c.bottom)-Math.max(d.top,c.top)))(a,i)/Math.min(a.height,i.height);return((d,c)=>d.top<c.bottom&&d.bottom>c.top)(a,i)&&l>.5})(s,n));return[o,r]}),lB=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),Pf=(t,e,n,o)=>{const r=c=>Cn(c.node)?C.some(c):nt(c.node)?Pf(ze(c.node.childNodes),e,n,!1):C.none(),s=(c,u)=>{const m=Io(c,(p,f)=>u(p,e,n)-u(f,e,n));return xr(m,r).map(p=>o&&!H(p.node)&&m.length>1?((f,h,g)=>r(h).filter(b=>Math.abs(g(f,e,n)-g(b,e,n))<2&&H(b.node)))(p,m[1],u).getOr(p):p)},[a,i]=iB(j1(t),n),{pass:l,fail:d}=Er(i,c=>c.top<n);return s(a,lB).orThunk(()=>s(d,mh)).orThunk(()=>s(l,mh))},px=(t,e,n)=>((o,r,s)=>{const a=R(o),i=po(a),l=o_(i,r,s).filter(d=>pn(a,d)).getOr(a);return((d,c,u,m)=>{const p=(f,h)=>{const g=ft(f.dom.childNodes,Cs(b=>nt(b)&&b.classList.contains("mce-drag-container")));return h.fold(()=>Pf(g,u,m,!0),b=>{const v=ft(g,y=>y!==b.dom);return Pf(v,u,m,!0)}).orThunk(()=>(kt(f,d)?C.none():ci(f)).bind(b=>p(b,C.some(f))))};return p(c,C.none())})(a,l,r,s)})(t,e,n).filter(o=>ia(o.node)).map(o=>((r,s)=>({node:r.node,position:sB(r,s)<aB(r,s)?fs.Before:fs.After}))(o,e)),hx=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+((e=a?.scrollY)!==null&&e!==void 0?e:0)-s.clientTop,left:o.left+((n=a?.scrollX)!==null&&n!==void 0?n:0)-s.clientLeft}},bx=t=>({target:t,srcElement:t}),dB=(t,e,n,o)=>{const r=((s,a)=>{const i=(l=>{const d=Sf(),c=(u=>{const m=u;return C.from(m[kf])})(l);return _f(l),jE(d),d.dropEffect=l.dropEffect,d.effectAllowed=l.effectAllowed,(u=>{const m=u;return C.from(m[zE])})(l).each(u=>d.setDragImage(u.image,u.x,u.y)),U(l.types,u=>{u!=="Files"&&d.setData(u,l.getData(u))}),U(l.files,u=>d.items.add(u)),(u=>{const m=u;return C.from(m[xf])})(l).each(u=>{((m,p)=>{Yl(p)(m)})(d,u)}),c.each(u=>{HE(l,u),HE(d,u)}),d})(s);return a==="dragstart"?(jE(i),$E(i)):a==="drop"?(zO(i),_f(i)):(jO(i),$O(i)),i})(n,t);return le(o)?((s,a,i)=>{const l=rg("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:vt,stopImmediatePropagation:vt,stopPropagation:vt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...bx(a)}})(t,e,r):((s,a,i,l)=>({...a,dataTransfer:l,type:s,...bx(i)}))(t,o,e,r)},vx=Lt,cB=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(vx,ln),uB=(t,e,n,o)=>{const r=t.dom,s=e.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Ql=(t,e)=>n=>()=>{const o=t==="left"?n.scrollX:n.scrollY;n.scroll({[t]:o+e,behavior:"smooth"})},yx=Ql("left",-32),Cx=Ql("left",32),wx=Ql("top",-32),Ex=Ql("top",32),xx=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Wa=(t,e,n,o,r)=>{e==="dragstart"&&WE(o,t.dom.getOuterHTML(n));const s=dB(e,n,o,r);return t.dispatch(e,s)},mB=(t,e)=>{const n=_i((r,s)=>((a,i,l)=>{a._selectionOverrides.hideFakeCaret(),px(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),d=>{const c=a._selectionOverrides.showCaret(1,d.node,d.position===fs.Before,!1);c?a.selection.setRng(c):a.selection.placeCaretAt(i,l)})})(e,r,s),0);e.on("remove",n.cancel);const o=t;return r=>t.on(s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){const d=Wa(e,"dragstart",s.element,s.dataTransfer,r);if(W(d.dataTransfer)&&(s.dataTransfer=d.dataTransfer),d.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const d=r.currentTarget===e.getDoc().documentElement,c=((u,m)=>({pageX:m.pageX-u.relX,pageY:m.pageY+5}))(s,((u,m)=>{return p=(g=>g.inline?hx(g.getBody()):{left:0,top:0})(u),f=(g=>{const b=g.getBody();return g.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}})(u),h=((g,b)=>{if(b.target.ownerDocument!==g.getDoc()){const v=hx(g.getContentAreaContainer()),y=(E=>{const w=E.getBody(),x=E.getDoc().documentElement,S={left:w.scrollLeft,top:w.scrollTop},_={left:w.scrollLeft||x.scrollLeft,top:w.scrollTop||x.scrollTop};return E.inline?S:_})(g);return{left:b.pageX-v.left+y.left,top:b.pageY-v.top+y.top}}return{left:b.pageX,top:b.pageY}})(u,m),{pageX:h.left-p.left+f.left,pageY:h.top-p.top+f.top};var p,f,h})(e,r));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((u,m,p,f,h,g,b,v,y,E,w,x)=>{let S=0,_=0;u.style.left=m.pageX+"px",u.style.top=m.pageY+"px",m.pageX+p>h&&(S=m.pageX+p-h),m.pageY+f>g&&(_=m.pageY+f-g),u.style.width=p-S+"px",u.style.height=f-_+"px";const O=y.clientHeight,D=y.clientWidth,k=b+y.getBoundingClientRect().top,N=v+y.getBoundingClientRect().left;w.on(T=>{T.intervalId.clear(),T.dragging&&x&&(b+8>=O?T.intervalId.set(Ex(E)):b-8<=0?T.intervalId.set(wx(E)):v+8>=D?T.intervalId.set(Cx(E)):v-8<=0?T.intervalId.set(yx(E)):k+16>=window.innerHeight?T.intervalId.set(Ex(window)):k-16<=0?T.intervalId.set(wx(window)):N+16>=window.innerWidth?T.intervalId.set(Cx(window)):N-16<=0&&T.intervalId.set(yx(window)))})})(s.ghost,c,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o,d),n.throttle(r.clientX,r.clientY)}var i,l})},kx=(t,e,n)=>{t.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>Wa(e,"dragend",o.element,o.dataTransfer),r=>Wa(e,"dragend",o.element,o.dataTransfer,r))}),_x(t)},_x=t=>{t.on(e=>{e.intervalId.clear(),xx(e.ghost)}),t.clear()},fB=t=>{const e=eo(),n=Pt.DOM,o=document,r=((l,d)=>c=>{if((u=>u.button===0)(c)){const u=Zt(d.dom.getParents(c.target),cB).getOr(null);if(W(u)&&((m,p,f)=>vx(f)&&f!==p&&m.isEditable(f.parentElement))(d.dom,d.getBody(),u)){const m=d.dom.getPos(u),p=d.getBody(),f=d.getDoc().documentElement;l.set({element:u,dataTransfer:Sf(),dragging:!1,screenX:c.screenX,screenY:c.screenY,maxX:(d.inline?p.scrollWidth:f.offsetWidth)-2,maxY:(d.inline?p.scrollHeight:f.offsetHeight)-2,relX:c.pageX-m.x,relY:c.pageY-m.y,width:u.offsetWidth,height:u.offsetHeight,ghost:uB(d,u,u.offsetWidth,u.offsetHeight),intervalId:v_(100)})}}})(e,t),s=mB(e,t),a=((l,d)=>c=>{l.on(u=>{var m;if(u.intervalId.clear(),u.dragging){if(((p,f,h)=>!Yt(f)&&f!==h&&!p.dom.isChildOf(f,h)&&p.dom.isEditable(f))(d,(p=>{const f=p.getSel();if(W(f)){const h=f.getRangeAt(0).startContainer;return H(h)?h.parentNode:h}return null})(d.selection),u.element)){const p=(m=d.getDoc().elementFromPoint(c.clientX,c.clientY))!==null&&m!==void 0?m:d.getBody();Wa(d,"drop",p,u.dataTransfer,c).isDefaultPrevented()||d.undoManager.transact(()=>{((f,h)=>{const g=f.getParent(h.parentNode,f.isBlock);xx(h),g&&g!==f.getRoot()&&f.isEmpty(g)&&wo(R(g))})(d.dom,u.element),(f=>{const h=f.getData("text/html");return h===""?C.none():C.some(h)})(u.dataTransfer).each(f=>d.insertContent(f)),d._selectionOverrides.hideFakeCaret()})}Wa(d,"dragend",d.getBody(),u.dataTransfer,c)}}),_x(l)})(e,t),i=((l,d)=>c=>kx(l,d,C.some(c)))(e,t);t.on("mousedown",r),t.on("mousemove",s),t.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),t.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===Q.ESC&&kx(e,t,C.none())})},Ka=Lt,Sx=(t,e)=>ur(t.getBody(),e),gB=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=SN(t,o,n.isBlock,()=>ts(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=g=>g!==o&&(Ka(g)||Pn(g))&&n.isChildOf(g,o)&&n.isEditable(g.parentNode),d=(g,b,v,y=!0)=>t.dispatch("ShowCaret",{target:b,direction:g,before:v}).isDefaultPrevented()?null:(y&&e.scrollIntoView(b,g===-1),r.show(v,b)),c=g=>Ke(g)||Ri(g)||Ai(g),u=g=>c(g.startContainer)||c(g.endContainer),m=g=>{const b=t.schema.getVoidElements(),v=n.createRng(),y=g.startContainer,E=g.startOffset,w=g.endContainer,x=g.endOffset;return pt(b,y.nodeName.toLowerCase())?E===0?v.setStartBefore(y):v.setStartAfter(y):v.setStart(y,E),pt(b,w.nodeName.toLowerCase())?x===0?v.setEndBefore(w):v.setEndAfter(w):v.setEnd(w,x),v},p=(g,b)=>{if(!g)return null;if(g.collapsed){if(!u(g)){const w=b?1:-1,x=ua(w,o,g),S=x.getNode(!b);if(W(S)){if(ia(S))return d(w,S,!!b&&!x.isAtEnd(),!1);if(Eo(S)&&Lt(S.nextSibling)){const O=n.createRng();return O.setStart(S,0),O.setEnd(S,0),O}}const _=x.getNode(b);if(W(_)){if(ia(_))return d(w,_,!b&&!x.isAtEnd(),!1);if(Eo(_)&&Lt(_.previousSibling)){const O=n.createRng();return O.setStart(_,1),O.setEnd(_,1),O}}}return null}let v=g.startContainer,y=g.startOffset;const E=g.endOffset;if(H(v)&&y===0&&Ka(v.parentNode)&&(v=v.parentNode,y=n.nodeIndex(v),v=v.parentNode),!nt(v))return null;if(E===y+1&&v===g.endContainer){const w=v.childNodes[y];if(l(w))return(x=>{const S=x.cloneNode(!0),_=t.dispatch("ObjectSelected",{target:x,targetClone:S});if(_.isDefaultPrevented())return null;const O=((k,N)=>{const T=R(t.getBody()),F=t.getDoc(),j=ui(T,"#"+s).getOrThunk(()=>{const ot=di('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',F);return de(ot,"id",s),Gt(T,ot),ot}),z=n.createRng();Pr(j),Ho(j,[Ar(Jt,F),R(N),Ar(Jt,F)]),z.setStart(j.dom.firstChild,1),z.setEnd(j.dom.lastChild,0),fi(j,{top:n.getPos(k,t.getBody()).y+"px"}),d0(j);const J=e.getSel();return J&&(J.removeAllRanges(),J.addRange(z)),z})(x,_.targetClone),D=R(x);return U(be(R(t.getBody()),`*[${a}]`),k=>{kt(D,k)||ce(k,a)}),n.getAttrib(x,a)||x.setAttribute(a,"1"),i=x,h(),O})(w)}return null},f=()=>{i&&i.removeAttribute(a),ui(R(t.getBody()),"#"+s).each(Ut),i=null},h=()=>{r.hide()};return zn(t)||(t.on("click",g=>{n.isEditable(g.target)||(g.preventDefault(),t.focus())}),t.on("blur NewBlock",f),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",g=>{const b=g.target,v=Sx(t,b);Ka(v)?(g.preventDefault(),Pa(t,v).each(p)):l(b)&&Pa(t,b).each(p)},!0),t.on("mousedown",g=>{const b=g.target;if(b!==o&&b.nodeName!=="HTML"&&!n.isChildOf(b,o)||!((y,E,w)=>{const x=R(y.getBody()),S=y.inline?x:R(po(x).dom.documentElement),_=((O,D,k,N)=>{const T=(F=>F.dom.getBoundingClientRect())(D);return{x:k-(O?T.left+D.dom.clientLeft+HA(D):0),y:N-(O?T.top+D.dom.clientTop+jA(D):0)}})(y.inline,S,E,w);return((O,D,k)=>{const N=UA(O),T=zA(O);return D>=0&&k>=0&&D<=N&&k<=T})(S,_.x,_.y)})(t,g.clientX,g.clientY))return;f(),h();const v=Sx(t,b);Ka(v)?(g.preventDefault(),Pa(t,v).each(p)):px(o,g.clientX,g.clientY).each(y=>{var E;g.preventDefault(),(E=d(1,y.node,y.position===fs.Before,!1))&&e.setRng(E),Jn(v)?v.focus():t.getBody().focus()})}),t.on("keypress",g=>{Q.modifierPressed(g)||Ka(e.getNode())&&g.preventDefault()}),t.on("GetSelectionRange",g=>{let b=g.range;if(i){if(!i.parentNode)return void(i=null);b=b.cloneRange(),b.selectNode(i),g.range=b}}),t.on("SetSelectionRange",g=>{g.range=m(g.range);const b=p(g.range,g.forward);b&&(g.range=b)}),t.on("AfterSetSelectionRange",g=>{const b=g.range,v=b.startContainer.parentElement;var y;u(b)||nt(y=v)&&y.id==="mcepastebin"||h(),(E=>W(E)&&n.hasClass(E,"mce-offscreen-selection"))(v)||f()}),(g=>{fB(g),HS(g)&&(b=>{const v=w=>{if(!w.isDefaultPrevented()){const x=w.dataTransfer;x&&(_t(x.types,"Files")||x.files.length>0)&&(w.preventDefault(),w.type==="drop"&&kl(b,"Dropped file type is not supported"))}},y=w=>{Xi(b,w.target)&&v(w)},E=()=>{const w=Pt.DOM,x=b.dom,S=document,_=b.inline?b.getBody():b.getDoc(),O=["drop","dragover"];U(O,D=>{w.bind(S,D,y),x.bind(_,D,v)}),b.on("remove",()=>{U(O,D=>{w.unbind(S,D,y),x.unbind(_,D,v)})})};b.on("init",()=>{Qe.setEditorTimeout(b,E,0)})})(g)})(t),(g=>{const b=_i(()=>{if(!g.removed&&g.getBody().contains(document.activeElement)){const v=g.selection.getRng();if(v.collapsed){const y=Am(g,v,!1);g.selection.setRng(y)}}},0);g.on("focus",()=>{b.throttle()}),g.on("blur",()=>{b.cancel()})})(t),(g=>{g.on("init",()=>{g.on("focusin",b=>{const v=b.target;if(Pn(v)){const y=ur(g.getBody(),v),E=Lt(y)?y:v;g.selection.getNode()!==E&&Pa(g,E).each(w=>g.selection.setRng(w))}})})})(t)),{showCaret:d,showBlockCaretContainer:g=>{g.hasAttribute("data-mce-caret")&&(hc(g),e.scrollIntoView(g))},hideFakeCaret:h,destroy:()=>{r.destroy(),i=null}}},pB=(t,e)=>{let n=e;for(let o=t.previousSibling;H(o);o=o.previousSibling)n+=o.data.length;return n},Nx=(t,e,n,o,r)=>{if(H(n)&&(o<0||o>n.data.length))return[];const s=r&&H(n)?[pB(n,o)]:[o];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,r)),a=a.parentNode;return a===e?s.reverse():[]},Df=(t,e,n,o,r,s,a=!1)=>({start:Nx(t,e,n,o,a),end:Nx(t,e,r,s,a)}),Rx=(t,e)=>{const n=e.slice(),o=n.pop();return an(o)?De(n,(r,s)=>r.bind(a=>C.from(a.childNodes[s])),C.some(t)).bind(r=>H(r)&&(o<0||o>r.data.length)?C.none():C.some({node:r,offset:o})):C.none()},Ax=(t,e)=>Rx(t,e.start).bind(({node:n,offset:o})=>Rx(t,e.end).map(({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})),gs=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e,H(e.firstChild)&&Lr(e.firstChild.data)),gs(t,o,n)}},Jl=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&(H(e.startContainer)&&e.startContainer.data.length===0&&t.remove(e.startContainer),H(e.endContainer)&&e.endContainer.data.length===0&&t.remove(e.endContainer),gs(t,r,n),r!==s&&gs(t,s,n))},td=(t,e)=>C.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),Lf=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:Fh(o).concat(t.blockPatterns),inlinePatterns:Uh(o).concat(t.inlinePatterns)}},Mf=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},Tx=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),ed=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},Ox=(t,e,n)=>{const o=Ax(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=o.endOffset===0?s:s.splitText(o.endOffset),i=o.startOffset===0?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(Tx(t,e+"-end"),a),start:l.insertBefore(Tx(t,e+"-start"),i)}},Bx=(t,e,n)=>{gs(t,t.get(e.prefix+"-end"),n),gs(t,t.get(e.prefix+"-start"),n)},If=t=>t.start.length===0,Px=(t,e,n,o)=>{const r=e.start;var s;return tf(t,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),d=l.lastIndexOf(s.charAt(s.length-1)),c=l.lastIndexOf(s);return c!==-1?c+s.length:d!==-1?d+1:-1}),n).bind(a=>{var i,l;const d=(l=(i=n.textContent)===null||i===void 0?void 0:i.indexOf(r))!==null&&l!==void 0?l:-1;if(d!==-1&&a.offset>=d+r.length){const c=t.createRng();return c.setStart(a.container,a.offset-r.length),c.setEnd(a.container,a.offset),C.some(c)}{const c=a.offset-r.length;return Jm(a.container,c,n).map(u=>{const m=t.createRng();return m.setStart(u.container,u.offset),m.setEnd(a.container,a.offset),m}).filter(u=>u.toString()===r).orThunk(()=>Px(t,e,n,xn(a.container,0)))}})},hB=(t,e,n,o)=>{const r=t.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Jm(i,l-n.pattern.end.length,e).bind(d=>{const c=Df(r,s,d.container,d.offset,i,l,o);if(If(a))return C.some({matches:[{pattern:a,startRng:c,endRng:c}],position:d});{const u=nd(t,n.remainingPatterns,d.container,d.offset,e,o),m=u.getOr({matches:[],position:d}),p=m.position;return((h,g,b,v,y,E=!1)=>{if(g.start.length===0&&!E){const w=h.createRng();return w.setStart(b,v),w.setEnd(b,v),C.some(w)}return Qm(b,v,y).bind(w=>Px(h,g,y,w).bind(x=>{var S;return E&&(x.endContainer===w.container&&x.endOffset===w.offset||w.offset===0&&((S=x.endContainer.textContent)===null||S===void 0?void 0:S.length)===x.endOffset)?C.none():C.some(x)}))})(r,a,p.container,p.offset,e,u.isNone()).map(h=>{const g=((b,v,y,E=!1)=>Df(b,v,y.startContainer,y.startOffset,y.endContainer,y.endOffset,E))(r,s,h,o);return{matches:m.matches.concat([{pattern:a,startRng:g,endRng:c}]),position:xn(h.startContainer,h.startOffset)}})}})},nd=(t,e,n,o,r,s)=>{const a=t.dom;return Qm(n,o,a.getRoot()).bind(i=>{const l=Mf(a,r,n,o);for(let d=0;d<e.length;d++){const c=e[d];if(!xd(l,c.end))continue;const u=e.slice();u.splice(d,1);const m=hB(t,r,{pattern:c,remainingPatterns:u,position:i},s);if(m.isNone()&&o>0)return nd(t,e,n,o-1,r,s);if(m.isSome())return m}return C.none()})},Dx=(t,e,n)=>{t.selection.setRng(n),e.type==="inline-format"?U(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},Lx=(t,e,n,o,r,s)=>{var a;return((i,l)=>{const d=Kn(i,c=>Ht(l,u=>c.pattern.start===u.pattern.start&&c.pattern.end===u.pattern.end));return i.length===l.length?d?i:l:i.length>l.length?i:l})(nd(t,r.inlinePatterns,n,o,e,s).fold(()=>[],i=>i.matches),nd(t,(a=r.inlinePatterns,Io(a,(i,l)=>l.end.length-i.end.length)),n,o,e,s).fold(()=>[],i=>i.matches))},Mx=(t,e)=>{if(e.length===0)return;const n=t.dom,o=t.selection.getBookmark(),r=((s,a)=>{const i=Zs("mce_textpattern"),l=Es(a,(d,c)=>{const u=Ox(s,i+`_end${d.length}`,c.endRng);return d.concat([{...c,endMarker:u}])},[]);return Es(l,(d,c)=>{const u=l.length-d.length-1,m=If(c.pattern)?c.endMarker:Ox(s,i+`_start${u}`,c.startRng);return d.concat([{...c,startMarker:m}])},[])})(n,e);U(r,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;If(s.pattern)?((l,d,c,u)=>{const m=ed(l.dom,c);Jl(l.dom,m,u),Dx(l,d,m)})(t,s.pattern,s.endMarker,i):((l,d,c,u,m)=>{const p=l.dom,f=ed(p,u),h=ed(p,c);Jl(p,h,m),Jl(p,f,m);const g={prefix:c.prefix,start:c.end,end:u.start},b=ed(p,g);Dx(l,d,b)})(t,s.pattern,s.startMarker,s.endMarker,i),Bx(n,s.endMarker,i),Bx(n,s.startMarker,i)}),t.selection.moveToBookmark(o)},Ix=(t,e,n)=>((o,r,s)=>{if(H(o)&&0>=o.length)return C.some(xn(o,0));{const a=Qo(Dl);return C.from(a.forwards(o,0,Ll(o),s)).map(i=>xn(i.container,0))}})(e,0,e).map(o=>{const r=o.container;return Hw(r,n.start.length,e).each(s=>{const a=t.createRng();a.setStart(r,0),a.setEnd(s.container,s.offset),Jl(t,a,i=>i===e)}),r}),Fx=t=>(e,n)=>{const o=e.dom,r=n.pattern,s=Ax(o.getRoot(),n.range).getOrDie("Unable to resolve path range");return td(e,s).each(a=>{r.type==="block-format"?((i,l)=>{const d=l.get(i);return Vt(d)&&Re(d).exists(c=>pt(c,"block"))})(r.format,e.formatter)&&e.undoManager.transact(()=>{t(e.dom,a,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{t(e.dom,a,r),e.execCommand(r.cmd,!1,r.value)})}),!0},Ux=t=>(e,n)=>{const o=(s=>Io(s,(a,i)=>i.start.length-a.start.length))(e),r=n.replace(Jt," ");return Zt(o,s=>t(s,n,r))},zx=(t,e)=>(n,o,r,s,a)=>{var i;a===void 0&&(a=(i=o.textContent)!==null&&i!==void 0?i:"");const l=n.dom,d=ye(n);return l.is(o,d)?t(r.blockPatterns,a).map(c=>e&&$.trim(a).length===c.start.length?[]:[{pattern:c,range:Df(l,l.getRoot(),o,0,o,0,s)}]).getOr([]):[]},bB=Fx((t,e,n)=>{Ix(t,e,n).each(o=>{const r=R(o),s=Qs(r);/^\s[^\s]/.test(s)&&ah(r,s.slice(1))})}),vB=Ux((t,e,n)=>e.indexOf(t.start)===0||n.indexOf(t.start)===0),yB=zx(vB,!0),CB=Fx(Ix),wB=Ux((t,e,n)=>e===t.start||n===t.start),EB=zx(wB,!1),jx=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},xB=t=>{const e=[",",".",";",":","!","?"],n=[32],o=()=>{return a=lN(t).filter(l=>l.type!=="inline-command"&&l.type!=="block-command"||t.queryCommandSupported(l.cmd)),i=dN(t),{inlinePatterns:Uh(a),blockPatterns:Fh(a),dynamicPatternsLookup:i};var a,i},r=()=>(a=>a.options.isSet("text_patterns_lookup"))(t);t.on("keydown",a=>{if(a.keyCode===13&&!Q.modifierPressed(a)&&t.selection.isCollapsed()&&t.selection.isEditable()){const i=Sc(o(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||r())&&((l,d)=>((c,u)=>{const m=c.selection.getRng();return td(c,m).map(p=>{var f;const h=Math.max(0,m.startOffset),g=Lf(u,p,(f=p.textContent)!==null&&f!==void 0?f:"");return{inlineMatches:Lx(c,p,m.startContainer,h,g,!0),blockMatches:yB(c,p,g,!0)}}).filter(({inlineMatches:p,blockMatches:f})=>f.length>0||p.length>0)})(l,d).fold(jt,({inlineMatches:c,blockMatches:u})=>(l.undoManager.add(),l.undoManager.extra(()=>{l.execCommand("mceInsertNewLine")},()=>{(f=>{f.insertContent(se,{preserve_zwsp:!0})})(l),Mx(l,c),((f,h)=>{if(h.length===0)return;const g=f.selection.getBookmark();U(h,b=>bB(f,b)),f.selection.moveToBookmark(g)})(l,u);const m=l.selection.getRng(),p=Qm(m.startContainer,m.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),p.each(f=>{const h=f.container;h.data.charAt(f.offset-1)===Us&&(h.deleteData(f.offset-1,1),gs(l.dom,h.parentNode,g=>g===l.dom.getRoot()))})}),!0)))(t,i)&&a.preventDefault()}},!0),t.on("keydown",a=>{if(a.keyCode===32&&t.selection.isCollapsed()&&t.selection.isEditable()){const i=Sc(o(),"space");(i.blockPatterns.length>0||r())&&((l,d)=>((c,u)=>{const m=c.selection.getRng();return td(c,m).map(p=>{const f=Math.max(0,m.startOffset),h=Mf(c.dom,p,m.startContainer,f),g=Lf(u,p,h);return EB(c,p,g,!1,h)}).filter(p=>p.length>0)})(l,d).fold(jt,c=>(l.undoManager.transact(()=>{((u,m)=>{U(m,p=>CB(u,p))})(l,c)}),!0)))(t,i)&&a.preventDefault()}},!0);const s=()=>{if(t.selection.isCollapsed()&&t.selection.isEditable()){const a=Sc(o(),"space");(a.inlinePatterns.length>0||r())&&((i,l)=>{const d=i.selection.getRng();td(i,d).map(c=>{const u=Math.max(0,d.startOffset-1),m=Mf(i.dom,c,d.startContainer,u),p=Lf(l,c,m),f=Lx(i,c,d.startContainer,u,p,!1);f.length>0&&i.undoManager.transact(()=>{Mx(i,f)})})})(t,a)}};t.on("keyup",a=>{jx(n,a,(i,l)=>i===l.keyCode&&!Q.modifierPressed(l))&&s()}),t.on("keypress",a=>{jx(e,a,(i,l)=>i.charCodeAt(0)===l.charCode)&&Qe.setEditorTimeout(t,s)})},kB=t=>{const e=$.each,n=Q.BACKSPACE,o=Q.DELETE,r=t.dom,s=t.selection,a=t.parser,i=Et.browser,l=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=Et.deviceType.isiPhone()||Et.deviceType.isiPad(),u=Et.os.isMacOS()||Et.os.isiOS(),m=(k,N)=>{try{t.getDoc().execCommand(k,!1,String(N))}catch{}},p=k=>k.isDefaultPrevented(),f=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",k=>{let N;if(k.target===t.getDoc().documentElement)if(N=s.getRng(),t.getBody().focus(),k.type==="mousedown"){if(Ke(N.startContainer))return;s.placeCaretAt(k.clientX,k.clientY)}else s.setRng(N)})},g=()=>{Range.prototype.getClientRects||t.on("mousedown",k=>{if(!p(k)&&k.target.nodeName==="HTML"){const N=t.getBody();N.blur(),Qe.setEditorTimeout(t,()=>{N.focus()})}})},b=()=>{const k=ib(t);t.on("click",N=>{const T=N.target;/^(IMG|HR)$/.test(T.nodeName)&&r.isEditable(T)&&(N.preventDefault(),t.selection.select(T),t.nodeChanged()),T.nodeName==="A"&&r.hasClass(T,k)&&T.childNodes.length===0&&r.isEditable(T.parentNode)&&(N.preventDefault(),s.select(T))})},v=()=>{t.on("keydown",k=>{if(!p(k)&&k.keyCode===n&&s.isCollapsed()&&s.getRng().startOffset===0){const N=s.getNode().previousSibling;if(N&&N.nodeName&&N.nodeName.toLowerCase()==="table")return k.preventDefault(),!1}return!0})},y=()=>{sb(t)||t.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),ob(t)||m("enableObjectResizing",!1)})},E=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},x=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",k=>{let N;k.target.nodeName==="HTML"&&(N=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(N),t.selection.normalize(),t.nodeChanged())}))},S=()=>{u&&t.on("keydown",k=>{!Q.metaKeyPressed(k)||k.shiftKey||k.keyCode!==37&&k.keyCode!==39||(k.preventDefault(),t.selection.getSel().modify("move",k.keyCode===37?"backward":"forward","lineboundary"))})},_=()=>{t.on("click",k=>{let N=k.target;do if(N.tagName==="A")return void k.preventDefault();while(N=N.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},O=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",k=>{k.preventDefault()})})},D=vt;return zn(t)?(d&&(h(),b(),O(),f(),c&&(w(),x(),_())),l&&(g(),y(),E(),S())):(t.on("keydown",k=>{if(p(k)||k.keyCode!==Q.BACKSPACE)return;let N=s.getRng();const T=N.startContainer,F=N.startOffset,j=r.getRoot();let z=T;if(N.collapsed&&F===0){for(;z.parentNode&&z.parentNode.firstChild===z&&z.parentNode!==j;)z=z.parentNode;z.nodeName==="BLOCKQUOTE"&&(t.formatter.toggle("blockquote",void 0,z),N=r.createRng(),N.setStart(T,0),N.setEnd(T,0),s.setRng(N))}}),(()=>{const k=N=>{const T=r.create("body"),F=N.cloneContents();return T.appendChild(F),s.serializer.serialize(T,{format:"html"})};t.on("keydown",N=>{const T=N.keyCode;if(!p(N)&&(T===o||T===n)&&t.selection.isEditable()){const F=t.selection.isCollapsed(),j=t.getBody();if(F&&!to(t.schema,j)||!F&&!(z=>{const J=k(z),ot=r.createRng();return ot.selectNode(t.getBody()),J===k(ot)})(t.selection.getRng()))return;N.preventDefault(),t.setContent(""),j.firstChild&&r.isBlock(j.firstChild)?t.selection.setCursorLocation(j.firstChild,0):t.selection.setCursorLocation(j,0),t.nodeChanged()}})})(),Et.windowsPhone||t.on("keyup focusin mouseup",k=>{Q.modifierPressed(k)||(N=>{const T=N.getBody(),F=N.selection.getRng();return F.startContainer===F.endContainer&&F.startContainer===T&&F.startOffset===0&&F.endOffset===T.childNodes.length})(t)||s.normalize()},!0),d&&(h(),b(),t.on("init",()=>{m("DefaultParagraphSeparator",ye(t))}),O(),v(),a.addNodeFilter("br",k=>{let N=k.length;for(;N--;)k[N].attr("class")==="Apple-interchange-newline"&&k[N].remove()}),c?(w(),x(),_()):f()),l&&(t.on("keydown",k=>{if(!p(k)&&k.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&s.getRng().startOffset===0){const N=s.getNode(),T=N.previousSibling;if(N.nodeName==="HR")return r.remove(N),void k.preventDefault();T&&T.nodeName&&T.nodeName.toLowerCase()==="hr"&&(r.remove(T),k.preventDefault())}}}),g(),(()=>{const k=()=>{const T=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const F=s.getStart();F!==t.getBody()&&(r.setAttrib(F,"style",null),e(T,j=>{F.setAttributeNode(j.cloneNode(!0))}))}},N=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);t.on("keypress",T=>{let F;return!(!(p(T)||T.keyCode!==8&&T.keyCode!==46)&&N()&&(F=k(),t.getDoc().execCommand("delete",!1),F(),T.preventDefault(),1))}),r.bind(t.getDoc(),"cut",T=>{if(!p(T)&&N()){const F=k();Qe.setEditorTimeout(t,()=>{F()})}})})(),y(),t.on("SetContent ExecCommand",k=>{k.type!=="setcontent"&&k.command!=="mceInsertLink"||e(r.select("a:not([data-mce-block])"),N=>{var T;let F=N.parentNode;const j=r.getRoot();if(F?.lastChild===N){for(;F&&!r.isBlock(F);){if(((T=F.parentNode)===null||T===void 0?void 0:T.lastChild)!==F||F===j)return;F=F.parentNode}r.add(F,"br",{"data-mce-bogus":1})}})}),E(),S(),v())),{refreshContentEditable:D,isHidden:()=>{if(!l||t.removed)return!1;const k=t.selection.getSel();return!k||!k.rangeCount||k.rangeCount===0}}},Ff=Pt.DOM,_B=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Uf=t=>Ns(t,e=>le(e)===!1),Hx=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return Uf({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_mathml_annotation_encodings:e("allow_mathml_annotation_encodings"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_unsafe_embeds:e("convert_unsafe_embeds"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:_B(t),sandbox_iframes:e("sandbox_iframes"),sandbox_iframes_exclusions:Bc(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},$x=t=>{const e=t.options.get;return Uf({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},zf=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,Vx=t=>{const e=zf(t),n=nb(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";$.each(t.contentStyles,d=>{l+=d+`\r
`}),t.dom.addStyle(l)}const a=Promise.all(((l,d,c)=>{const{pass:u,fail:m}=Er(d,h=>tinymce.Resource.has(km(h))),p=u.map(h=>{const g=tinymce.Resource.get(km(h));return st(g)?Promise.resolve(zf(l).loadRawCss(h,g)):Promise.resolve()}),f=[...p,zf(l).loadAll(m)];return l.inline?f:f.concat([l.ui.styleSheetLoader.loadAll(c)])})(t,o,n)).then(s).catch(s),i=wS(t);return i&&((l,d)=>{const c=R(l.getBody()),u=Pd(bo(c)),m=ne("style");de(m,"type","text/css"),Gt(m,Ar(d)),Gt(u,m),l.on("remove",()=>{Ut(m)})})(t,i),a},jf=t=>{t.removed!==!0&&((e=>{zn(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(t),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,(o=>{o.dispatch("Init")})(e),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||Vi(o)&&o.selection.getStart(!0)!==r||Ce(r).each(s=>{const a=s.getNode(),i=Bn(a)?Ce(a).getOr(s):s;o.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=WS(e);Nt(n)&&n.call(e,e),(o=>{const r=YS(o);r&&Qe.setEditorTimeout(o,()=>{let s;s=r===!0?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e),so(e)&&WC(e,!0)})(t))},qx=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(Ff.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();o.disabled=!0,t.readonly=sb(t),t._editableRoot=zS(t),!Ii(t)&&t.hasEditableRoot()&&(t.inline&&Ff.getStyle(o,"position",!0)==="static"&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=KA(t),t.schema=Co($x(t)),t.dom=Pt(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:bS(t),referrerPolicy:Ac(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=ns(Hx(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,d)=>{const c=a.dom,u="data-mce-"+d;let m=l.length;for(;m--;){const p=l[m];let f=p.attr(d);if(f&&!p.attr(u)){if(f.indexOf("data:")===0||f.indexOf("blob:")===0)continue;d==="style"?(f=c.serializeStyle(c.parseStyle(f),p.name),f.length||(f=null),p.attr(u,f),p.attr(d,f)):d==="tabindex"?(p.attr(u,f),p.attr(d,null)):p.attr(u,a.convertURL(f,d,p.name))}}}),i.addNodeFilter("script",l=>{let d=l.length;for(;d--;){const c=l[d],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),mN(a)&&i.addNodeFilter("#cdata",l=>{var d;let c=l.length;for(;c--;){const u=l[c];u.type=8,u.name="#comment",u.value="[CDATA["+a.dom.encode((d=u.value)!==null&&d!==void 0?d:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let d=l.length;const c=a.schema.getNonEmptyElements();for(;d--;){const u=l[d];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new _e("br",1))}}),i})(t),t.serializer=DC((a=>{const i=a.options.get;return{...Hx(a),...$x(a),...Uf({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=PC(t.dom,t.getWin(),t.serializer,t),t.annotator=a0(t),t.formatter=t1(t),t.undoManager=n1(t),t._nodeChangeDispatcher=new UO(t),t._selectionOverrides=gB(t),(a=>{const i=eo(),l=re(!1),d=uc(c=>{a.dispatch("longpress",{...c,type:"longpress"}),l.set(!0)},400);a.on("touchstart",c=>{fw(c).each(u=>{d.cancel();const m={x:u.clientX,y:u.clientY,target:c.target};d.throttle(c),l.set(!1),i.set(m)})},!0),a.on("touchmove",c=>{d.cancel(),fw(c).each(u=>{i.on(m=>{((p,f)=>{const h=Math.abs(p.clientX-f.x),g=Math.abs(p.clientY-f.y);return h>5||g>5})(u,m)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",c=>{d.cancel(),c.type!=="touchcancel"&&i.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{l.get()?c.preventDefault():a.dispatch("tap",{...c,type:"tap"})})},!0)})(t),(a=>{(i=>{i.on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()})})(a),(i=>{i.parser.addNodeFilter("details",l=>{const d=hN(i);U(l,c=>{d==="expanded"?c.attr("open","open"):d==="collapsed"&&c.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const d=bN(i);U(l,c=>{d==="expanded"?c.attr("open","open"):d==="collapsed"&&c.attr("open",null)})})})(a)})(t),(a=>{const i="contenteditable",l=" "+$.trim(cN(a))+" ",d=" "+$.trim(db(a))+" ",c=pw(l),u=pw(d),m=uN(a);m.length>0&&a.on("BeforeSetContent",p=>{((f,h,g)=>{let b=h.length,v=g.content;if(g.format!=="raw"){for(;b--;)v=v.replace(h[b],PT(f,v,db(f)));g.content=v}})(a,m,p)}),a.parser.addAttributeFilter("class",p=>{let f=p.length;for(;f--;){const h=p[f];c(h)?h.attr(i,"true"):u(h)&&h.attr(i,"false")}}),a.serializer.addAttributeFilter(i,p=>{let f=p.length;for(;f--;){const h=p[f];if(!c(h)&&!u(h))continue;const g=h.attr("data-mce-content");m.length>0&&g?DT(m,g)?(h.name="#text",h.type=3,h.raw=!0,h.value=g):h.remove():h.attr(i,null)}})})(t),zn(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),rB(a))})})(t),(a=>{xB(a)})(t));const r=FO(t);((a,i)=>{a.addCommand("delete",()=>{((l,d)=>{mw(l,d,!1).fold(()=>{l.selection.isEditable()&&(il(l),Nu(l))},ws)})(a,i)}),a.addCommand("forwardDelete",()=>{((l,d)=>{mw(l,d,!0).fold(()=>{l.selection.isEditable()&&Rv(l)},ws)})(a,i)})})(t,r),(a=>{a.on("NodeChange",()=>(i=>{const l=i.dom,d=i.selection,c=i.schema,u=c.getBlockElements(),m=d.getStart(),p=i.getBody();let f,h,g=null;const b=ye(i);if(!m||!nt(m))return;const v=p.nodeName.toLowerCase();if(!c.isValidChild(v,b.toLowerCase())||((E,w,x)=>Ht(rv(R(x),R(w)),S=>Ym(E,S.dom)))(u,p,m))return;if(p.firstChild===p.lastChild&&$t(p.firstChild))return f=Gm(i),f.appendChild(zr().dom),p.replaceChild(f,p.firstChild),i.selection.setCursorLocation(f,0),void i.nodeChanged();let y=p.firstChild;for(;y;)if(nt(y)&&w_(c,y),OT(c,y)){if(BT(u,y)){h=y,y=y.nextSibling,l.remove(h);continue}if(!f){if(!g&&i.hasFocus()&&(g=y1(i.selection.getRng(),()=>document.createElement("span"))),!y.parentNode){y=null;break}f=Gm(i),p.insertBefore(f,y)}h=y,y=y.nextSibling,f.appendChild(h)}else f=null,y=y.nextSibling;g&&(i.selection.setRng(C1(g)),i.nodeChanged())})(a))})(t),(a=>{var i;const l=a.dom,d=ye(a),c=(i=_S(a))!==null&&i!==void 0?i:"",u=(m,p)=>{if((g=>{if(r1(g)){const b=g.keyCode;return!s1(g)&&(Q.metaKeyPressed(g)||g.altKey||b>=112&&b<=123||_t(QA,b))}return!1})(m))return;const f=a.getBody(),h=!(g=>r1(g)&&!(s1(g)||g.type==="keyup"&&g.keyCode===229))(m)&&((g,b,v)=>{if(g.isEmpty(b,void 0,{skipBogus:!1,includeZwsp:!0})){const y=b.firstElementChild;return!y||!g.getStyle(b.firstElementChild,"padding-left")&&!g.getStyle(b.firstElementChild,"padding-right")&&v===y.nodeName.toLowerCase()}return!1})(l,f,d);(l.getAttrib(f,o1)!==""!==h||p)&&(l.setAttrib(f,o1,h?c:null),((g,b)=>{g.dispatch("PlaceholderToggle",{state:b})})(a,h),a.on(h?"keydown":"keyup",u),a.off(h?"keyup":"keydown",u))};Nn(c)&&a.on("init",m=>{u(m,!0),a.on("change SetContent ExecCommand",u),a.on("paste",p=>Qe.setEditorTimeout(a,()=>u(p)))})})(t),eB(t);const s=(a=>{const i=a;return(l=>Ft(l.plugins,"rtc").bind(d=>C.from(d.setup)))(a).fold(()=>(i.rtcInstance=NC(a),C.none()),l=>(i.rtcInstance=(()=>{const d=Y(null),c=Y("");return{init:{bindEvents:vt},undoManager:{beforeChange:vt,add:d,undo:d,redo:d,clear:vt,reset:vt,hasUndo:jt,hasRedo:jt,transact:d,ignore:vt,extra:vt},formatter:{match:jt,matchAll:Y([]),matchNode:Y(void 0),canApply:jt,closest:c,apply:vt,remove:vt,toggle:vt,formatChanged:Y({unbind:vt})},editor:{getContent:c,setContent:Y({content:"",html:""}),insertContent:Y(""),addVisual:vt},selection:{getContent:c},autocompleter:{addDecoration:vt,removeDecoration:vt},raw:{getModel:Y(C.none())}}})(),C.some(()=>l().then(d=>(i.rtcInstance=(c=>{const u=y=>ie(y)?y:{},{init:m,undoManager:p,formatter:f,editor:h,selection:g,autocompleter:b,raw:v}=c;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(y,E,w)=>p.transact(w),ignore:(y,E)=>p.ignore(E),extra:(y,E,w,x)=>p.extra(w,x)},formatter:{match:(y,E,w,x)=>f.match(y,u(E),x),matchAll:f.matchAll,matchNode:f.matchNode,canApply:y=>f.canApply(y),closest:y=>f.closest(y),apply:(y,E,w)=>f.apply(y,u(E)),remove:(y,E,w,x)=>f.remove(y,u(E)),toggle:(y,E,w)=>f.toggle(y,u(E)),formatChanged:(y,E,w,x,S)=>f.formatChanged(E,w,x,S)},editor:{getContent:y=>h.getContent(y),setContent:(y,E)=>({content:h.setContent(y,E),html:""}),insertContent:(y,E)=>(h.insertContent(y),""),addVisual:h.addVisual},selection:{getContent:(y,E)=>g.getContent(E)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>C.some(v.getRawModel())}}})(d),d.rtc.isRemote)))))})(t);(a=>{const i=a.getDoc(),l=a.getBody();(u=>{u.dispatch("PreInit")})(a),GS(a)||(i.body.spellcheck=!1,Ff.setAttrib(l,"spellcheck","false")),a.quirks=kB(a),(u=>{u.dispatch("PostRender")})(a);const d=ES(a);d!==void 0&&(l.dir=d);const c=XS(a);c&&a.on("BeforeSetContent",u=>{$.each(c,m=>{u.content=u.content.replace(m,p=>"<!--mce:protected "+escape(p)+"-->")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",u=>{a.composing=u.type==="compositionstart"})})(t),(a=>{const i=yN(a);st(CN(a))||!le(i)&&(l=>(d=>d.toLowerCase()==="gpl")(l)||(d=>d.length>=64&&d.length<=255)(l)?"VALID":"INVALID")(i)!=="INVALID"||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(t),s.fold(()=>{const a=(i=>{let l=!1;const d=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(d),l=!0,i.setProgressState(!1)}})(t);Vx(t).then(()=>{jf(t),a()})},a=>{t.setProgressState(!0),Vx(t).then(()=>{a().then(i=>{t.setProgressState(!1),jf(t),RC(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),jf(t),RC(t)})})})},SB=Wt,Hf=Pt.DOM,Wx=Pt.DOM,Kx=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),Yx=t=>{const e=t.getElement();return t.inline?Kx(null):(n=>{const o=Wx.create("div");return Wx.insertAfter(o,n),Kx(o,o)})(e)},NB=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=$.trim(Jh(n)),r=n.ui.registry.getAll().icons,s={...xl.get("default").icons,...xl.get(o).icons};Dt(s,(a,i)=>{pt(r,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const o=Vr(n);if(st(o)){const r=gr.get(o);n.theme=r(n,gr.urls[o])||{},Nt(n.theme.init)&&n.theme.init(n,gr.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=Tc(n),r=os.get(o);n.model=r(n,os.urls[o])})(t),(n=>{const o=[];U(Li(n),r=>{((s,a,i)=>{const l=rs.get(i),d=rs.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=$.trim(i),l&&$.inArray(a,i)===-1){if(s.plugins[i])return;try{const c=l(s,d)||{};s.plugins[i]=c,Nt(c.init)&&(c.init(s,d),a.push(i))}catch(c){((u,m,p)=>{const f=yn.translate(["Failed to initialize plugin: {0}",m]);jh(u,"PluginLoadError",{message:f}),_l(f,p),kl(u,f)})(s,i,c)}}})(n,o,(s=>s.replace(/^\-/,""))(r))})})(t);const e=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,st(Vr(n))?(r=>{const s=r.theme.renderUI;return s?s():Yx(r)})(n):Nt(Vr(n))?(r=>{const s=r.getElement(),a=Vr(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):Yx(n)})(t);((n,o)=>{const r={show:C.from(o.show).getOr(vt),hide:C.from(o.hide).getOr(vt),isEnabled:C.from(o.isEnabled).getOr(Wt),setEnabled:s=>{s&&(n.mode.get()==="readonly"||so(n))||C.from(o.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...r}})(t,C.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=>{n.contentCSS=n.contentCSS.concat((o=>YC(o,CS(o)))(n),(o=>YC(o,nb(o)))(n))})(t),t.inline?qx(t):((n,o)=>{((r,s)=>{const a=Et.browser.isFirefox()?lb(r):"Rich Text Area",i=r.translate(a),l=Xn(R(r.getElement()),"tabindex").bind(si),d=((c,u,m,p)=>{const f=ne("iframe");return p.each(h=>de(f,"tabindex",h)),Gn(f,m),Gn(f,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),Rr(f,"tox-edit-area__iframe"),f})(r.id,i,eS(r),l).dom;d.onload=()=>{d.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=d,r.iframeHTML=(c=>{let u=nS(c)+"<html><head>";Gh(c)!==c.documentBaseUrl&&(u+='<base href="'+c.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const m=oS(c),p=rS(c),f=c.translate(lb(c));return Xh(c)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+Xh(c)+'" />'),u+=`</head><body id="${m}" class="mce-content-body ${p}" data-id="${c.id}" aria-label="${f}"><br></body></html>`,u})(r),Hf.add(s.iframeContainer,d)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=Hf.isHidden(o.editorContainer)),n.getElement().style.display="none",Hf.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,a=()=>{r.contentDocument=s.contentDocument,qx(r)};if(gN(r)||Et.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),a()}else{const l=(i=R(s),i_(i,"load",SB,()=>{l.unbind(),a()}));s.srcdoc=r.iframeHTML}var i})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},vr=Pt.DOM,Gx=t=>t.charAt(0)==="-",Xx=(t,e,n)=>C.from(e).filter(o=>Nn(o)&&!xl.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:C.some(o)})),RB=(t,e)=>{const n=no.ScriptLoader,o=()=>{!t.removed&&(r=>{const s=Vr(r);return!st(s)||W(gr.get(s))})(t)&&(r=>{const s=Tc(r);return W(os.get(s))})(t)&&NB(t)};((r,s)=>{const a=Vr(r);if(st(a)&&!Gx(a)&&!pt(gr.urls,a)){const i=NS(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;gr.load(a,l).catch(()=>{((d,c,u)=>{Oa(d,"ThemeLoadError",Ba("theme",c,u))})(r,l,a)})}})(t,e),((r,s)=>{const a=Tc(r);if(a!=="plugin"&&!pt(os.urls,a)){const i=RS(r),l=st(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;os.load(a,l).catch(()=>{((d,c,u)=>{Oa(d,"ModelLoadError",Ba("model",c,u))})(r,l,a)})}})(t,e),((r,s)=>{const a=tb(s),i=vS(s);if(!yn.hasCode(a)&&a!=="en"){const l=Nn(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch(()=>{((d,c,u)=>{Oa(d,"LanguageLoadError",Ba("language",c,u))})(s,l,a)})}})(n,t),((r,s,a)=>{const i=Xx(s,"default",a),l=(d=>C.from(mS(d)).filter(Nn).map(c=>({url:c,name:C.none()})))(s).orThunk(()=>Xx(s,Jh(s),""));U((d=>{const c=[],u=m=>{c.push(m)};for(let m=0;m<d.length;m++)d[m].each(u);return c})([i,l]),d=>{r.add(d.url).catch(()=>{((c,u,m)=>{Oa(c,"IconsLoadError",Ba("icons",u,m))})(s,d.url,d.name.getOrUndefined())})})})(n,t,e),((r,s)=>{const a=(i,l)=>{rs.load(i,l).catch(()=>{((d,c,u)=>{Oa(d,"PluginLoadError",Ba("plugin",c,u))})(r,l,i)})};Dt(jS(r),(i,l)=>{a(l,i),r.options.set("plugins",Li(r).concat(l))}),U(Li(r),i=>{!(i=$.trim(i))||rs.urls[i]||Gx(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(o,o)},Zx=Rn().deviceType,Qx=Zx.isPhone(),AB=Zx.isTablet(),Ya=t=>{if(Yt(t))return[];{const e=Vt(t)?t:t.split(/[ ,]/),n=Ct(e,_r);return ft(n,Nn)}},TB=(t,e)=>{const n=((s,a)=>{const i={},l={};return cg(s,(d,c)=>_t(t,c),vd(i),vd(l)),{t:i,f:l}})(e);return o=n.t,r=n.f,{sections:Y(o),options:Y(r)};var o,r},$f=(t,e)=>pt(t.sections(),e),OB=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ft(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),BB=(t,e)=>{var n;const o=(n=e.external_plugins)!==null&&n!==void 0?n:{};return t&&t.external_plugins?$.extend({},t.external_plugins,o):o},PB=(t,e,n,o,r)=>{var s;const a=t?{mobile:OB((s=r.mobile)!==null&&s!==void 0?s:{},e)}:{},i=TB(["mobile"],rf(a,r)),l=$.extend(n,o,i.options(),((d,c)=>d&&$f(c,"mobile"))(t,i)?((d,c,u={})=>{const m=d.sections(),p=Ft(m,c).getOr({});return $.extend({},u,p)})(i,"mobile"):{},{external_plugins:BB(o,i.options())});return((d,c,u,m)=>{const p=Ya(u.forced_plugins),f=Ya(m.plugins),h=((v,y)=>$f(v,y)?v.sections()[y]:{})(c,"mobile"),g=((v,y,E,w)=>v&&$f(y,"mobile")?w:E)(d,c,f,h.plugins?Ya(h.plugins):f),b=((v,y)=>[...Ya(v),...Ya(y)])(p,g);return $.extend(m,{forced_plugins:p,plugins:b})})(t,i,o,l)},DB=t=>{(e=>{const n=o=>()=>{U("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),o!=="none"&&((r,s)=>{e.formatter.toggle(r,void 0),e.nodeChanged()})("align"+o)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,s=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Ht(s,a=>W(e.formatter.matchNode(a,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)},LB=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,s,a,i)=>{const l=R(r.getRoot());return a=Ca(l,I.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),wa(l,I.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e,t.schema):e},od=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:o}=(r=>{if(typeof r!="string"){const s=$.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(e);gm(t,{...o,content:LB(t,n),format:"html",set:!1,selection:!0}).each(r=>{const s=((a,i,l)=>wm(a).editor.insertContent(i,l))(t,r.content,o);pm(t,s,r),t.addVisual()})}},MB={"font-size":"size","font-family":"face"},IB=li("font"),Jx=t=>(e,n)=>C.from(n).map(R).filter(je).bind(o=>((r,s,a)=>qu(R(a),i=>(l=>gi(l,r).orThunk(()=>IB(l)?Ft(MB,r).bind(d=>Xn(l,d)):C.none()))(i),i=>kt(R(s),i)))(t,e,o.dom).or(((r,s)=>C.from(Pt.DOM.getStyle(s,r,!0)))(t,o.dom))).getOr(""),FB=Jx("font-size"),UB=fn(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Jx("font-family")),zB=t=>Ce(t.getBody()).bind(e=>{const n=e.container();return C.from(H(n)?n.parentNode:n)}),Vf=(t,e)=>((n,o)=>(r=>C.from(r.selection.getRng()).bind(s=>{const a=r.getBody();return s.startContainer===a&&s.startOffset===0?C.none():C.from(r.selection.getStart(!0))}))(n).orThunk(et(zB,n)).map(R).filter(je).bind(o))(t,ng(C.some,e)),tk=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=(s=>$.explode(s.options.get("font_size_style_values")))(t),r=(s=>$.explode(s.options.get("font_size_classes")))(t);return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},jB=t=>{const e=t.split(/\s*,\s*/);return Ct(e,n=>n.indexOf(" ")===-1||Qt(n,'"')||Qt(n,"'")?n:`'${n}'`).join(",")},ek=(t,e)=>{if(t.mode.isReadOnly())return;const n=t.dom,o=t.selection.getRng(),r=e?t.selection.getStart():t.selection.getEnd(),s=e?o.startContainer:o.endContainer,a=$a(n,s);if(!a||!a.isContentEditable)return;const i=e?Me:Qn,l=ye(t);((d,c,u,m)=>{const p=d.dom,f=g=>p.isBlock(g)&&g.parentElement===u,h=f(c)?c:p.getParent(m,f,u);return C.from(h).map(R)})(t,r,a,s).each(d=>{const c=vE(t,s,d.dom,a,!1,l);i(d,R(c)),t.selection.setCursorLocation(c,0),t.dispatch("NewBlock",{newBlock:c}),Ha(t,"insertParagraph")})},HB=t=>{DB(t),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n!=="paste"||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Et.os.isMacOS()||Et.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}})})(t),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!nt(a)||s++!==r||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),ln);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{od(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{od(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{od(e,r)},mceInsertContent:(n,o,r)=>{od(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(tN(e))}})})(t),(e=>{const n=(o,r,s)=>{if(e.mode.isReadOnly())return;const a=st(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");ie(a)&&st(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");return void(o&&e.dom.remove(o,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{(n=>{dw(n,"indent")})(e)},Outdent:()=>{cw(e)}}),e.editorCommands.addCommands({Outdent:()=>aw(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{(n=>{ek(n,!0)})(e)},InsertNewBlockAfter:()=>{(n=>{ek(n,!1)})(e)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Kl(EE,e)},mceInsertNewLine:(n,o,r)=>{AE(e,r)},InsertLineBreak:(n,o,r)=>{Kl(_E,e)}})})(t),(e=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const d=tk(i,l);i.formatter.toggle("fontname",{value:jB(d)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{((i,l)=>{i.formatter.toggle("fontsize",{value:tk(i,l)}),i.nodeChanged()})(n,a)},LineHeight:(r,s,a)=>{((i,l)=>{i.formatter.toggle("lineheight",{value:String(l)}),i.nodeChanged()})(n,a)},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:(i=a.customCode)!==null&&i!==void 0?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(st(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>(r=>Vf(r,s=>UB(r.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("FontSize",()=>(r=>Vf(r,s=>FB(r.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("LineHeight",()=>(r=>Vf(r,s=>{const a=R(r.getBody());return qu(s,l=>gi(l,"line-height"),et(kt,a)).getOrThunk(()=>{const l=parseFloat(On(s,"line-height")),d=parseFloat(On(s,"font-size"));return String(l/d)})}).getOr(""))(n))})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{((s,a)=>{s.removed||(a?lu(s):(i=>{const l=i.selection,d=i.getBody();let c=l.getRng();i.quirks.refreshContentEditable();const u=p=>{ou(p).each(f=>{p.selection.setRng(f),c=f})};!ts(i)&&i.hasEditableRoot()&&u(i);const m=((p,f)=>p.dom.getParent(f,h=>p.dom.getContentEditable(h)==="true"))(i,l.getNode());if(m&&i.dom.isChildOf(m,d))return((p,f)=>p.dom.getParent(f,h=>p.dom.getContentEditable(h)==="false")!==null)(i,m)||Zi(d),Zi(m),i.hasEditableRoot()||u(i),h0(i,c),void lu(i);i.inline||(Et.browser.isOpera()||Zi(d),i.getWin().focus()),(Et.browser.isFirefox()||i.inline)&&(Zi(d),h0(i,c)),lu(i)})(s))})(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)},$B=["toggleview"],nk=t=>_t($B,t.toLowerCase());class ok{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const s=this.editor,a=e.toLowerCase(),i=r?.skip_focus;if(s.removed||(a!=="mcefocus"&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?(d=>{ou(d).each(c=>d.selection.setRng(c))})(s):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;const l=this.commands.exec[a];return!!Nt(l)&&(l(a,n,o),s.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(!nk(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!Nt(o)&&o(n)}queryCommandValue(e){if(!nk(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return Nt(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;Dt(e,(r,s)=>{U(s.toLowerCase().split(","),a=>{o[n][a]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(s,a,i)=>n.call(o??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(o??this.editor)}}const VB=$.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class qf{static isNative(e){return!!VB[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||jt}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=ac(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(l.func.call(this.scope,r)===!1)return r.preventDefault(),r}}return r}on(e,n,o,r){if(n===!1&&(n=jt),n){const s={func:n,removed:!1};r&&$.extend(s,r);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),d=o?[s,...d]:[...d,s],this.bindings[l]=d}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return Dt(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=Er(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,U(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Dt(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||n.length===0)}}const Ga=t=>(t._eventDispatcher||(t._eventDispatcher=new qf({scope:t,toggleEvent:(e,n)=>{qf.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),Wf={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&t!=="remove"&&t!=="detach")return ac(t.toLowerCase(),e??{},o);const r=Ga(o).dispatch(t,e);if(n!==!1&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(t,r,!1),s=s.parent?s.parent():void 0}return r},on(t,e,n){return Ga(this).on(t,e,n)},off(t,e){return Ga(this).off(t,e)},once(t,e){return Ga(this).once(t,e)},hasEventListeners(t){return Ga(this).has(t)}},rd=Pt.DOM;let yr;const sd=(t,e)=>{if(e==="selectionchange")return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=rb(t);return n?(t.eventRoot||(t.eventRoot=rd.select(n)[0]),t.eventRoot):t.getBody()},rk=(t,e,n)=>{(o=>!o.hidden&&!so(o))(t)?t.dispatch(e,n):so(t)&&((o,r)=>{if((s=>s.type==="click")(r)&&!Q.metaKeyPressed(r)){const s=R(r.target);((a,i)=>Br(i,"a",l=>kt(l,R(a.getBody()))).bind(l=>Xn(l,"href")))(o,s).each(a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${bg(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else(s=>_t($A,s.type))(r)&&o.dispatch(r.type,r)})(t,n)},sk=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=sd(t,e);if(rb(t)){if(yr||(yr={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||yr&&(Dt(yr,(r,s)=>{t.dom.unbind(sd(t,s))}),yr=null)})),yr[e])return;const o=r=>{const s=r.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||rd.isChildOf(s,l))&&rk(a[i],e,r)}};yr[e]=o,rd.bind(n,e,o)}else{const o=r=>{rk(t,e,r)};rd.bind(n,e,o),t.delegates[e]=o}},ak={...Wf,bindPendingEventDelegates(){const t=this;$.each(t._pendingNativeEvents,e=>{sk(t,e)})},toggleNativeEvent(t,e){const n=this;t!=="focus"&&t!=="blur"&&(n.removed||(e?n.initialized?sk(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(sd(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Dt(t.delegates,(o,r)=>{t.dom.unbind(sd(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},qB=t=>st(t)?{value:t.split(/[ ,]/),valid:!0}:Mo(t,st)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},ik=(t,e)=>t+(Ts(e.message)?"":`. ${e.message}`),lk=t=>t.valid,Kf=(t,e,n="")=>{const o=e(t);return _n(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},Xa=t=>t.readonly,WB=["design","readonly"],dk=(t,e,n,o)=>{const r=n[e.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=R(a.getBody());i?(a.readonly=!0,a.hasEditableRoot()&&(l.dom.contentEditable="true"),VC(a)):(a.readonly=!1,qC(a))})(t,s.editorReadOnly),e.set(o),((a,i)=>{a.dispatch("SwitchMode",{mode:i})})(t,o)},KB=t=>{const e=re("design"),n=re({design:{activate:vt,deactivate:vt,editorReadOnly:!1},readonly:{activate:vt,deactivate:vt,editorReadOnly:!0}});return(o=>{o.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{Xa(o)&&r.preventDefault()}),o.on("BeforeExecCommand",r=>{r.command!=="Undo"&&r.command!=="Redo"||!Xa(o)||r.preventDefault()}),o.on("input",r=>{if(!r.isComposing&&Xa(o)){const s=o.undoManager.add();W(s)&&o.undoManager.undo()}}),o.on("compositionend",()=>{if(Xa(o)){const r=o.undoManager.add();W(r)&&o.undoManager.undo()}})})(t),(o=>{(r=>{r.serializer?KC(r):r.on("PreInit",()=>{KC(r)})})(o),(r=>{r.on("ShowCaret ObjectSelected",s=>{so(r)&&s.preventDefault()}),r.on("DisabledStateChange",s=>{s.isDefaultPrevented()||WC(r,s.state)})})(o)})(t),{isReadOnly:()=>Xa(t),set:o=>((r,s,a,i)=>{if(!(i===a.get()||r.initialized&&so(r))){if(!pt(s,i))throw new Error(`Editor mode '${i}' is invalid`);r.initialized?dk(r,a,s,i):r.on("init",()=>dk(r,a,s,i))}})(t,n.get(),e,o),get:()=>e.get(),register:(o,r)=>{n.set(((s,a,i)=>{if(_t(WB,a))throw new Error(`Cannot override default mode ${a}`);return{...s,[a]:{...i,deactivate:()=>{try{i.deactivate()}catch(l){console.error(`problem while deactivating editor mode ${a}:`,l)}}}}})(n.get(),o,r))}}},Yf=$.each,Gf=$.explode,YB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},ck=$.makeMap("alt,ctrl,shift,meta,access"),GB=t=>{const e={},n=Et.os.isMacOS()||Et.os.isiOS();Yf(Gf(t.toLowerCase(),"+"),s=>{(a=>a in ck)(s)?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=YB[s]||s.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in ck)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class uk{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Yf(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),o.type==="keydown"&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&o.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return Yf(Gf($.trim(e)),i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return typeof o=="string"?()=>{n.editor.execCommand(o,!1,null)}:$.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const s=$.map(Gf(e,">"),GB);return s[s.length-1]=$.extend(s[s.length-1],{func:o,scope:r||this.editor}),$.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return e.type==="keydown"&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const XB=()=>{const t=(()=>{const e={},n={},o={},r={},s={},a={},i={},l={},d={},c=(m,p)=>(f,h)=>{m[f.toLowerCase()]={...h,type:p}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(o,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:(u=a,(m,p)=>{u[m.toLowerCase()]={type:"contextform",...p}}),addSidebar:c(l,"sidebar"),addView:c(d,"views"),addIcon:(m,p)=>r[m.toLowerCase()]=p,addContext:(m,p)=>i[m.toLowerCase()]=p,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:l,views:d,contexts:i})};var u})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,addContext:t.addContext,getAll:t.getAll}},Cr=Pt.DOM,mk=$.extend,ZB=$.each;class ad{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,mk(this,ak);const r=this;this.id=e,this.hidden=!1;const s=((p,f)=>{const h=GT(f);return PB(Qx||AB,Qx,h,p,h)})(o.defaultOptions,n);this.options=((p,f,h=f)=>{const g={},b={},v=(E,w,x)=>{const S=Kf(w,x);return lk(S)?(b[E]=S.value,!0):(console.warn(ik(`Invalid value passed for the ${E} option`,S)),!1)},y=E=>pt(g,E);return{register:(E,w)=>{const x=(_=>st(_.processor))(w)?(_=>{const O=(()=>{switch(_){case"array":return Vt;case"boolean":return _n;case"function":return Nt;case"number":return an;case"object":return ie;case"string":return st;case"string[]":return qB;case"object[]":return D=>Mo(D,ie);case"regexp":return D=>Ja(D,RegExp);default:return Wt}})();return D=>Kf(D,O,`The value must be a ${_}.`)})(w.processor):w.processor,S=((_,O,D)=>{if(!le(O)){const k=Kf(O,D);if(lk(k))return k.value;console.error(ik(`Invalid default value passed for the "${_}" option`,k))}})(E,w.default,x);g[E]={...w,default:S,processor:x},Ft(b,E).orThunk(()=>Ft(f,E)).each(_=>v(E,_,x))},isRegistered:y,get:E=>Ft(b,E).orThunk(()=>Ft(g,E).map(w=>w.default)).getOrUndefined(),set:(E,w)=>{if(y(E)){const x=g[E];return x.immutable?(console.error(`"${E}" is an immutable option and cannot be updated`),!1):v(E,w,x.processor)}return console.warn(`"${E}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:E=>{const w=y(E);return w&&delete b[E],w},isSet:E=>pt(b,E),debug:()=>{try{console.log(JSON.parse(JSON.stringify(h,(E,w)=>_n(w)||an(w)||st(w)||Ee(w)||Vt(w)||ti(w)?w:Object.prototype.toString.call(w))))}catch(E){console.error(E)}}}})(0,s,n),(p=>{const f=p.options.register;f("id",{processor:"string",default:p.id}),f("selector",{processor:"string"}),f("target",{processor:"object"}),f("suffix",{processor:"string"}),f("cache_suffix",{processor:"string"}),f("base_url",{processor:"string"}),f("referrer_policy",{processor:"string",default:""}),f("language_load",{processor:"boolean",default:!0}),f("inline",{processor:"boolean",default:!1}),f("iframe_attrs",{processor:"object",default:{}}),f("doctype",{processor:"string",default:"<!DOCTYPE html>"}),f("document_base_url",{processor:"string",default:p.documentBaseUrl}),f("body_id",{processor:Yh(p,"tinymce"),default:"tinymce"}),f("body_class",{processor:Yh(p),default:""}),f("content_security_policy",{processor:"string",default:""}),f("br_in_pre",{processor:"boolean",default:!0}),f("forced_root_block",{processor:h=>{const g=st(h)&&Nn(h);return g?{value:h,valid:g}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),f("forced_root_block_attrs",{processor:"object",default:{}}),f("newline_behavior",{processor:h=>{const g=_t(["block","linebreak","invert","default"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),f("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),f("no_newline_selector",{processor:"string",default:""}),f("keep_styles",{processor:"boolean",default:!0}),f("end_container_on_empty_block",{processor:h=>_n(h)||st(h)?{valid:!0,value:h}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),f("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),f("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),f("font_size_classes",{processor:"string",default:""}),f("automatic_uploads",{processor:"boolean",default:!0}),f("images_reuse_filename",{processor:"boolean",default:!1}),f("images_replace_blob_uris",{processor:"boolean",default:!0}),f("icons",{processor:"string",default:""}),f("icons_url",{processor:"string",default:""}),f("images_upload_url",{processor:"string",default:""}),f("images_upload_base_path",{processor:"string",default:""}),f("images_upload_credentials",{processor:"boolean",default:!1}),f("images_upload_handler",{processor:"function"}),f("language",{processor:"string",default:"en"}),f("language_url",{processor:"string",default:""}),f("entity_encoding",{processor:"string",default:"named"}),f("indent",{processor:"boolean",default:!0}),f("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_use_margin",{processor:"boolean",default:!1}),f("indentation",{processor:"string",default:"40px"}),f("content_css",{processor:h=>{const g=h===!1||st(h)||Mo(h,st);return g?st(h)?{value:Ct(h.split(","),_r),valid:g}:Vt(h)?{value:h,valid:g}:h===!1?{value:[],valid:g}:{value:h,valid:g}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Oc(p)?[]:["default"]}),f("content_style",{processor:"string"}),f("content_css_cors",{processor:"boolean",default:!1}),f("font_css",{processor:h=>{const g=st(h)||Mo(h,st);return g?{value:Vt(h)?h:Ct(h.split(","),_r),valid:g}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),f("inline_boundaries",{processor:"boolean",default:!0}),f("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),f("object_resizing",{processor:h=>{const g=_n(h)||st(h);return g?h===!1||Rc.isiPhone()||Rc.isiPad()?{value:"",valid:g}:{value:h===!0?"table,img,figure.image,div,video,iframe":h,valid:g}:{valid:!1,message:"Must be boolean or a string"}},default:!J_}),f("resize_img_proportional",{processor:"boolean",default:!0}),f("event_root",{processor:"string"}),f("service_message",{processor:"string"}),f("theme",{processor:h=>h===!1||st(h)||Nt(h),default:"silver"}),f("theme_url",{processor:"string"}),f("formats",{processor:"object"}),f("format_empty_lines",{processor:"boolean",default:!1}),f("format_noneditable_selector",{processor:"string",default:""}),f("preview_styles",{processor:h=>{const g=h===!1||st(h);return g?{value:h===!1?"":h,valid:g}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),f("custom_ui_selector",{processor:"string",default:""}),f("hidden_input",{processor:"boolean",default:!0}),f("submit_patch",{processor:"boolean",default:!0}),f("encoding",{processor:"string"}),f("add_form_submit_trigger",{processor:"boolean",default:!0}),f("add_unload_trigger",{processor:"boolean",default:!0}),f("custom_undo_redo_levels",{processor:"number",default:0}),f("disable_nodechange",{processor:"boolean",default:!1}),f("disabled",{processor:h=>_n(h)?(p.initialized&&Ii(p)!==h&&Promise.resolve().then(()=>{((g,b)=>{g.dispatch("DisabledStateChange",{state:b})})(p,h)}),{valid:!0,value:h}):{valid:!1,message:"The value must be a boolean."},default:!1}),f("readonly",{processor:"boolean",default:!1}),f("editable_root",{processor:"boolean",default:!0}),f("plugins",{processor:"string[]",default:[]}),f("external_plugins",{processor:"object"}),f("forced_plugins",{processor:"string[]"}),f("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),f("model_url",{processor:"string"}),f("block_unsupported_drop",{processor:"boolean",default:!0}),f("visual",{processor:"boolean",default:!0}),f("visual_table_class",{processor:"string",default:"mce-item-table"}),f("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),f("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),f("setup",{processor:"function"}),f("init_instance_callback",{processor:"function"}),f("url_converter",{processor:"function",default:p.convertURL}),f("url_converter_scope",{processor:"object",default:p}),f("urlconverter_callback",{processor:"function"}),f("allow_conditional_comments",{processor:"boolean",default:!1}),f("allow_html_data_urls",{processor:"boolean",default:!1}),f("allow_svg_data_urls",{processor:"boolean"}),f("allow_html_in_named_anchor",{processor:"boolean",default:!1}),f("allow_script_urls",{processor:"boolean",default:!1}),f("allow_unsafe_link_target",{processor:"boolean",default:!1}),f("allow_mathml_annotation_encodings",{processor:h=>{const g=Mo(h,st);return g?{value:h,valid:g}:{valid:!1,message:"Must be an array of strings."}},default:[]}),f("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),f("fix_list_elements",{processor:"boolean",default:!1}),f("preserve_cdata",{processor:"boolean",default:!1}),f("remove_trailing_brs",{processor:"boolean",default:!0}),f("pad_empty_with_br",{processor:"boolean",default:!1}),f("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),f("element_format",{processor:"string",default:"html"}),f("entities",{processor:"string"}),f("schema",{processor:"string",default:"html5"}),f("convert_urls",{processor:"boolean",default:!0}),f("relative_urls",{processor:"boolean",default:!0}),f("remove_script_host",{processor:"boolean",default:!0}),f("custom_elements",{processor:Di}),f("extended_valid_elements",{processor:"string"}),f("invalid_elements",{processor:"string"}),f("invalid_styles",{processor:Di}),f("valid_children",{processor:"string"}),f("valid_classes",{processor:Di}),f("valid_elements",{processor:"string"}),f("valid_styles",{processor:Di}),f("verify_html",{processor:"boolean",default:!0}),f("auto_focus",{processor:h=>st(h)||h===!0}),f("browser_spellcheck",{processor:"boolean",default:!1}),f("protect",{processor:"array"}),f("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),f("deprecation_warnings",{processor:"boolean",default:!0}),f("a11y_advanced_options",{processor:"boolean",default:!1}),f("api_key",{processor:"string"}),f("license_key",{processor:"string"}),f("paste_block_drop",{processor:"boolean",default:!1}),f("paste_data_images",{processor:"boolean",default:!0}),f("paste_preprocess",{processor:"function"}),f("paste_postprocess",{processor:"function"}),f("paste_webkit_styles",{processor:"string",default:"none"}),f("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),f("paste_merge_formats",{processor:"boolean",default:!0}),f("smart_paste",{processor:"boolean",default:!0}),f("paste_as_text",{processor:"boolean",default:!1}),f("paste_tab_spaces",{processor:"number",default:4}),f("text_patterns",{processor:h=>Mo(h,ie)||h===!1?{value:zh(h===!1?[]:h),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),f("text_patterns_lookup",{processor:h=>{return Nt(h)?{value:(g=h,b=>{const v=g(b);return zh(v)}),valid:!0}:{valid:!1,message:"Must be a single function"};var g},default:h=>[]}),f("noneditable_class",{processor:"string",default:"mceNonEditable"}),f("editable_class",{processor:"string",default:"mceEditable"}),f("noneditable_regexp",{processor:h=>Mo(h,Kh)?{value:h,valid:!0}:Kh(h)?{value:[h],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),f("table_tab_navigation",{processor:"boolean",default:!0}),f("highlight_on_focus",{processor:"boolean",default:!0}),f("xss_sanitization",{processor:"boolean",default:!0}),f("details_initial_state",{processor:h=>{const g=_t(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("details_serialized_state",{processor:h=>{const g=_t(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("init_content_sync",{processor:"boolean",default:!1}),f("newdocument_content",{processor:"string",default:""}),f("sandbox_iframes",{processor:"boolean",default:!0}),f("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),f("convert_unsafe_embeds",{processor:"boolean",default:!0}),p.on("ScriptsLoaded",()=>{f("directionality",{processor:"string",default:yn.isRtl()?"rtl":void 0}),f("placeholder",{processor:"string",default:tS.getAttrib(p.getElement(),"placeholder")})})})(r);const a=this.options.get;a("deprecation_warnings")&&((p,f)=>{((h,g)=>{const b=DA(h),v=MA(g),y=v.length>0,E=b.length>0,w=g.theme==="mobile";if(y||E||w){const x=`
- `,S=w?`

Themes:${x}mobile`:"",_=y?`

Plugins:${x}${v.join(x)}`:"",O=E?`

Options:${x}${b.join(x)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+S+_+O)}})(p,f),((h,g)=>{const b=LA(h),v=IA(g),y=v.length>0,E=b.length>0;if(y||E){const w=`
- `,x=y?`

Plugins:${w}${v.map(FA).join(w)}`:"",S=E?`

Options:${w}${b.join(w)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+x+S)}})(p,f)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const d=Ac(r);d&&(no.ScriptLoader._setReferrerPolicy(d),Pt.DOM.styleSheetLoader._setReferrerPolicy(d));const c=ab(r);W(c)&&Pt.DOM.styleSheetLoader._setContentCssCors(c),ke.languageLoad=a("language_load"),ke.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new un(Gh(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Oc(r),this.hasVisual=$S(r),this.shortcuts=new uk(this),this.editorCommands=new ok(this),HB(this);const u=a("cache_suffix");u&&(Et.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:XB(),styleSheetLoader:void 0,show:vt,hide:vt,setEnabled:vt,isEnabled:Wt},this.mode=KB(r),o.dispatch("SetupEditor",{editor:this});const m=qS(r);Nt(m)&&m.call(r,r)}render(){(e=>{const n=e.id;yn.setCode(tb(e));const o=()=>{vr.unbind(window,"ready",o),e.render()};if(!Go.Event.domLoaded)return void vr.bind(window,"ready",o);if(!e.getElement())return;const r=R(e.getElement()),s=zg(r);e.on("remove",()=>{ag(r.dom.attributes,i=>ce(r,i.name)),Gn(r,s)}),e.ui.styleSheetLoader=((i,l)=>Np.forElement(i,{contentCssCors:ab(l),referrerPolicy:Ac(l)}))(r,e),Oc(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||vr.getParent(n,"form");a&&(e.formElement=a,DS(e)&&!jd(e.getElement())&&(vr.insertAfter(vr.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},vr.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!LS(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=jC(e),e.notificationManager=zC(e),(i=>i.options.get("encoding")==="xml")(e)&&e.on("GetContent",i=>{i.save&&(i.content=vr.encode(i.content))}),MS(e)&&e.on("submit",()=>{e.initialized&&e.save()}),IS(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),RB(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return ts(this)}translate(e){return yn.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(W(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:Wt,default:n})),r.isSet(e)||le(n)?r.get(e):n}hasPlugin(e,n){return!(!_t(Li(this),e)||n&&rs.get(e)===void 0)}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(Cr.show(e.getContainer()),Cr.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Cr.hide(e.getContainer()),Cr.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...e,load:!0},s=jd(o)?o.value:o.innerHTML,a=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),a}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...e,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),a.format==="raw"&&n.dispatch("RawSaveContent",a),s=a.content,jd(o))o.value=s;else{!e.is_removing&&n.inline||(o.innerHTML=s);const i=Cr.getParent(n.id,"form");i&&ZB(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=r.element=o=null,a.set_dirty!==!1&&n.setDirty(!1),s}setContent(e,n){return Em(this,e,n)}getContent(e){return((n,o={})=>{const r=((s,a)=>({...s,format:a,get:!0,getInner:!0}))(o,o.format?o.format:"html");return pC(n,r).fold(xe,s=>{const a=((i,l)=>wm(i).editor.getContent(l))(n,s);return hC(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=mk({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){e===void 0?Em(this,this.startContent,{format:"raw"}):Em(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||Cr.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Cr.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return(n=(e=this.bodyElement)!==null&&e!==void 0?e:o?.body)!==null&&n!==void 0?n:null}convertURL(e,n,o){const r=this,s=r.options.get,a=KS(r);if(Nt(a))return a.call(r,e,o,!0,n);if(!s("convert_urls")||o==="link"||ie(o)&&o.nodeName==="LINK"||e.indexOf("file:")===0||e.length===0)return e;const i=new un(e);return i.protocol!=="http"&&i.protocol!=="https"&&i.protocol!==""?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,o)=>{((r,s)=>{Xt(r).editor.addVisual(s)})(n,o)})(this,e)}setEditableRoot(e){((n,o)=>{n._editableRoot!==o&&(n._editableRoot=o,so(n)||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),((r,s)=>{r.dispatch("EditableRootStateChange",{state:s})})(n,o))})(this,e)}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&W(s?.nextSibling)&&wl.remove(s.nextSibling),(a=>{a.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&r&&(a=>{wl.setStyle(a.id,"display",a.orgDisplay)})(e),(a=>{a.dispatch("detach")})(e),wl.remove(e.getContainer()),El(n),El(o),e.destroy()}})(this)}destroy(e){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),El(r),El(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),wl.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;if(l){const d=l.dom;i.selection=l.win=l.dom=d.doc=null}})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ps=Pt.DOM,id=$.each;let ld,fk=!1,Be=[];const dd=t=>{const e=t.type;id(Po.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},gk=t=>{if(t!==fk){const e=Pt.DOM;t?(e.bind(window,"resize",dd),e.bind(window,"scroll",dd)):(e.unbind(window,"resize",dd),e.unbind(window,"scroll",dd)),fk=t}},pk=t=>{const e=Be;return Be=ft(Be,n=>t!==n),Po.activeEditor===t&&(Po.activeEditor=Be.length>0?Be[0]:null),Po.focusedEditor===t&&(Po.focusedEditor=null),e.length!==Be.length},QB=document.compatMode!=="CSS1Compat",Po={...Wf,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"6.1",releaseDate:"2025-01-22",i18n:yn,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=un.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(l==="")continue;const d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){d.indexOf(".min")!==-1&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new un(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new un(t.baseURL),t.suffix=n,(s=t).on("AddEditor",et(WN,s)),s.on("RemoveEditor",et(KN,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;o!==void 0&&Dt(o,(r,s)=>{ke.PluginManager.urls[s]=r})},init(t){const e=this;let n;const o=$.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;ps.unbind(window,"ready",s),(d=>{const c=t.onpageload;c&&c.apply(e,[])})(),l=dg((d=>Et.browser.isIE()||Et.browser.isEdge()?(_l("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):QB?(_l("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):st(d.selector)?ps.select(d.selector):W(d.target)?[d.target]:[])(t)),$.each(l,d=>{var c;(c=e.get(d.id))&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(pk(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)}),l=$.grep(l,d=>!e.get(d.id)),l.length===0?r([]):id(l,d=>{((c,u)=>c.inline&&u.tagName.toLowerCase()in o)(t,d)?_l("Could not initialize inline editor on invalid inline target element",d):((c,u,m)=>{const p=new ad(c,u,e);i.push(p),p.on("init",()=>{++a===l.length&&r(i)}),p.targetElm=p.targetElm||m,p.render()})((c=>{let u=c.id;return u||(u=Ft(c,"name").filter(m=>!ps.get(m)).getOrThunk(ps.uniqueId),c.setAttribute("id",u)),u})(d),t,d)})};return ps.bind(window,"ready",s),new Promise(a=>{n?a(n):r=i=>{a(i)}})},get(t){return arguments.length===0?Be.slice(0):st(t)?Zt(Be,e=>e.id===t).getOr(null):an(t)&&Be[t]?Be[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(n===null&&Be.push(t),gk(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),ld||(ld=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",ld))),t},createEditor(t,e){return this.add(new ad(t,e,this))},remove(t){const e=this;let n;if(t){if(!st(t))return n=t,Ee(e.get(n.id))?null:(pk(n)&&e.dispatch("RemoveEditor",{editor:n}),Be.length===0&&window.removeEventListener("beforeunload",ld),n.remove(),gk(Be.length>0),n);id(ps.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=Be.length-1;o>=0;o--)e.remove(Be[o])},execCommand(t,e,n){var o;const r=this,s=ie(n)?(o=n.id)!==null&&o!==void 0?o:n.index:n;switch(t){case"mceAddEditor":if(!r.get(s)){const a=n.options;new ad(s,a,r).render()}return!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{id(Be,t=>{t.save()})},addI18n:(t,e)=>{yn.add(t,e)},translate:t=>yn.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new un(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new un(this.baseURL)}};Po.setup();const JB=(()=>{const t=eo();return{FakeClipboardItem:e=>({items:e,types:Le(e),getType:n=>Ft(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),hk=Math.min,hs=Math.max,cd=Math.round,bk=(t,e,n)=>{let o=e.x,r=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,d=(n||"").split("");return d[0]==="b"&&(r+=l),d[1]==="r"&&(o+=i),d[0]==="c"&&(r+=cd(l/2)),d[1]==="c"&&(o+=cd(i/2)),d[3]==="b"&&(r-=a),d[4]==="r"&&(o-=s),d[3]==="c"&&(r-=cd(a/2)),d[4]==="c"&&(o-=cd(s/2)),bs(o,r,s,a)},bs=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),tP={inflate:(t,e,n)=>bs(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:bk,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const s=bk(t,e,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=hs(t.x,e.x),o=hs(t.y,e.y),r=hk(t.x+t.w,e.x+e.w),s=hk(t.y+t.h,e.y+e.h);return r-n<0||s-o<0?null:bs(n,o,r-n,s-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,d=hs(0,e.x-o),c=hs(0,e.y-r),u=hs(0,s-i),m=hs(0,a-l);return o+=d,r+=c,n&&(s+=d,a+=c,o-=u,r-=m),s-=u,a-=m,bs(o,r,s-o,a-r)},create:bs,fromClientRect:t=>bs(t.left,t.top,t.width,t.height)},eP=(()=>{const t={},e={},n={};return{load:(o,r)=>{const s=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(t[o]!==void 0)return t[o];{const i=new Promise((l,d)=>{const c=((u,m,p=1e3)=>{let f=!1,h=null;const g=y=>(...E)=>{f||(f=!0,h!==null&&(clearTimeout(h),h=null),y.apply(null,E))},b=g(u),v=g(m);return{start:(...y)=>{f||h!==null||(h=setTimeout(()=>v.apply(null,y),p))},resolve:b,reject:v}})(l,d);e[o]=c.resolve,no.ScriptLoader.loadScript(r).then(()=>c.start(a),()=>c.reject(s))});return t[o]=i,i}},add:(o,r)=>{e[o]!==void 0&&(e[o](r),delete e[o]),t[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete t[o],delete n[o]}}})();let Za;try{const t="__storage_test__";Za=window.localStorage,Za.setItem(t,t),Za.removeItem(t)}catch{Za=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,s)=>{n.push(r),e[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const nP={geom:{Rect:tP},util:{Delay:Qe,Tools:$,VK:Q,URI:un,EventDispatcher:qf,Observable:Wf,I18n:yn,LocalStorage:Za,ImageUploader:t=>{const e=GC(),n=ZC(t,e);return{upload:(o,r=!0)=>n.upload(o,r?XC(t):void 0)}}},dom:{EventUtils:Go,TreeWalker:oe,TextSeeker:Qo,DOMUtils:Pt,ScriptLoader:no,RangeUtils:lr,Serializer:DC,StyleSheetLoader:Sp,ControlSelection:v0,BookmarkManager:pa,Selection:PC,Event:Go.Event},html:{Styles:sc,Entities:Yo,Node:_e,Schema:Co,DomParser:ns,Writer:G0,Serializer:No},Env:Et,AddOnManager:ke,Annotator:a0,Formatter:t1,UndoManager:n1,EditorCommands:ok,WindowManager:jC,NotificationManager:zC,EditorObservable:ak,Shortcuts:uk,Editor:ad,FocusManager:p0,EditorManager:Po,DOM:Pt.DOM,ScriptLoader:no.ScriptLoader,PluginManager:rs,ThemeManager:gr,ModelManager:os,IconManager:xl,Resource:eP,FakeClipboard:JB,trim:$.trim,isArray:$.isArray,is:$.is,toArray:$.toArray,makeMap:$.makeMap,each:$.each,map:$.map,grep:$.grep,inArray:$.inArray,extend:$.extend,walk:$.walk,resolve:$.resolve,explode:$.explode,_addCacheSuffix:$._addCacheSuffix},vk=$.extend(Po,nP);(t=>{window.tinymce=t,window.tinyMCE=t})(vk),(t=>{if(typeof module=="object")try{module.exports=t}catch{}})(vk)})();
